\hypertarget{_renderer_d_x12_impl_8hpp_source}{}\doxysection{Renderer\+DX12\+Impl.\+hpp}
\label{_renderer_d_x12_impl_8hpp_source}\index{MesumGraphics/DX12Renderer/RendererDX12Impl.hpp@{MesumGraphics/DX12Renderer/RendererDX12Impl.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef M\_RendererDX12Impl}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define M\_RendererDX12Impl}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <MesumGraphics/DX12Renderer/DX12RendererCommon.hpp>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <MesumGraphics/Renderer.hpp>}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{keyword}{namespace }m::dx12}
\DoxyCodeLine{9 \{}
\DoxyCodeLine{10 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{11 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{12 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{13 \textcolor{keyword}{struct }\mbox{\hyperlink{structm_1_1dx12_1_1_d_x12_render_taskset}{DX12RenderTaskset}} : \textcolor{keyword}{public} \mbox{\hyperlink{structm_1_1render_1_1_taskset}{render::Taskset}}}
\DoxyCodeLine{14 \{}
\DoxyCodeLine{15     std::vector<render::Task*> m\_set\_tasks;}
\DoxyCodeLine{16 }
\DoxyCodeLine{17     \mbox{\hyperlink{structm_1_1render_1_1_task}{render::Task}}* add\_task(\mbox{\hyperlink{structm_1_1render_1_1_task_data}{render::TaskData}}* a\_data) \textcolor{keyword}{override};}
\DoxyCodeLine{18     \textcolor{keywordtype}{void}          clear() \textcolor{keyword}{override};}
\DoxyCodeLine{19 \};}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{22 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{23 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{24 \textcolor{keyword}{class }\mbox{\hyperlink{classm_1_1dx12_1_1_d_x12_surface}{DX12Surface}} : \textcolor{keyword}{public} \mbox{\hyperlink{classm_1_1render_1_1_i_surface}{render::ISurface}}}
\DoxyCodeLine{25 \{}
\DoxyCodeLine{26    \textcolor{keyword}{public}:}
\DoxyCodeLine{27     \mbox{\hyperlink{classm_1_1dx12_1_1_d_x12_surface}{\string~DX12Surface}}() \textcolor{keyword}{override} = \textcolor{keywordflow}{default};}
\DoxyCodeLine{28 }
\DoxyCodeLine{29     \textcolor{keywordtype}{void} init\_win32(render::Win32SurfaceInitData\& a\_data) \textcolor{keyword}{override};}
\DoxyCodeLine{30     \textcolor{keywordtype}{void} init\_x11(render::X11SurfaceInitData\& a\_data) \textcolor{keyword}{override};}
\DoxyCodeLine{31 }
\DoxyCodeLine{32     \mbox{\hyperlink{structm_1_1render_1_1_taskset}{render::Taskset}}* addNew\_renderTaskset() \textcolor{keyword}{override};}
\DoxyCodeLine{33 }
\DoxyCodeLine{34     \textcolor{keywordtype}{void} render() \textcolor{keyword}{override};}
\DoxyCodeLine{35     \textcolor{keywordtype}{void} resize(mU32 a\_width, mU32 a\_height) \textcolor{keyword}{override};}
\DoxyCodeLine{36 }
\DoxyCodeLine{37     \textcolor{keywordtype}{void} destroy() \textcolor{keyword}{override};}
\DoxyCodeLine{38 }
\DoxyCodeLine{39     D3D12\_CPU\_DESCRIPTOR\_HANDLE get\_currentRtvDesc();}
\DoxyCodeLine{40 }
\DoxyCodeLine{41     mU32 get\_width()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_clientWidth; \}}
\DoxyCodeLine{42     mU32 get\_height()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_clientHeight; \}}
\DoxyCodeLine{43 }
\DoxyCodeLine{44    \textcolor{keyword}{public}:}
\DoxyCodeLine{45     \textcolor{comment}{// The number of swap chain back buffers.}}
\DoxyCodeLine{46     \textcolor{keyword}{static} \textcolor{keyword}{const} mU8 scm\_numFrames = 3;}
\DoxyCodeLine{47 }
\DoxyCodeLine{48    \textcolor{keyword}{private}:}
\DoxyCodeLine{49     [[nodiscard]] mUInt get\_syncInterval()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_vSync ? 1 : 0; \}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51     [[nodiscard]] mUInt get\_presentFlags()\textcolor{keyword}{ const}}
\DoxyCodeLine{52 \textcolor{keyword}{    }\{}
\DoxyCodeLine{53         \textcolor{keywordflow}{return} m\_tearingSupported \&\& !m\_vSync ? DXGI\_PRESENT\_ALLOW\_TEARING : 0;}
\DoxyCodeLine{54     \}}
\DoxyCodeLine{55 }
\DoxyCodeLine{56     \textcolor{keywordtype}{void} update\_renderTargetViews(}
\DoxyCodeLine{57         ComPtr<ID3D12Device2> a\_device, ComPtr<IDXGISwapChain4> a\_swapChain,}
\DoxyCodeLine{58         ComPtr<ID3D12DescriptorHeap> a\_descriptorHeap);}
\DoxyCodeLine{59 }
\DoxyCodeLine{60    \textcolor{keyword}{private}:}
\DoxyCodeLine{61     \textcolor{comment}{// By default, enable V-\/Sync.}}
\DoxyCodeLine{62     \textcolor{comment}{// Can be toggled with the V key.}}
\DoxyCodeLine{63     mBool m\_vSync            = \textcolor{keyword}{true};}
\DoxyCodeLine{64     mBool m\_tearingSupported = \textcolor{keyword}{false};}
\DoxyCodeLine{65 }
\DoxyCodeLine{66     ComPtr<IDXGISwapChain4> m\_swapChain;}
\DoxyCodeLine{67     ComPtr<ID3D12Resource>  m\_backBuffers[scm\_numFrames];}
\DoxyCodeLine{68     mUInt                   m\_currentBackBufferIndex;}
\DoxyCodeLine{69 }
\DoxyCodeLine{70     ComPtr<ID3D12DescriptorHeap> m\_RTVDescriptorHeap;}
\DoxyCodeLine{71     mUInt                        m\_RTVDescriptorSize;}
\DoxyCodeLine{72 }
\DoxyCodeLine{73     ComPtr<ID3D12DescriptorHeap> m\_SRVDescriptorHeap;}
\DoxyCodeLine{74 }
\DoxyCodeLine{75     std::vector<DX12RenderTaskset*> m\_renderTasksets;}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \textcolor{comment}{// Synchronization objects}}
\DoxyCodeLine{78     mU64 m\_frameFenceValues[scm\_numFrames] = \{\};}
\DoxyCodeLine{79 }
\DoxyCodeLine{80     \textcolor{comment}{// Surface description}}
\DoxyCodeLine{81     mU32 m\_clientWidth;}
\DoxyCodeLine{82     mU32 m\_clientHeight;}
\DoxyCodeLine{83 \};}
\DoxyCodeLine{84 }
\DoxyCodeLine{85 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{86 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{87 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{88 \textcolor{keyword}{class }\mbox{\hyperlink{classm_1_1dx12_1_1_d_x12_renderer}{DX12Renderer}} : \textcolor{keyword}{public} \mbox{\hyperlink{classm_1_1render_1_1_i_renderer}{render::IRenderer}}}
\DoxyCodeLine{89 \{}
\DoxyCodeLine{90    \textcolor{keyword}{public}:}
\DoxyCodeLine{91     \textcolor{keywordtype}{void} init() \textcolor{keyword}{override};}
\DoxyCodeLine{92     \textcolor{keywordtype}{void} destroy() \textcolor{keyword}{override};}
\DoxyCodeLine{93 }
\DoxyCodeLine{94     mBool get\_supportDearImGuiMultiViewports()\textcolor{keyword}{ override }\{ \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}}
\DoxyCodeLine{95     \textcolor{keywordtype}{void}  start\_dearImGuiNewFrameRenderer() \textcolor{keyword}{const override};}
\DoxyCodeLine{96 }
\DoxyCodeLine{97     \mbox{\hyperlink{classm_1_1render_1_1_i_surface}{render::ISurface}}*  getNew\_surface() \textcolor{keyword}{override};}
\DoxyCodeLine{98     \mbox{\hyperlink{structm_1_1render_1_1_i_resource}{render::IResource}}* getNew\_texture() \textcolor{keyword}{override};}
\DoxyCodeLine{99 \};}
\DoxyCodeLine{100 }
\DoxyCodeLine{101 \}  \textcolor{comment}{// namespace m::dx12}}
\DoxyCodeLine{102 }
\DoxyCodeLine{103 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// M\_RendererDX12Impl}}

\end{DoxyCode}
