\hypertarget{_renderer_vulkan_impl_8hpp_source}{}\doxysection{Renderer\+Vulkan\+Impl.\+hpp}
\label{_renderer_vulkan_impl_8hpp_source}\index{MesumGraphics/VulkanRenderer/RendererVulkanImpl.hpp@{MesumGraphics/VulkanRenderer/RendererVulkanImpl.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#ifndef M\_RendererVulkanImpl}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#define M\_RendererVulkanImpl}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <MesumGraphics/Renderer.hpp>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <VulkanRendererCommon.hpp>}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{keyword}{namespace }m::vulkan}
\DoxyCodeLine{9 \{}
\DoxyCodeLine{10 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{11 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{12 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{13 \textcolor{keyword}{struct }\mbox{\hyperlink{structm_1_1vulkan_1_1_vulkan_render_taskset}{VulkanRenderTaskset}} : \textcolor{keyword}{public} \mbox{\hyperlink{structm_1_1render_1_1_taskset}{render::Taskset}}}
\DoxyCodeLine{14 \{}
\DoxyCodeLine{15     std::vector<render::Task*> m\_set\_tasks;}
\DoxyCodeLine{16 }
\DoxyCodeLine{17     \mbox{\hyperlink{structm_1_1render_1_1_task}{render::Task}}* add\_task(\mbox{\hyperlink{structm_1_1render_1_1_task_data}{render::TaskData}}* a\_data) \textcolor{keyword}{override};}
\DoxyCodeLine{18     \textcolor{keywordtype}{void}          clear() \textcolor{keyword}{override};}
\DoxyCodeLine{19 \};}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{22 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{23 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{24 \textcolor{keyword}{class }\mbox{\hyperlink{classm_1_1vulkan_1_1_vulkan_surface}{VulkanSurface}} : \textcolor{keyword}{public} \mbox{\hyperlink{classm_1_1render_1_1_i_surface}{render::ISurface}}}
\DoxyCodeLine{25 \{}
\DoxyCodeLine{26    \textcolor{keyword}{public}:}
\DoxyCodeLine{27     \mbox{\hyperlink{classm_1_1vulkan_1_1_vulkan_surface}{\string~VulkanSurface}}() \textcolor{keyword}{override} = \textcolor{keywordflow}{default};}
\DoxyCodeLine{28 }
\DoxyCodeLine{29     \textcolor{keywordtype}{void} init\_win32(render::Win32SurfaceInitData\& a\_data) \textcolor{keyword}{override};}
\DoxyCodeLine{30     \textcolor{keywordtype}{void} init\_x11(render::X11SurfaceInitData\& a\_data) \textcolor{keyword}{override};}
\DoxyCodeLine{31 }
\DoxyCodeLine{32     \mbox{\hyperlink{structm_1_1render_1_1_taskset}{render::Taskset}}* addNew\_renderTaskset() \textcolor{keyword}{override};}
\DoxyCodeLine{33 }
\DoxyCodeLine{34     \textcolor{keywordtype}{void} render() \textcolor{keyword}{override};}
\DoxyCodeLine{35     \textcolor{keywordtype}{void} resize(mU32 a\_width, mU32 a\_height) \textcolor{keyword}{override};}
\DoxyCodeLine{36 }
\DoxyCodeLine{37     \textcolor{keywordtype}{void} destroy() \textcolor{keyword}{override};}
\DoxyCodeLine{38 }
\DoxyCodeLine{39     VkCommandBuffer get\_currentCommandBuffer()}
\DoxyCodeLine{40     \{}
\DoxyCodeLine{41         \textcolor{keywordflow}{return} m\_frameMainCommandBuffers[m\_currentBackBufferIndex];}
\DoxyCodeLine{42     \}}
\DoxyCodeLine{43     VkFramebuffer get\_currentFramebuffer()}
\DoxyCodeLine{44     \{}
\DoxyCodeLine{45         \textcolor{keywordflow}{return} m\_frameFramebuffers[m\_currentImageIndex];}
\DoxyCodeLine{46     \}}
\DoxyCodeLine{47     VkRenderPass get\_mainRenderPass() \{ \textcolor{keywordflow}{return} m\_mainRenderPass; \}}
\DoxyCodeLine{48     mU32          get\_width()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_clientWidth; \}}
\DoxyCodeLine{49     mU32          get\_height()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_clientHeight; \}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51    \textcolor{keyword}{public}:}
\DoxyCodeLine{52     \textcolor{comment}{// The number of swap chain back buffers.}}
\DoxyCodeLine{53     \textcolor{keyword}{static} \textcolor{keyword}{const} mU8      scm\_numFrames = 3;}
\DoxyCodeLine{54     \textcolor{keyword}{static} \textcolor{keyword}{const} VkFormat scm\_selectedSwapChainFormat =}
\DoxyCodeLine{55         VK\_FORMAT\_B8G8R8A8\_UNORM;}
\DoxyCodeLine{56 }
\DoxyCodeLine{57    \textcolor{keyword}{private}:}
\DoxyCodeLine{58     \textcolor{keywordtype}{void} init\_internal();}
\DoxyCodeLine{59     \textcolor{keywordtype}{void} init\_swapChain();}
\DoxyCodeLine{60 }
\DoxyCodeLine{61     \textcolor{keywordtype}{void} destroy\_swapChain();}
\DoxyCodeLine{62 }
\DoxyCodeLine{63    \textcolor{keyword}{private}:}
\DoxyCodeLine{64 }
\DoxyCodeLine{65     VkSurfaceKHR             m\_surface   = VK\_NULL\_HANDLE;}
\DoxyCodeLine{66     VkSwapchainKHR           m\_swapChain = VK\_NULL\_HANDLE;}
\DoxyCodeLine{67     std::vector<VkImage>     m\_swapChainImages;}
\DoxyCodeLine{68     std::vector<VkImageView> m\_swapChainImageViews;}
\DoxyCodeLine{69 }
\DoxyCodeLine{70     std::vector<mU64>         m\_tstpRenderFinish;}
\DoxyCodeLine{71     std::vector<VkSemaphore> m\_semaphoresImageAcquired;}
\DoxyCodeLine{72     std::vector<VkSemaphore> m\_semaphoresRenderCompleted;}
\DoxyCodeLine{73 }
\DoxyCodeLine{74     \textcolor{comment}{// By default, enable V-\/Sync.}}
\DoxyCodeLine{75     \textcolor{comment}{// Can be toggled with the V key.}}
\DoxyCodeLine{76     mBool m\_vSync            = \textcolor{keyword}{true};}
\DoxyCodeLine{77     mBool m\_tearingSupported = \textcolor{keyword}{false};}
\DoxyCodeLine{78 }
\DoxyCodeLine{79     mUInt m\_currentBackBufferIndex = 0;}
\DoxyCodeLine{80     mUInt m\_currentImageIndex      = 0;}
\DoxyCodeLine{81 }
\DoxyCodeLine{82     \textcolor{comment}{// Synchronization objects}}
\DoxyCodeLine{83     mU64 m\_frameFenceValues[scm\_numFrames] = \{\};}
\DoxyCodeLine{84 }
\DoxyCodeLine{85     \textcolor{comment}{// Surface description}}
\DoxyCodeLine{86     mU32 m\_clientWidth;}
\DoxyCodeLine{87     mU32 m\_clientHeight;}
\DoxyCodeLine{88 }
\DoxyCodeLine{89     \textcolor{comment}{// Base render objects}}
\DoxyCodeLine{90     VkCommandPool              m\_frameCommandPools[scm\_numFrames];}
\DoxyCodeLine{91     VkCommandBuffer            m\_frameMainCommandBuffers[scm\_numFrames];}
\DoxyCodeLine{92     VkRenderPass               m\_mainRenderPass = VK\_NULL\_HANDLE;}
\DoxyCodeLine{93     std::vector<VkFramebuffer> m\_frameFramebuffers;}
\DoxyCodeLine{94 }
\DoxyCodeLine{95     std::vector<VulkanRenderTaskset*> m\_renderTasksets;}
\DoxyCodeLine{96 \};}
\DoxyCodeLine{97 }
\DoxyCodeLine{98 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{99 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{100 \textcolor{comment}{//-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{101 \textcolor{keyword}{class }\mbox{\hyperlink{classm_1_1vulkan_1_1_vulkan_renderer}{VulkanRenderer}} : \textcolor{keyword}{public} \mbox{\hyperlink{classm_1_1render_1_1_i_renderer}{render::IRenderer}}}
\DoxyCodeLine{102 \{}
\DoxyCodeLine{103    \textcolor{keyword}{public}:}
\DoxyCodeLine{104     \textcolor{keywordtype}{void} init() \textcolor{keyword}{override};}
\DoxyCodeLine{105     \textcolor{keywordtype}{void} destroy() \textcolor{keyword}{override};}
\DoxyCodeLine{106 }
\DoxyCodeLine{107     mBool get\_supportDearImGuiMultiViewports()\textcolor{keyword}{ override }\{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}}
\DoxyCodeLine{108     \textcolor{keywordtype}{void} start\_dearImGuiNewFrameRenderer() \textcolor{keyword}{const override};}
\DoxyCodeLine{109 }
\DoxyCodeLine{110     \mbox{\hyperlink{classm_1_1render_1_1_i_surface}{render::ISurface}}* getNew\_surface() \textcolor{keyword}{override};}
\DoxyCodeLine{111     \mbox{\hyperlink{structm_1_1render_1_1_i_resource}{render::IResource}}* getNew\_texture() \textcolor{keyword}{override};}
\DoxyCodeLine{112 \};}
\DoxyCodeLine{113 }
\DoxyCodeLine{114 \}  \textcolor{comment}{// namespace m::vulkan}}
\DoxyCodeLine{115 }
\DoxyCodeLine{116 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// M\_RendererVulkanImpl}}

\end{DoxyCode}
