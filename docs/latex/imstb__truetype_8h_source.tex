\hypertarget{imstb__truetype_8h_source}{}\doxysection{imstb\+\_\+truetype.\+h}
\label{imstb__truetype_8h_source}\index{MesumGraphics/DearImgui/imstb\_truetype.h@{MesumGraphics/DearImgui/imstb\_truetype.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// [DEAR IMGUI]}}
\DoxyCodeLine{2 \textcolor{comment}{// This is a slightly modified version of stb\_truetype.h 1.20.}}
\DoxyCodeLine{3 \textcolor{comment}{// Mostly fixing for compiler and static analyzer warnings.}}
\DoxyCodeLine{4 \textcolor{comment}{// Grep for [DEAR IMGUI] to find the changes.}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{comment}{// stb\_truetype.h -\/ v1.20 -\/ public domain}}
\DoxyCodeLine{7 \textcolor{comment}{// authored from 2009-\/2016 by Sean Barrett / RAD Game Tools}}
\DoxyCodeLine{8 \textcolor{comment}{//}}
\DoxyCodeLine{9 \textcolor{comment}{//   This library processes TrueType files:}}
\DoxyCodeLine{10 \textcolor{comment}{//        parse files}}
\DoxyCodeLine{11 \textcolor{comment}{//        extract glyph metrics}}
\DoxyCodeLine{12 \textcolor{comment}{//        extract glyph shapes}}
\DoxyCodeLine{13 \textcolor{comment}{//        render glyphs to one-\/channel bitmaps with antialiasing (box filter)}}
\DoxyCodeLine{14 \textcolor{comment}{//        render glyphs to one-\/channel SDF bitmaps (signed-\/distance field/function)}}
\DoxyCodeLine{15 \textcolor{comment}{//}}
\DoxyCodeLine{16 \textcolor{comment}{//   Todo:}}
\DoxyCodeLine{17 \textcolor{comment}{//        non-\/MS cmaps}}
\DoxyCodeLine{18 \textcolor{comment}{//        crashproof on bad data}}
\DoxyCodeLine{19 \textcolor{comment}{//        hinting? (no longer patented)}}
\DoxyCodeLine{20 \textcolor{comment}{//        cleartype-\/style AA?}}
\DoxyCodeLine{21 \textcolor{comment}{//        optimize: use simple memory allocator for intermediates}}
\DoxyCodeLine{22 \textcolor{comment}{//        optimize: build edge-\/list directly from curves}}
\DoxyCodeLine{23 \textcolor{comment}{//        optimize: rasterize directly from curves?}}
\DoxyCodeLine{24 \textcolor{comment}{//}}
\DoxyCodeLine{25 \textcolor{comment}{// ADDITIONAL CONTRIBUTORS}}
\DoxyCodeLine{26 \textcolor{comment}{//}}
\DoxyCodeLine{27 \textcolor{comment}{//   Mikko Mononen: compound shape support, more cmap formats}}
\DoxyCodeLine{28 \textcolor{comment}{//   Tor Andersson: kerning, subpixel rendering}}
\DoxyCodeLine{29 \textcolor{comment}{//   Dougall Johnson: OpenType / Type 2 font handling}}
\DoxyCodeLine{30 \textcolor{comment}{//   Daniel Ribeiro Maciel: basic GPOS-\/based kerning}}
\DoxyCodeLine{31 \textcolor{comment}{//}}
\DoxyCodeLine{32 \textcolor{comment}{//   Misc other:}}
\DoxyCodeLine{33 \textcolor{comment}{//       Ryan Gordon}}
\DoxyCodeLine{34 \textcolor{comment}{//       Simon Glass}}
\DoxyCodeLine{35 \textcolor{comment}{//       github:IntellectualKitty}}
\DoxyCodeLine{36 \textcolor{comment}{//       Imanol Celaya}}
\DoxyCodeLine{37 \textcolor{comment}{//       Daniel Ribeiro Maciel}}
\DoxyCodeLine{38 \textcolor{comment}{//}}
\DoxyCodeLine{39 \textcolor{comment}{//   Bug/warning reports/fixes:}}
\DoxyCodeLine{40 \textcolor{comment}{//       "{}Zer"{} on mollyrocket       Fabian "{}ryg"{} Giesen}}
\DoxyCodeLine{41 \textcolor{comment}{//       Cass Everitt               Martins Mozeiko}}
\DoxyCodeLine{42 \textcolor{comment}{//       stoiko (Haemimont Games)   Cap Petschulat}}
\DoxyCodeLine{43 \textcolor{comment}{//       Brian Hook                 Omar Cornut}}
\DoxyCodeLine{44 \textcolor{comment}{//       Walter van Niftrik         github:aloucks}}
\DoxyCodeLine{45 \textcolor{comment}{//       David Gow                  Peter LaValle}}
\DoxyCodeLine{46 \textcolor{comment}{//       David Given                Sergey Popov}}
\DoxyCodeLine{47 \textcolor{comment}{//       Ivan-\/Assen Ivanov          Giumo X. Clanjor}}
\DoxyCodeLine{48 \textcolor{comment}{//       Anthony Pesch              Higor Euripedes}}
\DoxyCodeLine{49 \textcolor{comment}{//       Johan Duparc               Thomas Fields}}
\DoxyCodeLine{50 \textcolor{comment}{//       Hou Qiming                 Derek Vinyard}}
\DoxyCodeLine{51 \textcolor{comment}{//       Rob Loach                  Cort Stratton}}
\DoxyCodeLine{52 \textcolor{comment}{//       Kenney Phillis Jr.         github:oyvindjam}}
\DoxyCodeLine{53 \textcolor{comment}{//       Brian Costabile            github:vassvik}}
\DoxyCodeLine{54 \textcolor{comment}{//       }}
\DoxyCodeLine{55 \textcolor{comment}{// VERSION HISTORY}}
\DoxyCodeLine{56 \textcolor{comment}{//}}
\DoxyCodeLine{57 \textcolor{comment}{//   1.20 (2019-\/02-\/07) PackFontRange skips missing codepoints; GetScaleFontVMetrics()}}
\DoxyCodeLine{58 \textcolor{comment}{//   1.19 (2018-\/02-\/11) GPOS kerning, STBTT\_fmod}}
\DoxyCodeLine{59 \textcolor{comment}{//   1.18 (2018-\/01-\/29) add missing function}}
\DoxyCodeLine{60 \textcolor{comment}{//   1.17 (2017-\/07-\/23) make more arguments const; doc fix}}
\DoxyCodeLine{61 \textcolor{comment}{//   1.16 (2017-\/07-\/12) SDF support}}
\DoxyCodeLine{62 \textcolor{comment}{//   1.15 (2017-\/03-\/03) make more arguments const}}
\DoxyCodeLine{63 \textcolor{comment}{//   1.14 (2017-\/01-\/16) num-\/fonts-\/in-\/TTC function}}
\DoxyCodeLine{64 \textcolor{comment}{//   1.13 (2017-\/01-\/02) support OpenType fonts, certain Apple fonts}}
\DoxyCodeLine{65 \textcolor{comment}{//   1.12 (2016-\/10-\/25) suppress warnings about casting away const with -\/Wcast-\/qual}}
\DoxyCodeLine{66 \textcolor{comment}{//   1.11 (2016-\/04-\/02) fix unused-\/variable warning}}
\DoxyCodeLine{67 \textcolor{comment}{//   1.10 (2016-\/04-\/02) user-\/defined fabs(); rare memory leak; remove duplicate typedef}}
\DoxyCodeLine{68 \textcolor{comment}{//   1.09 (2016-\/01-\/16) warning fix; avoid crash on outofmem; use allocation userdata properly}}
\DoxyCodeLine{69 \textcolor{comment}{//   1.08 (2015-\/09-\/13) document stbtt\_Rasterize(); fixes for vertical \& horizontal edges}}
\DoxyCodeLine{70 \textcolor{comment}{//   1.07 (2015-\/08-\/01) allow PackFontRanges to accept arrays of sparse codepoints;}}
\DoxyCodeLine{71 \textcolor{comment}{//                     variant PackFontRanges to pack and render in separate phases;}}
\DoxyCodeLine{72 \textcolor{comment}{//                     fix stbtt\_GetFontOFfsetForIndex (never worked for non-\/0 input?);}}
\DoxyCodeLine{73 \textcolor{comment}{//                     fixed an assert() bug in the new rasterizer}}
\DoxyCodeLine{74 \textcolor{comment}{//                     replace assert() with STBTT\_assert() in new rasterizer}}
\DoxyCodeLine{75 \textcolor{comment}{//}}
\DoxyCodeLine{76 \textcolor{comment}{//   Full history can be found at the end of this file.}}
\DoxyCodeLine{77 \textcolor{comment}{//}}
\DoxyCodeLine{78 \textcolor{comment}{// LICENSE}}
\DoxyCodeLine{79 \textcolor{comment}{//}}
\DoxyCodeLine{80 \textcolor{comment}{//   See end of file for license information.}}
\DoxyCodeLine{81 \textcolor{comment}{//}}
\DoxyCodeLine{82 \textcolor{comment}{// USAGE}}
\DoxyCodeLine{83 \textcolor{comment}{//}}
\DoxyCodeLine{84 \textcolor{comment}{//   Include this file in whatever places need to refer to it. In ONE C/C++}}
\DoxyCodeLine{85 \textcolor{comment}{//   file, write:}}
\DoxyCodeLine{86 \textcolor{comment}{//      \#define STB\_TRUETYPE\_IMPLEMENTATION}}
\DoxyCodeLine{87 \textcolor{comment}{//   before the \#include of this file. This expands out the actual}}
\DoxyCodeLine{88 \textcolor{comment}{//   implementation into that C/C++ file.}}
\DoxyCodeLine{89 \textcolor{comment}{//}}
\DoxyCodeLine{90 \textcolor{comment}{//   To make the implementation private to the file that generates the implementation,}}
\DoxyCodeLine{91 \textcolor{comment}{//      \#define STBTT\_STATIC}}
\DoxyCodeLine{92 \textcolor{comment}{//}}
\DoxyCodeLine{93 \textcolor{comment}{//   Simple 3D API (don't ship this, but it's fine for tools and quick start)}}
\DoxyCodeLine{94 \textcolor{comment}{//           stbtt\_BakeFontBitmap()               -\/-\/ bake a font to a bitmap for use as texture}}
\DoxyCodeLine{95 \textcolor{comment}{//           stbtt\_GetBakedQuad()                 -\/-\/ compute quad to draw for a given char}}
\DoxyCodeLine{96 \textcolor{comment}{//}}
\DoxyCodeLine{97 \textcolor{comment}{//   Improved 3D API (more shippable):}}
\DoxyCodeLine{98 \textcolor{comment}{//           \#include "{}stb\_rect\_pack.h"{}           -\/-\/ optional, but you really want it}}
\DoxyCodeLine{99 \textcolor{comment}{//           stbtt\_PackBegin()}}
\DoxyCodeLine{100 \textcolor{comment}{//           stbtt\_PackSetOversampling()          -\/-\/ for improved quality on small fonts}}
\DoxyCodeLine{101 \textcolor{comment}{//           stbtt\_PackFontRanges()               -\/-\/ pack and renders}}
\DoxyCodeLine{102 \textcolor{comment}{//           stbtt\_PackEnd()}}
\DoxyCodeLine{103 \textcolor{comment}{//           stbtt\_GetPackedQuad()}}
\DoxyCodeLine{104 \textcolor{comment}{//}}
\DoxyCodeLine{105 \textcolor{comment}{//   "{}Load"{} a font file from a memory buffer (you have to keep the buffer loaded)}}
\DoxyCodeLine{106 \textcolor{comment}{//           stbtt\_InitFont()}}
\DoxyCodeLine{107 \textcolor{comment}{//           stbtt\_GetFontOffsetForIndex()        -\/-\/ indexing for TTC font collections}}
\DoxyCodeLine{108 \textcolor{comment}{//           stbtt\_GetNumberOfFonts()             -\/-\/ number of fonts for TTC font collections}}
\DoxyCodeLine{109 \textcolor{comment}{//}}
\DoxyCodeLine{110 \textcolor{comment}{//   Render a unicode codepoint to a bitmap}}
\DoxyCodeLine{111 \textcolor{comment}{//           stbtt\_GetCodepointBitmap()           -\/-\/ allocates and returns a bitmap}}
\DoxyCodeLine{112 \textcolor{comment}{//           stbtt\_MakeCodepointBitmap()          -\/-\/ renders into bitmap you provide}}
\DoxyCodeLine{113 \textcolor{comment}{//           stbtt\_GetCodepointBitmapBox()        -\/-\/ how big the bitmap must be}}
\DoxyCodeLine{114 \textcolor{comment}{//}}
\DoxyCodeLine{115 \textcolor{comment}{//   Character advance/positioning}}
\DoxyCodeLine{116 \textcolor{comment}{//           stbtt\_GetCodepointHMetrics()}}
\DoxyCodeLine{117 \textcolor{comment}{//           stbtt\_GetFontVMetrics()}}
\DoxyCodeLine{118 \textcolor{comment}{//           stbtt\_GetFontVMetricsOS2()}}
\DoxyCodeLine{119 \textcolor{comment}{//           stbtt\_GetCodepointKernAdvance()}}
\DoxyCodeLine{120 \textcolor{comment}{//}}
\DoxyCodeLine{121 \textcolor{comment}{//   Starting with version 1.06, the rasterizer was replaced with a new,}}
\DoxyCodeLine{122 \textcolor{comment}{//   faster and generally-\/more-\/precise rasterizer. The new rasterizer more}}
\DoxyCodeLine{123 \textcolor{comment}{//   accurately measures pixel coverage for anti-\/aliasing, except in the case}}
\DoxyCodeLine{124 \textcolor{comment}{//   where multiple shapes overlap, in which case it overestimates the AA pixel}}
\DoxyCodeLine{125 \textcolor{comment}{//   coverage. Thus, anti-\/aliasing of intersecting shapes may look wrong. If}}
\DoxyCodeLine{126 \textcolor{comment}{//   this turns out to be a problem, you can re-\/enable the old rasterizer with}}
\DoxyCodeLine{127 \textcolor{comment}{//        \#define STBTT\_RASTERIZER\_VERSION 1}}
\DoxyCodeLine{128 \textcolor{comment}{//   which will incur about a 15\% speed hit.}}
\DoxyCodeLine{129 \textcolor{comment}{//}}
\DoxyCodeLine{130 \textcolor{comment}{// ADDITIONAL DOCUMENTATION}}
\DoxyCodeLine{131 \textcolor{comment}{//}}
\DoxyCodeLine{132 \textcolor{comment}{//   Immediately after this block comment are a series of sample programs.}}
\DoxyCodeLine{133 \textcolor{comment}{//}}
\DoxyCodeLine{134 \textcolor{comment}{//   After the sample programs is the "{}header file"{} section. This section}}
\DoxyCodeLine{135 \textcolor{comment}{//   includes documentation for each API function.}}
\DoxyCodeLine{136 \textcolor{comment}{//}}
\DoxyCodeLine{137 \textcolor{comment}{//   Some important concepts to understand to use this library:}}
\DoxyCodeLine{138 \textcolor{comment}{//}}
\DoxyCodeLine{139 \textcolor{comment}{//      Codepoint}}
\DoxyCodeLine{140 \textcolor{comment}{//         Characters are defined by unicode codepoints, e.g. 65 is}}
\DoxyCodeLine{141 \textcolor{comment}{//         uppercase A, 231 is lowercase c with a cedilla, 0x7e30 is}}
\DoxyCodeLine{142 \textcolor{comment}{//         the hiragana for "{}ma"{}.}}
\DoxyCodeLine{143 \textcolor{comment}{//}}
\DoxyCodeLine{144 \textcolor{comment}{//      Glyph}}
\DoxyCodeLine{145 \textcolor{comment}{//         A visual character shape (every codepoint is rendered as}}
\DoxyCodeLine{146 \textcolor{comment}{//         some glyph)}}
\DoxyCodeLine{147 \textcolor{comment}{//}}
\DoxyCodeLine{148 \textcolor{comment}{//      Glyph index}}
\DoxyCodeLine{149 \textcolor{comment}{//         A font-\/specific integer ID representing a glyph}}
\DoxyCodeLine{150 \textcolor{comment}{//}}
\DoxyCodeLine{151 \textcolor{comment}{//      Baseline}}
\DoxyCodeLine{152 \textcolor{comment}{//         Glyph shapes are defined relative to a baseline, which is the}}
\DoxyCodeLine{153 \textcolor{comment}{//         bottom of uppercase characters. Characters extend both above}}
\DoxyCodeLine{154 \textcolor{comment}{//         and below the baseline.}}
\DoxyCodeLine{155 \textcolor{comment}{//}}
\DoxyCodeLine{156 \textcolor{comment}{//      Current Point}}
\DoxyCodeLine{157 \textcolor{comment}{//         As you draw text to the screen, you keep track of a "{}current point"{}}}
\DoxyCodeLine{158 \textcolor{comment}{//         which is the origin of each character. The current point's vertical}}
\DoxyCodeLine{159 \textcolor{comment}{//         position is the baseline. Even "{}baked fonts"{} use this model.}}
\DoxyCodeLine{160 \textcolor{comment}{//}}
\DoxyCodeLine{161 \textcolor{comment}{//      Vertical Font Metrics}}
\DoxyCodeLine{162 \textcolor{comment}{//         The vertical qualities of the font, used to vertically position}}
\DoxyCodeLine{163 \textcolor{comment}{//         and space the characters. See docs for stbtt\_GetFontVMetrics.}}
\DoxyCodeLine{164 \textcolor{comment}{//}}
\DoxyCodeLine{165 \textcolor{comment}{//      Font Size in Pixels or Points}}
\DoxyCodeLine{166 \textcolor{comment}{//         The preferred interface for specifying font sizes in stb\_truetype}}
\DoxyCodeLine{167 \textcolor{comment}{//         is to specify how tall the font's vertical extent should be in pixels.}}
\DoxyCodeLine{168 \textcolor{comment}{//         If that sounds good enough, skip the next paragraph.}}
\DoxyCodeLine{169 \textcolor{comment}{//}}
\DoxyCodeLine{170 \textcolor{comment}{//         Most font APIs instead use "{}points"{}, which are a common typographic}}
\DoxyCodeLine{171 \textcolor{comment}{//         measurement for describing font size, defined as 72 points per inch.}}
\DoxyCodeLine{172 \textcolor{comment}{//         stb\_truetype provides a point API for compatibility. However, true}}
\DoxyCodeLine{173 \textcolor{comment}{//         "{}per inch"{} conventions don't make much sense on computer displays}}
\DoxyCodeLine{174 \textcolor{comment}{//         since different monitors have different number of pixels per}}
\DoxyCodeLine{175 \textcolor{comment}{//         inch. For example, Windows traditionally uses a convention that}}
\DoxyCodeLine{176 \textcolor{comment}{//         there are 96 pixels per inch, thus making 'inch' measurements have}}
\DoxyCodeLine{177 \textcolor{comment}{//         nothing to do with inches, and thus effectively defining a point to}}
\DoxyCodeLine{178 \textcolor{comment}{//         be 1.333 pixels. Additionally, the TrueType font data provides}}
\DoxyCodeLine{179 \textcolor{comment}{//         an explicit scale factor to scale a given font's glyphs to points,}}
\DoxyCodeLine{180 \textcolor{comment}{//         but the author has observed that this scale factor is often wrong}}
\DoxyCodeLine{181 \textcolor{comment}{//         for non-\/commercial fonts, thus making fonts scaled in points}}
\DoxyCodeLine{182 \textcolor{comment}{//         according to the TrueType spec incoherently sized in practice.}}
\DoxyCodeLine{183 \textcolor{comment}{//}}
\DoxyCodeLine{184 \textcolor{comment}{// DETAILED USAGE:}}
\DoxyCodeLine{185 \textcolor{comment}{//}}
\DoxyCodeLine{186 \textcolor{comment}{//  Scale:}}
\DoxyCodeLine{187 \textcolor{comment}{//    Select how high you want the font to be, in points or pixels.}}
\DoxyCodeLine{188 \textcolor{comment}{//    Call ScaleForPixelHeight or ScaleForMappingEmToPixels to compute}}
\DoxyCodeLine{189 \textcolor{comment}{//    a scale factor SF that will be used by all other functions.}}
\DoxyCodeLine{190 \textcolor{comment}{//}}
\DoxyCodeLine{191 \textcolor{comment}{//  Baseline:}}
\DoxyCodeLine{192 \textcolor{comment}{//    You need to select a y-\/coordinate that is the baseline of where}}
\DoxyCodeLine{193 \textcolor{comment}{//    your text will appear. Call GetFontBoundingBox to get the baseline-\/relative}}
\DoxyCodeLine{194 \textcolor{comment}{//    bounding box for all characters. SF*-\/y0 will be the distance in pixels}}
\DoxyCodeLine{195 \textcolor{comment}{//    that the worst-\/case character could extend above the baseline, so if}}
\DoxyCodeLine{196 \textcolor{comment}{//    you want the top edge of characters to appear at the top of the}}
\DoxyCodeLine{197 \textcolor{comment}{//    screen where y=0, then you would set the baseline to SF*-\/y0.}}
\DoxyCodeLine{198 \textcolor{comment}{//}}
\DoxyCodeLine{199 \textcolor{comment}{//  Current point:}}
\DoxyCodeLine{200 \textcolor{comment}{//    Set the current point where the first character will appear. The}}
\DoxyCodeLine{201 \textcolor{comment}{//    first character could extend left of the current point; this is font}}
\DoxyCodeLine{202 \textcolor{comment}{//    dependent. You can either choose a current point that is the leftmost}}
\DoxyCodeLine{203 \textcolor{comment}{//    point and hope, or add some padding, or check the bounding box or}}
\DoxyCodeLine{204 \textcolor{comment}{//    left-\/side-\/bearing of the first character to be displayed and set}}
\DoxyCodeLine{205 \textcolor{comment}{//    the current point based on that.}}
\DoxyCodeLine{206 \textcolor{comment}{//}}
\DoxyCodeLine{207 \textcolor{comment}{//  Displaying a character:}}
\DoxyCodeLine{208 \textcolor{comment}{//    Compute the bounding box of the character. It will contain signed values}}
\DoxyCodeLine{209 \textcolor{comment}{//    relative to <current\_point, baseline>. I.e. if it returns x0,y0,x1,y1,}}
\DoxyCodeLine{210 \textcolor{comment}{//    then the character should be displayed in the rectangle from}}
\DoxyCodeLine{211 \textcolor{comment}{//    <current\_point+SF*x0, baseline+SF*y0> to <current\_point+SF*x1,baseline+SF*y1).}}
\DoxyCodeLine{212 \textcolor{comment}{//}}
\DoxyCodeLine{213 \textcolor{comment}{//  Advancing for the next character:}}
\DoxyCodeLine{214 \textcolor{comment}{//    Call GlyphHMetrics, and compute 'current\_point += SF * advance'.}}
\DoxyCodeLine{215 \textcolor{comment}{// }}
\DoxyCodeLine{216 \textcolor{comment}{//}}
\DoxyCodeLine{217 \textcolor{comment}{// ADVANCED USAGE}}
\DoxyCodeLine{218 \textcolor{comment}{//}}
\DoxyCodeLine{219 \textcolor{comment}{//   Quality:}}
\DoxyCodeLine{220 \textcolor{comment}{//}}
\DoxyCodeLine{221 \textcolor{comment}{//    -\/ Use the functions with Subpixel at the end to allow your characters}}
\DoxyCodeLine{222 \textcolor{comment}{//      to have subpixel positioning. Since the font is anti-\/aliased, not}}
\DoxyCodeLine{223 \textcolor{comment}{//      hinted, this is very import for quality. (This is not possible with}}
\DoxyCodeLine{224 \textcolor{comment}{//      baked fonts.)}}
\DoxyCodeLine{225 \textcolor{comment}{//}}
\DoxyCodeLine{226 \textcolor{comment}{//    -\/ Kerning is now supported, and if you're supporting subpixel rendering}}
\DoxyCodeLine{227 \textcolor{comment}{//      then kerning is worth using to give your text a polished look.}}
\DoxyCodeLine{228 \textcolor{comment}{//}}
\DoxyCodeLine{229 \textcolor{comment}{//   Performance:}}
\DoxyCodeLine{230 \textcolor{comment}{//}}
\DoxyCodeLine{231 \textcolor{comment}{//    -\/ Convert Unicode codepoints to glyph indexes and operate on the glyphs;}}
\DoxyCodeLine{232 \textcolor{comment}{//      if you don't do this, stb\_truetype is forced to do the conversion on}}
\DoxyCodeLine{233 \textcolor{comment}{//      every call.}}
\DoxyCodeLine{234 \textcolor{comment}{//}}
\DoxyCodeLine{235 \textcolor{comment}{//    -\/ There are a lot of memory allocations. We should modify it to take}}
\DoxyCodeLine{236 \textcolor{comment}{//      a temp buffer and allocate from the temp buffer (without freeing),}}
\DoxyCodeLine{237 \textcolor{comment}{//      should help performance a lot.}}
\DoxyCodeLine{238 \textcolor{comment}{//}}
\DoxyCodeLine{239 \textcolor{comment}{// NOTES}}
\DoxyCodeLine{240 \textcolor{comment}{//}}
\DoxyCodeLine{241 \textcolor{comment}{//   The system uses the raw data found in the .ttf file without changing it}}
\DoxyCodeLine{242 \textcolor{comment}{//   and without building auxiliary data structures. This is a bit inefficient}}
\DoxyCodeLine{243 \textcolor{comment}{//   on little-\/endian systems (the data is big-\/endian), but assuming you're}}
\DoxyCodeLine{244 \textcolor{comment}{//   caching the bitmaps or glyph shapes this shouldn't be a big deal.}}
\DoxyCodeLine{245 \textcolor{comment}{//}}
\DoxyCodeLine{246 \textcolor{comment}{//   It appears to be very hard to programmatically determine what font a}}
\DoxyCodeLine{247 \textcolor{comment}{//   given file is in a general way. I provide an API for this, but I don't}}
\DoxyCodeLine{248 \textcolor{comment}{//   recommend it.}}
\DoxyCodeLine{249 \textcolor{comment}{//}}
\DoxyCodeLine{250 \textcolor{comment}{//}}
\DoxyCodeLine{251 \textcolor{comment}{// SOURCE STATISTICS (based on v0.6c, 2050 LOC)}}
\DoxyCodeLine{252 \textcolor{comment}{//}}
\DoxyCodeLine{253 \textcolor{comment}{//   Documentation \& header file        520 LOC  \(\backslash\)\_\_\_ 660 LOC documentation}}
\DoxyCodeLine{254 \textcolor{comment}{//   Sample code                        140 LOC  /}}
\DoxyCodeLine{255 \textcolor{comment}{//   Truetype parsing                   620 LOC  -\/-\/-\/-\/ 620 LOC TrueType}}
\DoxyCodeLine{256 \textcolor{comment}{//   Software rasterization             240 LOC  \(\backslash\).}}
\DoxyCodeLine{257 \textcolor{comment}{//   Curve tessellation                 120 LOC   \(\backslash\)\_\_ 550 LOC Bitmap creation}}
\DoxyCodeLine{258 \textcolor{comment}{//   Bitmap management                  100 LOC   /}}
\DoxyCodeLine{259 \textcolor{comment}{//   Baked bitmap interface              70 LOC  /}}
\DoxyCodeLine{260 \textcolor{comment}{//   Font name matching \& access        150 LOC  -\/-\/-\/-\/ 150 }}
\DoxyCodeLine{261 \textcolor{comment}{//   C runtime library abstraction       60 LOC  -\/-\/-\/-\/  60}}
\DoxyCodeLine{262 \textcolor{comment}{//}}
\DoxyCodeLine{263 \textcolor{comment}{//}}
\DoxyCodeLine{264 \textcolor{comment}{// PERFORMANCE MEASUREMENTS FOR 1.06:}}
\DoxyCodeLine{265 \textcolor{comment}{//}}
\DoxyCodeLine{266 \textcolor{comment}{//                      32-\/bit     64-\/bit}}
\DoxyCodeLine{267 \textcolor{comment}{//   Previous release:  8.83 s     7.68 s}}
\DoxyCodeLine{268 \textcolor{comment}{//   Pool allocations:  7.72 s     6.34 s}}
\DoxyCodeLine{269 \textcolor{comment}{//   Inline sort     :  6.54 s     5.65 s}}
\DoxyCodeLine{270 \textcolor{comment}{//   New rasterizer  :  5.63 s     5.00 s}}
\DoxyCodeLine{271 }
\DoxyCodeLine{277 \textcolor{comment}{//}}
\DoxyCodeLine{278 \textcolor{comment}{//  Incomplete text-\/in-\/3d-\/api example, which draws quads properly aligned to be lossless}}
\DoxyCodeLine{279 \textcolor{comment}{//}}
\DoxyCodeLine{280 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{281 \textcolor{preprocessor}{\#define STB\_TRUETYPE\_IMPLEMENTATION  }\textcolor{comment}{// force following include to generate implementation}}
\DoxyCodeLine{282 \textcolor{preprocessor}{\#include "{}stb\_truetype.h"{}}}
\DoxyCodeLine{283 }
\DoxyCodeLine{284 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} ttf\_buffer[1<<20];}
\DoxyCodeLine{285 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} temp\_bitmap[512*512];}
\DoxyCodeLine{286 }
\DoxyCodeLine{287 \mbox{\hyperlink{structstbtt__bakedchar}{stbtt\_bakedchar}} cdata[96]; \textcolor{comment}{// ASCII 32..126 is 95 glyphs}}
\DoxyCodeLine{288 GLuint ftex;}
\DoxyCodeLine{289 }
\DoxyCodeLine{290 \textcolor{keywordtype}{void} my\_stbtt\_initfont(\textcolor{keywordtype}{void})}
\DoxyCodeLine{291 \{}
\DoxyCodeLine{292    fread(ttf\_buffer, 1, 1<<20, fopen(\textcolor{stringliteral}{"{}c:/windows/fonts/times.ttf"{}}, \textcolor{stringliteral}{"{}rb"{}}));}
\DoxyCodeLine{293    stbtt\_BakeFontBitmap(ttf\_buffer,0, 32.0, temp\_bitmap,512,512, 32,96, cdata); \textcolor{comment}{// no guarantee this fits!}}
\DoxyCodeLine{294    \textcolor{comment}{// can free ttf\_buffer at this point}}
\DoxyCodeLine{295    glGenTextures(1, \&ftex);}
\DoxyCodeLine{296    glBindTexture(GL\_TEXTURE\_2D, ftex);}
\DoxyCodeLine{297    glTexImage2D(GL\_TEXTURE\_2D, 0, GL\_ALPHA, 512,512, 0, GL\_ALPHA, GL\_UNSIGNED\_BYTE, temp\_bitmap);}
\DoxyCodeLine{298    \textcolor{comment}{// can free temp\_bitmap at this point}}
\DoxyCodeLine{299    glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_MIN\_FILTER, GL\_LINEAR);}
\DoxyCodeLine{300 \}}
\DoxyCodeLine{301 }
\DoxyCodeLine{302 \textcolor{keywordtype}{void} my\_stbtt\_print(\textcolor{keywordtype}{float} x, \textcolor{keywordtype}{float} y, \textcolor{keywordtype}{char} *text)}
\DoxyCodeLine{303 \{}
\DoxyCodeLine{304    \textcolor{comment}{// assume orthographic projection with units = screen pixels, origin at top left}}
\DoxyCodeLine{305    glEnable(GL\_TEXTURE\_2D);}
\DoxyCodeLine{306    glBindTexture(GL\_TEXTURE\_2D, ftex);}
\DoxyCodeLine{307    glBegin(GL\_QUADS);}
\DoxyCodeLine{308    \textcolor{keywordflow}{while} (*text) \{}
\DoxyCodeLine{309       \textcolor{keywordflow}{if} (*text >= 32 \&\& *text < 128) \{}
\DoxyCodeLine{310          \mbox{\hyperlink{structstbtt__aligned__quad}{stbtt\_aligned\_quad}} q;}
\DoxyCodeLine{311          stbtt\_GetBakedQuad(cdata, 512,512, *text-\/32, \&x,\&y,\&q,1);\textcolor{comment}{//1=opengl \& d3d10+,0=d3d9}}
\DoxyCodeLine{312          glTexCoord2f(q.s0,q.t1); glVertex2f(q.x0,q.y0);}
\DoxyCodeLine{313          glTexCoord2f(q.s1,q.t1); glVertex2f(q.x1,q.y0);}
\DoxyCodeLine{314          glTexCoord2f(q.s1,q.t0); glVertex2f(q.x1,q.y1);}
\DoxyCodeLine{315          glTexCoord2f(q.s0,q.t0); glVertex2f(q.x0,q.y1);}
\DoxyCodeLine{316       \}}
\DoxyCodeLine{317       ++text;}
\DoxyCodeLine{318    \}}
\DoxyCodeLine{319    glEnd();}
\DoxyCodeLine{320 \}}
\DoxyCodeLine{321 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{322 \textcolor{comment}{//}}
\DoxyCodeLine{323 \textcolor{comment}{//}}
\DoxyCodeLine{325 \textcolor{comment}{}\textcolor{comment}{//}}
\DoxyCodeLine{326 \textcolor{comment}{// Complete program (this compiles): get a single bitmap, print as ASCII art}}
\DoxyCodeLine{327 \textcolor{comment}{//}}
\DoxyCodeLine{328 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{329 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{330 \textcolor{preprocessor}{\#define STB\_TRUETYPE\_IMPLEMENTATION  }\textcolor{comment}{// force following include to generate implementation}}
\DoxyCodeLine{331 \textcolor{preprocessor}{\#include "{}stb\_truetype.h"{}}}
\DoxyCodeLine{332 }
\DoxyCodeLine{333 \textcolor{keywordtype}{char} ttf\_buffer[1<<25];}
\DoxyCodeLine{334 }
\DoxyCodeLine{335 \textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} **argv)}
\DoxyCodeLine{336 \{}
\DoxyCodeLine{337    \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} font;}
\DoxyCodeLine{338    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *bitmap;}
\DoxyCodeLine{339    \textcolor{keywordtype}{int} w,h,i,j,c = (argc > 1 ? atoi(argv[1]) : \textcolor{stringliteral}{'a'}), s = (argc > 2 ? atoi(argv[2]) : 20);}
\DoxyCodeLine{340 }
\DoxyCodeLine{341    fread(ttf\_buffer, 1, 1<<25, fopen(argc > 3 ? argv[3] : \textcolor{stringliteral}{"{}c:/windows/fonts/arialbd.ttf"{}}, \textcolor{stringliteral}{"{}rb"{}}));}
\DoxyCodeLine{342 }
\DoxyCodeLine{343    stbtt\_InitFont(\&font, ttf\_buffer, stbtt\_GetFontOffsetForIndex(ttf\_buffer,0));}
\DoxyCodeLine{344    bitmap = stbtt\_GetCodepointBitmap(\&font, 0,stbtt\_ScaleForPixelHeight(\&font, s), c, \&w, \&h, 0,0);}
\DoxyCodeLine{345 }
\DoxyCodeLine{346    \textcolor{keywordflow}{for} (j=0; j < h; ++j) \{}
\DoxyCodeLine{347       \textcolor{keywordflow}{for} (i=0; i < w; ++i)}
\DoxyCodeLine{348          putchar(\textcolor{stringliteral}{"{} .:ioVM@"{}}[bitmap[j*w+i]>>5]);}
\DoxyCodeLine{349       putchar(\textcolor{charliteral}{'\(\backslash\)n'});}
\DoxyCodeLine{350    \}}
\DoxyCodeLine{351    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{352 \}}
\DoxyCodeLine{353 \textcolor{preprocessor}{\#endif }}
\DoxyCodeLine{354 \textcolor{comment}{//}}
\DoxyCodeLine{355 \textcolor{comment}{// Output:}}
\DoxyCodeLine{356 \textcolor{comment}{//}}
\DoxyCodeLine{357 \textcolor{comment}{//     .ii.}}
\DoxyCodeLine{358 \textcolor{comment}{//    @@@@@@.}}
\DoxyCodeLine{359 \textcolor{comment}{//   V@Mio@@o}}
\DoxyCodeLine{360 \textcolor{comment}{//   :i.  V@V}}
\DoxyCodeLine{361 \textcolor{comment}{//     :oM@@M}}
\DoxyCodeLine{362 \textcolor{comment}{//   :@@@MM@M}}
\DoxyCodeLine{363 \textcolor{comment}{//   @@o  o@M}}
\DoxyCodeLine{364 \textcolor{comment}{//  :@@.  M@M}}
\DoxyCodeLine{365 \textcolor{comment}{//   @@@o@@@@}}
\DoxyCodeLine{366 \textcolor{comment}{//   :M@@V:@@.}}
\DoxyCodeLine{367 \textcolor{comment}{//  }}
\DoxyCodeLine{369 \textcolor{comment}{}\textcolor{comment}{// }}
\DoxyCodeLine{370 \textcolor{comment}{// Complete program: print "{}Hello World!"{} banner, with bugs}}
\DoxyCodeLine{371 \textcolor{comment}{//}}
\DoxyCodeLine{372 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{373 \textcolor{keywordtype}{char} buffer[24<<20];}
\DoxyCodeLine{374 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} screen[20][79];}
\DoxyCodeLine{375 }
\DoxyCodeLine{376 \textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} arg, \textcolor{keywordtype}{char} **argv)}
\DoxyCodeLine{377 \{}
\DoxyCodeLine{378    \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} font;}
\DoxyCodeLine{379    \textcolor{keywordtype}{int} i,j,ascent,baseline,ch=0;}
\DoxyCodeLine{380    \textcolor{keywordtype}{float} scale, xpos=2; \textcolor{comment}{// leave a little padding in case the character extends left}}
\DoxyCodeLine{381    \textcolor{keywordtype}{char} *text = \textcolor{stringliteral}{"{}Heljo World!"{}}; \textcolor{comment}{// intentionally misspelled to show 'lj' brokenness}}
\DoxyCodeLine{382 }
\DoxyCodeLine{383    fread(buffer, 1, 1000000, fopen(\textcolor{stringliteral}{"{}c:/windows/fonts/arialbd.ttf"{}}, \textcolor{stringliteral}{"{}rb"{}}));}
\DoxyCodeLine{384    stbtt\_InitFont(\&font, buffer, 0);}
\DoxyCodeLine{385 }
\DoxyCodeLine{386    scale = stbtt\_ScaleForPixelHeight(\&font, 15);}
\DoxyCodeLine{387    stbtt\_GetFontVMetrics(\&font, \&ascent,0,0);}
\DoxyCodeLine{388    baseline = (int) (ascent*scale);}
\DoxyCodeLine{389 }
\DoxyCodeLine{390    \textcolor{keywordflow}{while} (text[ch]) \{}
\DoxyCodeLine{391       \textcolor{keywordtype}{int} advance,lsb,x0,y0,x1,y1;}
\DoxyCodeLine{392       \textcolor{keywordtype}{float} x\_shift = xpos -\/ (float) floor(xpos);}
\DoxyCodeLine{393       stbtt\_GetCodepointHMetrics(\&font, text[ch], \&advance, \&lsb);}
\DoxyCodeLine{394       stbtt\_GetCodepointBitmapBoxSubpixel(\&font, text[ch], scale,scale,x\_shift,0, \&x0,\&y0,\&x1,\&y1);}
\DoxyCodeLine{395       stbtt\_MakeCodepointBitmapSubpixel(\&font, \&screen[baseline + y0][(\textcolor{keywordtype}{int}) xpos + x0], x1-\/x0,y1-\/y0, 79, scale,scale,x\_shift,0, text[ch]);}
\DoxyCodeLine{396       \textcolor{comment}{// note that this stomps the old data, so where character boxes overlap (e.g. 'lj') it's wrong}}
\DoxyCodeLine{397       \textcolor{comment}{// because this API is really for baking character bitmaps into textures. if you want to render}}
\DoxyCodeLine{398       \textcolor{comment}{// a sequence of characters, you really need to render each bitmap to a temp buffer, then}}
\DoxyCodeLine{399       \textcolor{comment}{// "{}alpha blend"{} that into the working buffer}}
\DoxyCodeLine{400       xpos += (advance * scale);}
\DoxyCodeLine{401       \textcolor{keywordflow}{if} (text[ch+1])}
\DoxyCodeLine{402          xpos += scale*stbtt\_GetCodepointKernAdvance(\&font, text[ch],text[ch+1]);}
\DoxyCodeLine{403       ++ch;}
\DoxyCodeLine{404    \}}
\DoxyCodeLine{405 }
\DoxyCodeLine{406    \textcolor{keywordflow}{for} (j=0; j < 20; ++j) \{}
\DoxyCodeLine{407       \textcolor{keywordflow}{for} (i=0; i < 78; ++i)}
\DoxyCodeLine{408          putchar(\textcolor{stringliteral}{"{} .:ioVM@"{}}[screen[j][i]>>5]);}
\DoxyCodeLine{409       putchar(\textcolor{charliteral}{'\(\backslash\)n'});}
\DoxyCodeLine{410    \}}
\DoxyCodeLine{411 }
\DoxyCodeLine{412    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{413 \}}
\DoxyCodeLine{414 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{415 }
\DoxyCodeLine{416 }
\DoxyCodeLine{425 }
\DoxyCodeLine{426 \textcolor{preprocessor}{\#ifdef STB\_TRUETYPE\_IMPLEMENTATION}}
\DoxyCodeLine{427    \textcolor{comment}{// \#define your own (u)stbtt\_int8/16/32 before including to override this}}
\DoxyCodeLine{428 \textcolor{preprocessor}{   \#ifndef stbtt\_uint8}}
\DoxyCodeLine{429    \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}   stbtt\_uint8;}
\DoxyCodeLine{430    \textcolor{keyword}{typedef} \textcolor{keywordtype}{signed}   \textcolor{keywordtype}{char}   stbtt\_int8;}
\DoxyCodeLine{431    \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short}  stbtt\_uint16;}
\DoxyCodeLine{432    \textcolor{keyword}{typedef} \textcolor{keywordtype}{signed}   \textcolor{keywordtype}{short}  stbtt\_int16;}
\DoxyCodeLine{433    \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}    stbtt\_uint32;}
\DoxyCodeLine{434    \textcolor{keyword}{typedef} \textcolor{keywordtype}{signed}   \textcolor{keywordtype}{int}    stbtt\_int32;}
\DoxyCodeLine{435 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{436 }
\DoxyCodeLine{437    \textcolor{keyword}{typedef} \textcolor{keywordtype}{char} stbtt\_\_check\_size32[\textcolor{keyword}{sizeof}(stbtt\_int32)==4 ? 1 : -\/1];}
\DoxyCodeLine{438    \textcolor{keyword}{typedef} \textcolor{keywordtype}{char} stbtt\_\_check\_size16[\textcolor{keyword}{sizeof}(stbtt\_int16)==2 ? 1 : -\/1];}
\DoxyCodeLine{439 }
\DoxyCodeLine{440    \textcolor{comment}{// e.g. \#define your own STBTT\_ifloor/STBTT\_iceil() to avoid math.h}}
\DoxyCodeLine{441 \textcolor{preprocessor}{   \#ifndef STBTT\_ifloor}}
\DoxyCodeLine{442 \textcolor{preprocessor}{   \#include <math.h>}}
\DoxyCodeLine{443 \textcolor{preprocessor}{   \#define STBTT\_ifloor(x)   ((int) floor(x))}}
\DoxyCodeLine{444 \textcolor{preprocessor}{   \#define STBTT\_iceil(x)    ((int) ceil(x))}}
\DoxyCodeLine{445 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{446 }
\DoxyCodeLine{447 \textcolor{preprocessor}{   \#ifndef STBTT\_sqrt}}
\DoxyCodeLine{448 \textcolor{preprocessor}{   \#include <math.h>}}
\DoxyCodeLine{449 \textcolor{preprocessor}{   \#define STBTT\_sqrt(x)      sqrt(x)}}
\DoxyCodeLine{450 \textcolor{preprocessor}{   \#define STBTT\_pow(x,y)     pow(x,y)}}
\DoxyCodeLine{451 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{452 }
\DoxyCodeLine{453 \textcolor{preprocessor}{   \#ifndef STBTT\_fmod}}
\DoxyCodeLine{454 \textcolor{preprocessor}{   \#include <math.h>}}
\DoxyCodeLine{455 \textcolor{preprocessor}{   \#define STBTT\_fmod(x,y)    fmod(x,y)}}
\DoxyCodeLine{456 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{457 }
\DoxyCodeLine{458 \textcolor{preprocessor}{   \#ifndef STBTT\_cos}}
\DoxyCodeLine{459 \textcolor{preprocessor}{   \#include <math.h>}}
\DoxyCodeLine{460 \textcolor{preprocessor}{   \#define STBTT\_cos(x)       cos(x)}}
\DoxyCodeLine{461 \textcolor{preprocessor}{   \#define STBTT\_acos(x)      acos(x)}}
\DoxyCodeLine{462 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{463 }
\DoxyCodeLine{464 \textcolor{preprocessor}{   \#ifndef STBTT\_fabs}}
\DoxyCodeLine{465 \textcolor{preprocessor}{   \#include <math.h>}}
\DoxyCodeLine{466 \textcolor{preprocessor}{   \#define STBTT\_fabs(x)      fabs(x)}}
\DoxyCodeLine{467 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{468 }
\DoxyCodeLine{469    \textcolor{comment}{// \#define your own functions "{}STBTT\_malloc"{} / "{}STBTT\_free"{} to avoid malloc.h}}
\DoxyCodeLine{470 \textcolor{preprocessor}{   \#ifndef STBTT\_malloc}}
\DoxyCodeLine{471 \textcolor{preprocessor}{   \#include <stdlib.h>}}
\DoxyCodeLine{472 \textcolor{preprocessor}{   \#define STBTT\_malloc(x,u)  ((void)(u),malloc(x))}}
\DoxyCodeLine{473 \textcolor{preprocessor}{   \#define STBTT\_free(x,u)    ((void)(u),free(x))}}
\DoxyCodeLine{474 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{475 }
\DoxyCodeLine{476 \textcolor{preprocessor}{   \#ifndef STBTT\_assert}}
\DoxyCodeLine{477 \textcolor{preprocessor}{   \#include <assert.h>}}
\DoxyCodeLine{478 \textcolor{preprocessor}{   \#define STBTT\_assert(x)    assert(x)}}
\DoxyCodeLine{479 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{480 }
\DoxyCodeLine{481 \textcolor{preprocessor}{   \#ifndef STBTT\_strlen}}
\DoxyCodeLine{482 \textcolor{preprocessor}{   \#include <string.h>}}
\DoxyCodeLine{483 \textcolor{preprocessor}{   \#define STBTT\_strlen(x)    strlen(x)}}
\DoxyCodeLine{484 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{485 }
\DoxyCodeLine{486 \textcolor{preprocessor}{   \#ifndef STBTT\_memcpy}}
\DoxyCodeLine{487 \textcolor{preprocessor}{   \#include <string.h>}}
\DoxyCodeLine{488 \textcolor{preprocessor}{   \#define STBTT\_memcpy       memcpy}}
\DoxyCodeLine{489 \textcolor{preprocessor}{   \#define STBTT\_memset       memset}}
\DoxyCodeLine{490 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{491 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{492 }
\DoxyCodeLine{499 }
\DoxyCodeLine{500 \textcolor{preprocessor}{\#ifndef \_\_STB\_INCLUDE\_STB\_TRUETYPE\_H\_\_}}
\DoxyCodeLine{501 \textcolor{preprocessor}{\#define \_\_STB\_INCLUDE\_STB\_TRUETYPE\_H\_\_}}
\DoxyCodeLine{502 }
\DoxyCodeLine{503 \textcolor{preprocessor}{\#ifdef STBTT\_STATIC}}
\DoxyCodeLine{504 \textcolor{preprocessor}{\#define STBTT\_DEF static}}
\DoxyCodeLine{505 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{506 \textcolor{preprocessor}{\#define STBTT\_DEF extern}}
\DoxyCodeLine{507 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{508 }
\DoxyCodeLine{509 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{510 \textcolor{keyword}{extern} \textcolor{stringliteral}{"{}C"{}} \{}
\DoxyCodeLine{511 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{512 }
\DoxyCodeLine{513 \textcolor{comment}{// private structure}}
\DoxyCodeLine{514 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{515 \{}
\DoxyCodeLine{516    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data;}
\DoxyCodeLine{517    \textcolor{keywordtype}{int} cursor;}
\DoxyCodeLine{518    \textcolor{keywordtype}{int} size;}
\DoxyCodeLine{519 \} \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}};}
\DoxyCodeLine{520 }
\DoxyCodeLine{522 \textcolor{comment}{//}}
\DoxyCodeLine{523 \textcolor{comment}{// TEXTURE BAKING API}}
\DoxyCodeLine{524 \textcolor{comment}{//}}
\DoxyCodeLine{525 \textcolor{comment}{// If you use this API, you only have to call two functions ever.}}
\DoxyCodeLine{526 \textcolor{comment}{//}}
\DoxyCodeLine{527 }
\DoxyCodeLine{528 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{529 \{}
\DoxyCodeLine{530    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} x0,y0,x1,y1; \textcolor{comment}{// coordinates of bbox in bitmap}}
\DoxyCodeLine{531    \textcolor{keywordtype}{float} xoff,yoff,xadvance;}
\DoxyCodeLine{532 \} \mbox{\hyperlink{structstbtt__bakedchar}{stbtt\_bakedchar}};}
\DoxyCodeLine{533 }
\DoxyCodeLine{534 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_BakeFontBitmap(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} offset,  \textcolor{comment}{// font location (use offset=0 for plain .ttf)}}
\DoxyCodeLine{535                                 \textcolor{keywordtype}{float} pixel\_height,                     \textcolor{comment}{// height of font in pixels}}
\DoxyCodeLine{536                                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *pixels, \textcolor{keywordtype}{int} pw, \textcolor{keywordtype}{int} ph,  \textcolor{comment}{// bitmap to be filled in}}
\DoxyCodeLine{537                                 \textcolor{keywordtype}{int} first\_char, \textcolor{keywordtype}{int} num\_chars,          \textcolor{comment}{// characters to bake}}
\DoxyCodeLine{538                                 \mbox{\hyperlink{structstbtt__bakedchar}{stbtt\_bakedchar}} *chardata);             \textcolor{comment}{// you allocate this, it's num\_chars long}}
\DoxyCodeLine{539 \textcolor{comment}{// if return is positive, the first unused row of the bitmap}}
\DoxyCodeLine{540 \textcolor{comment}{// if return is negative, returns the negative of the number of characters that fit}}
\DoxyCodeLine{541 \textcolor{comment}{// if return is 0, no characters fit and no rows were used}}
\DoxyCodeLine{542 \textcolor{comment}{// This uses a very crappy packing.}}
\DoxyCodeLine{543 }
\DoxyCodeLine{544 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{545 \{}
\DoxyCodeLine{546    \textcolor{keywordtype}{float} x0,y0,s0,t0; \textcolor{comment}{// top-\/left}}
\DoxyCodeLine{547    \textcolor{keywordtype}{float} x1,y1,s1,t1; \textcolor{comment}{// bottom-\/right}}
\DoxyCodeLine{548 \} \mbox{\hyperlink{structstbtt__aligned__quad}{stbtt\_aligned\_quad}};}
\DoxyCodeLine{549 }
\DoxyCodeLine{550 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetBakedQuad(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__bakedchar}{stbtt\_bakedchar}} *chardata, \textcolor{keywordtype}{int} pw, \textcolor{keywordtype}{int} ph,  \textcolor{comment}{// same data as above}}
\DoxyCodeLine{551                                \textcolor{keywordtype}{int} char\_index,             \textcolor{comment}{// character to display}}
\DoxyCodeLine{552                                \textcolor{keywordtype}{float} *xpos, \textcolor{keywordtype}{float} *ypos,   \textcolor{comment}{// pointers to current position in screen pixel space}}
\DoxyCodeLine{553                                \mbox{\hyperlink{structstbtt__aligned__quad}{stbtt\_aligned\_quad}} *q,      \textcolor{comment}{// output: quad to draw}}
\DoxyCodeLine{554                                \textcolor{keywordtype}{int} opengl\_fillrule);       \textcolor{comment}{// true if opengl fill rule; false if DX9 or earlier}}
\DoxyCodeLine{555 \textcolor{comment}{// Call GetBakedQuad with char\_index = 'character -\/ first\_char', and it}}
\DoxyCodeLine{556 \textcolor{comment}{// creates the quad you need to draw and advances the current position.}}
\DoxyCodeLine{557 \textcolor{comment}{//}}
\DoxyCodeLine{558 \textcolor{comment}{// The coordinate system used assumes y increases downwards.}}
\DoxyCodeLine{559 \textcolor{comment}{//}}
\DoxyCodeLine{560 \textcolor{comment}{// Characters will extend both above and below the current position;}}
\DoxyCodeLine{561 \textcolor{comment}{// see discussion of "{}BASELINE"{} above.}}
\DoxyCodeLine{562 \textcolor{comment}{//}}
\DoxyCodeLine{563 \textcolor{comment}{// It's inefficient; you might want to c\&p it and optimize it.}}
\DoxyCodeLine{564 }
\DoxyCodeLine{565 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetScaledFontVMetrics(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *fontdata, \textcolor{keywordtype}{int} index, \textcolor{keywordtype}{float} size, \textcolor{keywordtype}{float} *ascent, \textcolor{keywordtype}{float} *descent, \textcolor{keywordtype}{float} *lineGap);}
\DoxyCodeLine{566 \textcolor{comment}{// Query the font vertical metrics without having to create a font first.}}
\DoxyCodeLine{567 }
\DoxyCodeLine{568 }
\DoxyCodeLine{570 \textcolor{comment}{//}}
\DoxyCodeLine{571 \textcolor{comment}{// NEW TEXTURE BAKING API}}
\DoxyCodeLine{572 \textcolor{comment}{//}}
\DoxyCodeLine{573 \textcolor{comment}{// This provides options for packing multiple fonts into one atlas, not}}
\DoxyCodeLine{574 \textcolor{comment}{// perfectly but better than nothing.}}
\DoxyCodeLine{575 }
\DoxyCodeLine{576 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{577 \{}
\DoxyCodeLine{578    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} x0,y0,x1,y1; \textcolor{comment}{// coordinates of bbox in bitmap}}
\DoxyCodeLine{579    \textcolor{keywordtype}{float} xoff,yoff,xadvance;}
\DoxyCodeLine{580    \textcolor{keywordtype}{float} xoff2,yoff2;}
\DoxyCodeLine{581 \} \mbox{\hyperlink{structstbtt__packedchar}{stbtt\_packedchar}};}
\DoxyCodeLine{582 }
\DoxyCodeLine{583 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} \mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}};}
\DoxyCodeLine{584 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}};}
\DoxyCodeLine{585 \textcolor{preprocessor}{\#ifndef STB\_RECT\_PACK\_VERSION}}
\DoxyCodeLine{586 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structstbrp__rect}{stbrp\_rect}} \mbox{\hyperlink{structstbrp__rect}{stbrp\_rect}};}
\DoxyCodeLine{587 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{588 }
\DoxyCodeLine{589 STBTT\_DEF \textcolor{keywordtype}{int}  stbtt\_PackBegin(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *pixels, \textcolor{keywordtype}{int} width, \textcolor{keywordtype}{int} height, \textcolor{keywordtype}{int} stride\_in\_bytes, \textcolor{keywordtype}{int} padding, \textcolor{keywordtype}{void} *alloc\_context);}
\DoxyCodeLine{590 \textcolor{comment}{// Initializes a packing context stored in the passed-\/in stbtt\_pack\_context.}}
\DoxyCodeLine{591 \textcolor{comment}{// Future calls using this context will pack characters into the bitmap passed}}
\DoxyCodeLine{592 \textcolor{comment}{// in here: a 1-\/channel bitmap that is width * height. stride\_in\_bytes is}}
\DoxyCodeLine{593 \textcolor{comment}{// the distance from one row to the next (or 0 to mean they are packed tightly}}
\DoxyCodeLine{594 \textcolor{comment}{// together). "{}padding"{} is the amount of padding to leave between each}}
\DoxyCodeLine{595 \textcolor{comment}{// character (normally you want '1' for bitmaps you'll use as textures with}}
\DoxyCodeLine{596 \textcolor{comment}{// bilinear filtering).}}
\DoxyCodeLine{597 \textcolor{comment}{//}}
\DoxyCodeLine{598 \textcolor{comment}{// Returns 0 on failure, 1 on success.}}
\DoxyCodeLine{599 }
\DoxyCodeLine{600 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_PackEnd  (\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc);}
\DoxyCodeLine{601 \textcolor{comment}{// Cleans up the packing context and frees all memory.}}
\DoxyCodeLine{602 }
\DoxyCodeLine{603 \textcolor{preprocessor}{\#define STBTT\_POINT\_SIZE(x)   (-\/(x))}}
\DoxyCodeLine{604 }
\DoxyCodeLine{605 STBTT\_DEF \textcolor{keywordtype}{int}  stbtt\_PackFontRange(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *fontdata, \textcolor{keywordtype}{int} font\_index, \textcolor{keywordtype}{float} font\_size,}
\DoxyCodeLine{606                                 \textcolor{keywordtype}{int} first\_unicode\_char\_in\_range, \textcolor{keywordtype}{int} num\_chars\_in\_range, \mbox{\hyperlink{structstbtt__packedchar}{stbtt\_packedchar}} *chardata\_for\_range);}
\DoxyCodeLine{607 \textcolor{comment}{// Creates character bitmaps from the font\_index'th font found in fontdata (use}}
\DoxyCodeLine{608 \textcolor{comment}{// font\_index=0 if you don't know what that is). It creates num\_chars\_in\_range}}
\DoxyCodeLine{609 \textcolor{comment}{// bitmaps for characters with unicode values starting at first\_unicode\_char\_in\_range}}
\DoxyCodeLine{610 \textcolor{comment}{// and increasing. Data for how to render them is stored in chardata\_for\_range;}}
\DoxyCodeLine{611 \textcolor{comment}{// pass these to stbtt\_GetPackedQuad to get back renderable quads.}}
\DoxyCodeLine{612 \textcolor{comment}{//}}
\DoxyCodeLine{613 \textcolor{comment}{// font\_size is the full height of the character from ascender to descender,}}
\DoxyCodeLine{614 \textcolor{comment}{// as computed by stbtt\_ScaleForPixelHeight. To use a point size as computed}}
\DoxyCodeLine{615 \textcolor{comment}{// by stbtt\_ScaleForMappingEmToPixels, wrap the point size in STBTT\_POINT\_SIZE()}}
\DoxyCodeLine{616 \textcolor{comment}{// and pass that result as 'font\_size':}}
\DoxyCodeLine{617 \textcolor{comment}{//       ...,                  20 , ... // font max minus min y is 20 pixels tall}}
\DoxyCodeLine{618 \textcolor{comment}{//       ..., STBTT\_POINT\_SIZE(20), ... // 'M' is 20 pixels tall}}
\DoxyCodeLine{619 }
\DoxyCodeLine{620 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{621 \{}
\DoxyCodeLine{622    \textcolor{keywordtype}{float} font\_size;}
\DoxyCodeLine{623    \textcolor{keywordtype}{int} first\_unicode\_codepoint\_in\_range;  \textcolor{comment}{// if non-\/zero, then the chars are continuous, and this is the first codepoint}}
\DoxyCodeLine{624    \textcolor{keywordtype}{int} *array\_of\_unicode\_codepoints;       \textcolor{comment}{// if non-\/zero, then this is an array of unicode codepoints}}
\DoxyCodeLine{625    \textcolor{keywordtype}{int} num\_chars;}
\DoxyCodeLine{626    \mbox{\hyperlink{structstbtt__packedchar}{stbtt\_packedchar}} *chardata\_for\_range; \textcolor{comment}{// output}}
\DoxyCodeLine{627    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} h\_oversample, v\_oversample; \textcolor{comment}{// don't set these, they're used internally}}
\DoxyCodeLine{628 \} \mbox{\hyperlink{structstbtt__pack__range}{stbtt\_pack\_range}};}
\DoxyCodeLine{629 }
\DoxyCodeLine{630 STBTT\_DEF \textcolor{keywordtype}{int}  stbtt\_PackFontRanges(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *fontdata, \textcolor{keywordtype}{int} font\_index, \mbox{\hyperlink{structstbtt__pack__range}{stbtt\_pack\_range}} *ranges, \textcolor{keywordtype}{int} num\_ranges);}
\DoxyCodeLine{631 \textcolor{comment}{// Creates character bitmaps from multiple ranges of characters stored in}}
\DoxyCodeLine{632 \textcolor{comment}{// ranges. This will usually create a better-\/packed bitmap than multiple}}
\DoxyCodeLine{633 \textcolor{comment}{// calls to stbtt\_PackFontRange. Note that you can call this multiple}}
\DoxyCodeLine{634 \textcolor{comment}{// times within a single PackBegin/PackEnd.}}
\DoxyCodeLine{635 }
\DoxyCodeLine{636 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_PackSetOversampling(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} h\_oversample, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} v\_oversample);}
\DoxyCodeLine{637 \textcolor{comment}{// Oversampling a font increases the quality by allowing higher-\/quality subpixel}}
\DoxyCodeLine{638 \textcolor{comment}{// positioning, and is especially valuable at smaller text sizes.}}
\DoxyCodeLine{639 \textcolor{comment}{//}}
\DoxyCodeLine{640 \textcolor{comment}{// This function sets the amount of oversampling for all following calls to}}
\DoxyCodeLine{641 \textcolor{comment}{// stbtt\_PackFontRange(s) or stbtt\_PackFontRangesGatherRects for a given}}
\DoxyCodeLine{642 \textcolor{comment}{// pack context. The default (no oversampling) is achieved by h\_oversample=1}}
\DoxyCodeLine{643 \textcolor{comment}{// and v\_oversample=1. The total number of pixels required is}}
\DoxyCodeLine{644 \textcolor{comment}{// h\_oversample*v\_oversample larger than the default; for example, 2x2}}
\DoxyCodeLine{645 \textcolor{comment}{// oversampling requires 4x the storage of 1x1. For best results, render}}
\DoxyCodeLine{646 \textcolor{comment}{// oversampled textures with bilinear filtering. Look at the readme in}}
\DoxyCodeLine{647 \textcolor{comment}{// stb/tests/oversample for information about oversampled fonts}}
\DoxyCodeLine{648 \textcolor{comment}{//}}
\DoxyCodeLine{649 \textcolor{comment}{// To use with PackFontRangesGather etc., you must set it before calls}}
\DoxyCodeLine{650 \textcolor{comment}{// call to PackFontRangesGatherRects.}}
\DoxyCodeLine{651 }
\DoxyCodeLine{652 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_PackSetSkipMissingCodepoints(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keywordtype}{int} skip);}
\DoxyCodeLine{653 \textcolor{comment}{// If skip != 0, this tells stb\_truetype to skip any codepoints for which}}
\DoxyCodeLine{654 \textcolor{comment}{// there is no corresponding glyph. If skip=0, which is the default, then}}
\DoxyCodeLine{655 \textcolor{comment}{// codepoints without a glyph recived the font's "{}missing character"{} glyph,}}
\DoxyCodeLine{656 \textcolor{comment}{// typically an empty box by convention.}}
\DoxyCodeLine{657 }
\DoxyCodeLine{658 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetPackedQuad(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__packedchar}{stbtt\_packedchar}} *chardata, \textcolor{keywordtype}{int} pw, \textcolor{keywordtype}{int} ph,  \textcolor{comment}{// same data as above}}
\DoxyCodeLine{659                                \textcolor{keywordtype}{int} char\_index,             \textcolor{comment}{// character to display}}
\DoxyCodeLine{660                                \textcolor{keywordtype}{float} *xpos, \textcolor{keywordtype}{float} *ypos,   \textcolor{comment}{// pointers to current position in screen pixel space}}
\DoxyCodeLine{661                                \mbox{\hyperlink{structstbtt__aligned__quad}{stbtt\_aligned\_quad}} *q,      \textcolor{comment}{// output: quad to draw}}
\DoxyCodeLine{662                                \textcolor{keywordtype}{int} align\_to\_integer);}
\DoxyCodeLine{663 }
\DoxyCodeLine{664 STBTT\_DEF \textcolor{keywordtype}{int}  stbtt\_PackFontRangesGatherRects(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \mbox{\hyperlink{structstbtt__pack__range}{stbtt\_pack\_range}} *ranges, \textcolor{keywordtype}{int} num\_ranges, \mbox{\hyperlink{structstbrp__rect}{stbrp\_rect}} *rects);}
\DoxyCodeLine{665 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_PackFontRangesPackRects(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \mbox{\hyperlink{structstbrp__rect}{stbrp\_rect}} *rects, \textcolor{keywordtype}{int} num\_rects);}
\DoxyCodeLine{666 STBTT\_DEF \textcolor{keywordtype}{int}  stbtt\_PackFontRangesRenderIntoRects(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \mbox{\hyperlink{structstbtt__pack__range}{stbtt\_pack\_range}} *ranges, \textcolor{keywordtype}{int} num\_ranges, \mbox{\hyperlink{structstbrp__rect}{stbrp\_rect}} *rects);}
\DoxyCodeLine{667 \textcolor{comment}{// Calling these functions in sequence is roughly equivalent to calling}}
\DoxyCodeLine{668 \textcolor{comment}{// stbtt\_PackFontRanges(). If you more control over the packing of multiple}}
\DoxyCodeLine{669 \textcolor{comment}{// fonts, or if you want to pack custom data into a font texture, take a look}}
\DoxyCodeLine{670 \textcolor{comment}{// at the source to of stbtt\_PackFontRanges() and create a custom version }}
\DoxyCodeLine{671 \textcolor{comment}{// using these functions, e.g. call GatherRects multiple times,}}
\DoxyCodeLine{672 \textcolor{comment}{// building up a single array of rects, then call PackRects once,}}
\DoxyCodeLine{673 \textcolor{comment}{// then call RenderIntoRects repeatedly. This may result in a}}
\DoxyCodeLine{674 \textcolor{comment}{// better packing than calling PackFontRanges multiple times}}
\DoxyCodeLine{675 \textcolor{comment}{// (or it may not).}}
\DoxyCodeLine{676 }
\DoxyCodeLine{677 \textcolor{comment}{// this is an opaque structure that you shouldn't mess with which holds}}
\DoxyCodeLine{678 \textcolor{comment}{// all the context needed from PackBegin to PackEnd.}}
\DoxyCodeLine{679 \textcolor{keyword}{struct }\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} \{}
\DoxyCodeLine{680    \textcolor{keywordtype}{void} *user\_allocator\_context;}
\DoxyCodeLine{681    \textcolor{keywordtype}{void} *pack\_info;}
\DoxyCodeLine{682    \textcolor{keywordtype}{int}   width;}
\DoxyCodeLine{683    \textcolor{keywordtype}{int}   height;}
\DoxyCodeLine{684    \textcolor{keywordtype}{int}   stride\_in\_bytes;}
\DoxyCodeLine{685    \textcolor{keywordtype}{int}   padding;}
\DoxyCodeLine{686    \textcolor{keywordtype}{int}   skip\_missing;}
\DoxyCodeLine{687    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}   h\_oversample, v\_oversample;}
\DoxyCodeLine{688    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *pixels;}
\DoxyCodeLine{689    \textcolor{keywordtype}{void}  *nodes;}
\DoxyCodeLine{690 \};}
\DoxyCodeLine{691 }
\DoxyCodeLine{693 \textcolor{comment}{//}}
\DoxyCodeLine{694 \textcolor{comment}{// FONT LOADING}}
\DoxyCodeLine{695 \textcolor{comment}{//}}
\DoxyCodeLine{696 \textcolor{comment}{//}}
\DoxyCodeLine{697 }
\DoxyCodeLine{698 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_GetNumberOfFonts(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data);}
\DoxyCodeLine{699 \textcolor{comment}{// This function will determine the number of fonts in a font file.  TrueType}}
\DoxyCodeLine{700 \textcolor{comment}{// collection (.ttc) files may contain multiple fonts, while TrueType font}}
\DoxyCodeLine{701 \textcolor{comment}{// (.ttf) files only contain one font. The number of fonts can be used for}}
\DoxyCodeLine{702 \textcolor{comment}{// indexing with the previous function where the index is between zero and one}}
\DoxyCodeLine{703 \textcolor{comment}{// less than the total fonts. If an error occurs, -\/1 is returned.}}
\DoxyCodeLine{704 }
\DoxyCodeLine{705 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_GetFontOffsetForIndex(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} index);}
\DoxyCodeLine{706 \textcolor{comment}{// Each .ttf/.ttc file may have more than one font. Each font has a sequential}}
\DoxyCodeLine{707 \textcolor{comment}{// index number starting from 0. Call this function to get the font offset for}}
\DoxyCodeLine{708 \textcolor{comment}{// a given index; it returns -\/1 if the index is out of range. A regular .ttf}}
\DoxyCodeLine{709 \textcolor{comment}{// file will only define one font and it always be at offset 0, so it will}}
\DoxyCodeLine{710 \textcolor{comment}{// return '0' for index 0, and -\/1 for all other indices.}}
\DoxyCodeLine{711 }
\DoxyCodeLine{712 \textcolor{comment}{// The following structure is defined publicly so you can declare one on}}
\DoxyCodeLine{713 \textcolor{comment}{// the stack or as a global or etc, but you should treat it as opaque.}}
\DoxyCodeLine{714 \textcolor{keyword}{struct }\mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}}}
\DoxyCodeLine{715 \{}
\DoxyCodeLine{716    \textcolor{keywordtype}{void}           * userdata;}
\DoxyCodeLine{717    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}  * data;              \textcolor{comment}{// pointer to .ttf file}}
\DoxyCodeLine{718    \textcolor{keywordtype}{int}              fontstart;         \textcolor{comment}{// offset of start of font}}
\DoxyCodeLine{719 }
\DoxyCodeLine{720    \textcolor{keywordtype}{int} numGlyphs;                     \textcolor{comment}{// number of glyphs, needed for range checking}}
\DoxyCodeLine{721 }
\DoxyCodeLine{722    \textcolor{keywordtype}{int} loca,head,glyf,hhea,hmtx,kern,gpos; \textcolor{comment}{// table locations as offset from start of .ttf}}
\DoxyCodeLine{723    \textcolor{keywordtype}{int} index\_map;                     \textcolor{comment}{// a cmap mapping for our chosen character encoding}}
\DoxyCodeLine{724    \textcolor{keywordtype}{int} indexToLocFormat;              \textcolor{comment}{// format needed to map from glyph index to glyph}}
\DoxyCodeLine{725 }
\DoxyCodeLine{726    \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} cff;                    \textcolor{comment}{// cff font data}}
\DoxyCodeLine{727    \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} charstrings;            \textcolor{comment}{// the charstring index}}
\DoxyCodeLine{728    \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} gsubrs;                 \textcolor{comment}{// global charstring subroutines index}}
\DoxyCodeLine{729    \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} subrs;                  \textcolor{comment}{// private charstring subroutines index}}
\DoxyCodeLine{730    \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} fontdicts;              \textcolor{comment}{// array of font dicts}}
\DoxyCodeLine{731    \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} fdselect;               \textcolor{comment}{// map from glyph to fontdict}}
\DoxyCodeLine{732 \};}
\DoxyCodeLine{733 }
\DoxyCodeLine{734 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_InitFont(\mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} offset);}
\DoxyCodeLine{735 \textcolor{comment}{// Given an offset into the file that defines a font, this function builds}}
\DoxyCodeLine{736 \textcolor{comment}{// the necessary cached info for the rest of the system. You must allocate}}
\DoxyCodeLine{737 \textcolor{comment}{// the stbtt\_fontinfo yourself, and stbtt\_InitFont will fill it out. You don't}}
\DoxyCodeLine{738 \textcolor{comment}{// need to do anything special to free it, because the contents are pure}}
\DoxyCodeLine{739 \textcolor{comment}{// value data with no additional data structures. Returns 0 on failure.}}
\DoxyCodeLine{740 }
\DoxyCodeLine{741 }
\DoxyCodeLine{743 \textcolor{comment}{//}}
\DoxyCodeLine{744 \textcolor{comment}{// CHARACTER TO GLYPH-\/INDEX CONVERSIOn}}
\DoxyCodeLine{745 }
\DoxyCodeLine{746 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_FindGlyphIndex(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} unicode\_codepoint);}
\DoxyCodeLine{747 \textcolor{comment}{// If you're going to perform multiple operations on the same character}}
\DoxyCodeLine{748 \textcolor{comment}{// and you want a speed-\/up, call this function with the character you're}}
\DoxyCodeLine{749 \textcolor{comment}{// going to process, then use glyph-\/based functions instead of the}}
\DoxyCodeLine{750 \textcolor{comment}{// codepoint-\/based functions.}}
\DoxyCodeLine{751 \textcolor{comment}{// Returns 0 if the character codepoint is not defined in the font.}}
\DoxyCodeLine{752 }
\DoxyCodeLine{753 }
\DoxyCodeLine{755 \textcolor{comment}{//}}
\DoxyCodeLine{756 \textcolor{comment}{// CHARACTER PROPERTIES}}
\DoxyCodeLine{757 \textcolor{comment}{//}}
\DoxyCodeLine{758 }
\DoxyCodeLine{759 STBTT\_DEF \textcolor{keywordtype}{float} stbtt\_ScaleForPixelHeight(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} pixels);}
\DoxyCodeLine{760 \textcolor{comment}{// computes a scale factor to produce a font whose "{}height"{} is 'pixels' tall.}}
\DoxyCodeLine{761 \textcolor{comment}{// Height is measured as the distance from the highest ascender to the lowest}}
\DoxyCodeLine{762 \textcolor{comment}{// descender; in other words, it's equivalent to calling stbtt\_GetFontVMetrics}}
\DoxyCodeLine{763 \textcolor{comment}{// and computing:}}
\DoxyCodeLine{764 \textcolor{comment}{//       scale = pixels / (ascent -\/ descent)}}
\DoxyCodeLine{765 \textcolor{comment}{// so if you prefer to measure height by the ascent only, use a similar calculation.}}
\DoxyCodeLine{766 }
\DoxyCodeLine{767 STBTT\_DEF \textcolor{keywordtype}{float} stbtt\_ScaleForMappingEmToPixels(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} pixels);}
\DoxyCodeLine{768 \textcolor{comment}{// computes a scale factor to produce a font whose EM size is mapped to}}
\DoxyCodeLine{769 \textcolor{comment}{// 'pixels' tall. This is probably what traditional APIs compute, but}}
\DoxyCodeLine{770 \textcolor{comment}{// I'm not positive.}}
\DoxyCodeLine{771 }
\DoxyCodeLine{772 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetFontVMetrics(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} *ascent, \textcolor{keywordtype}{int} *descent, \textcolor{keywordtype}{int} *lineGap);}
\DoxyCodeLine{773 \textcolor{comment}{// ascent is the coordinate above the baseline the font extends; descent}}
\DoxyCodeLine{774 \textcolor{comment}{// is the coordinate below the baseline the font extends (i.e. it is typically negative)}}
\DoxyCodeLine{775 \textcolor{comment}{// lineGap is the spacing between one row's descent and the next row's ascent...}}
\DoxyCodeLine{776 \textcolor{comment}{// so you should advance the vertical position by "{}*ascent -\/ *descent + *lineGap"{}}}
\DoxyCodeLine{777 \textcolor{comment}{//   these are expressed in unscaled coordinates, so you must multiply by}}
\DoxyCodeLine{778 \textcolor{comment}{//   the scale factor for a given size}}
\DoxyCodeLine{779 }
\DoxyCodeLine{780 STBTT\_DEF \textcolor{keywordtype}{int}  stbtt\_GetFontVMetricsOS2(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} *typoAscent, \textcolor{keywordtype}{int} *typoDescent, \textcolor{keywordtype}{int} *typoLineGap);}
\DoxyCodeLine{781 \textcolor{comment}{// analogous to GetFontVMetrics, but returns the "{}typographic"{} values from the OS/2}}
\DoxyCodeLine{782 \textcolor{comment}{// table (specific to MS/Windows TTF files).}}
\DoxyCodeLine{783 \textcolor{comment}{//}}
\DoxyCodeLine{784 \textcolor{comment}{// Returns 1 on success (table present), 0 on failure.}}
\DoxyCodeLine{785 }
\DoxyCodeLine{786 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetFontBoundingBox(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} *x0, \textcolor{keywordtype}{int} *y0, \textcolor{keywordtype}{int} *x1, \textcolor{keywordtype}{int} *y1);}
\DoxyCodeLine{787 \textcolor{comment}{// the bounding box around all possible characters}}
\DoxyCodeLine{788 }
\DoxyCodeLine{789 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetCodepointHMetrics(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{int} *advanceWidth, \textcolor{keywordtype}{int} *leftSideBearing);}
\DoxyCodeLine{790 \textcolor{comment}{// leftSideBearing is the offset from the current horizontal position to the left edge of the character}}
\DoxyCodeLine{791 \textcolor{comment}{// advanceWidth is the offset from the current horizontal position to the next horizontal position}}
\DoxyCodeLine{792 \textcolor{comment}{//   these are expressed in unscaled coordinates}}
\DoxyCodeLine{793 }
\DoxyCodeLine{794 STBTT\_DEF \textcolor{keywordtype}{int}  stbtt\_GetCodepointKernAdvance(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} ch1, \textcolor{keywordtype}{int} ch2);}
\DoxyCodeLine{795 \textcolor{comment}{// an additional amount to add to the 'advance' value between ch1 and ch2}}
\DoxyCodeLine{796 }
\DoxyCodeLine{797 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_GetCodepointBox(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{int} *x0, \textcolor{keywordtype}{int} *y0, \textcolor{keywordtype}{int} *x1, \textcolor{keywordtype}{int} *y1);}
\DoxyCodeLine{798 \textcolor{comment}{// Gets the bounding box of the visible part of the glyph, in unscaled coordinates}}
\DoxyCodeLine{799 }
\DoxyCodeLine{800 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetGlyphHMetrics(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index, \textcolor{keywordtype}{int} *advanceWidth, \textcolor{keywordtype}{int} *leftSideBearing);}
\DoxyCodeLine{801 STBTT\_DEF \textcolor{keywordtype}{int}  stbtt\_GetGlyphKernAdvance(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph1, \textcolor{keywordtype}{int} glyph2);}
\DoxyCodeLine{802 STBTT\_DEF \textcolor{keywordtype}{int}  stbtt\_GetGlyphBox(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index, \textcolor{keywordtype}{int} *x0, \textcolor{keywordtype}{int} *y0, \textcolor{keywordtype}{int} *x1, \textcolor{keywordtype}{int} *y1);}
\DoxyCodeLine{803 \textcolor{comment}{// as above, but takes one or more glyph indices for greater efficiency}}
\DoxyCodeLine{804 }
\DoxyCodeLine{805 }
\DoxyCodeLine{807 \textcolor{comment}{//}}
\DoxyCodeLine{808 \textcolor{comment}{// GLYPH SHAPES (you probably don't need these, but they have to go before}}
\DoxyCodeLine{809 \textcolor{comment}{// the bitmaps for C declaration-\/order reasons)}}
\DoxyCodeLine{810 \textcolor{comment}{//}}
\DoxyCodeLine{811 }
\DoxyCodeLine{812 \textcolor{preprocessor}{\#ifndef STBTT\_vmove }\textcolor{comment}{// you can predefine these to use different values (but why?)}}
\DoxyCodeLine{813    \textcolor{keyword}{enum} \{}
\DoxyCodeLine{814       STBTT\_vmove=1,}
\DoxyCodeLine{815       STBTT\_vline,}
\DoxyCodeLine{816       STBTT\_vcurve,}
\DoxyCodeLine{817       STBTT\_vcubic}
\DoxyCodeLine{818    \};}
\DoxyCodeLine{819 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{820 }
\DoxyCodeLine{821 \textcolor{preprocessor}{\#ifndef stbtt\_vertex }\textcolor{comment}{// you can predefine this to use different values}}
\DoxyCodeLine{822                    \textcolor{comment}{// (we share this with other code at RAD)}}
\DoxyCodeLine{823 \textcolor{preprocessor}{   \#define stbtt\_vertex\_type short }\textcolor{comment}{// can't use stbtt\_int16 because that's not visible in the header file}}
\DoxyCodeLine{824    \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{825    \{}
\DoxyCodeLine{826       stbtt\_vertex\_type x,y,cx,cy,cx1,cy1;}
\DoxyCodeLine{827       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} type,padding;}
\DoxyCodeLine{828    \} \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}};}
\DoxyCodeLine{829 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{830 }
\DoxyCodeLine{831 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_IsGlyphEmpty(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index);}
\DoxyCodeLine{832 \textcolor{comment}{// returns non-\/zero if nothing is drawn for this glyph}}
\DoxyCodeLine{833 }
\DoxyCodeLine{834 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_GetCodepointShape(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} unicode\_codepoint, \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} **vertices);}
\DoxyCodeLine{835 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_GetGlyphShape(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index, \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} **vertices);}
\DoxyCodeLine{836 \textcolor{comment}{// returns \# of vertices and fills *vertices with the pointer to them}}
\DoxyCodeLine{837 \textcolor{comment}{//   these are expressed in "{}unscaled"{} coordinates}}
\DoxyCodeLine{838 \textcolor{comment}{//}}
\DoxyCodeLine{839 \textcolor{comment}{// The shape is a series of contours. Each one starts with}}
\DoxyCodeLine{840 \textcolor{comment}{// a STBTT\_moveto, then consists of a series of mixed}}
\DoxyCodeLine{841 \textcolor{comment}{// STBTT\_lineto and STBTT\_curveto segments. A lineto}}
\DoxyCodeLine{842 \textcolor{comment}{// draws a line from previous endpoint to its x,y; a curveto}}
\DoxyCodeLine{843 \textcolor{comment}{// draws a quadratic bezier from previous endpoint to}}
\DoxyCodeLine{844 \textcolor{comment}{// its x,y, using cx,cy as the bezier control point.}}
\DoxyCodeLine{845 }
\DoxyCodeLine{846 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_FreeShape(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *vertices);}
\DoxyCodeLine{847 \textcolor{comment}{// frees the data allocated above}}
\DoxyCodeLine{848 }
\DoxyCodeLine{850 \textcolor{comment}{//}}
\DoxyCodeLine{851 \textcolor{comment}{// BITMAP RENDERING}}
\DoxyCodeLine{852 \textcolor{comment}{//}}
\DoxyCodeLine{853 }
\DoxyCodeLine{854 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_FreeBitmap(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *bitmap, \textcolor{keywordtype}{void} *userdata);}
\DoxyCodeLine{855 \textcolor{comment}{// frees the bitmap allocated below}}
\DoxyCodeLine{856 }
\DoxyCodeLine{857 STBTT\_DEF \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbtt\_GetCodepointBitmap(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{int} *width, \textcolor{keywordtype}{int} *height, \textcolor{keywordtype}{int} *xoff, \textcolor{keywordtype}{int} *yoff);}
\DoxyCodeLine{858 \textcolor{comment}{// allocates a large-\/enough single-\/channel 8bpp bitmap and renders the}}
\DoxyCodeLine{859 \textcolor{comment}{// specified character/glyph at the specified scale into it, with}}
\DoxyCodeLine{860 \textcolor{comment}{// antialiasing. 0 is no coverage (transparent), 255 is fully covered (opaque).}}
\DoxyCodeLine{861 \textcolor{comment}{// *width \& *height are filled out with the width \& height of the bitmap,}}
\DoxyCodeLine{862 \textcolor{comment}{// which is stored left-\/to-\/right, top-\/to-\/bottom.}}
\DoxyCodeLine{863 \textcolor{comment}{//}}
\DoxyCodeLine{864 \textcolor{comment}{// xoff/yoff are the offset it pixel space from the glyph origin to the top-\/left of the bitmap}}
\DoxyCodeLine{865 }
\DoxyCodeLine{866 STBTT\_DEF \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbtt\_GetCodepointBitmapSubpixel(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{int} *width, \textcolor{keywordtype}{int} *height, \textcolor{keywordtype}{int} *xoff, \textcolor{keywordtype}{int} *yoff);}
\DoxyCodeLine{867 \textcolor{comment}{// the same as stbtt\_GetCodepoitnBitmap, but you can specify a subpixel}}
\DoxyCodeLine{868 \textcolor{comment}{// shift for the character}}
\DoxyCodeLine{869 }
\DoxyCodeLine{870 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_MakeCodepointBitmap(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *output, \textcolor{keywordtype}{int} out\_w, \textcolor{keywordtype}{int} out\_h, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{int} codepoint);}
\DoxyCodeLine{871 \textcolor{comment}{// the same as stbtt\_GetCodepointBitmap, but you pass in storage for the bitmap}}
\DoxyCodeLine{872 \textcolor{comment}{// in the form of 'output', with row spacing of 'out\_stride' bytes. the bitmap}}
\DoxyCodeLine{873 \textcolor{comment}{// is clipped to out\_w/out\_h bytes. Call stbtt\_GetCodepointBitmapBox to get the}}
\DoxyCodeLine{874 \textcolor{comment}{// width and height and positioning info for it first.}}
\DoxyCodeLine{875 }
\DoxyCodeLine{876 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_MakeCodepointBitmapSubpixel(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *output, \textcolor{keywordtype}{int} out\_w, \textcolor{keywordtype}{int} out\_h, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} codepoint);}
\DoxyCodeLine{877 \textcolor{comment}{// same as stbtt\_MakeCodepointBitmap, but you can specify a subpixel}}
\DoxyCodeLine{878 \textcolor{comment}{// shift for the character}}
\DoxyCodeLine{879 }
\DoxyCodeLine{880 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_MakeCodepointBitmapSubpixelPrefilter(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *output, \textcolor{keywordtype}{int} out\_w, \textcolor{keywordtype}{int} out\_h, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} oversample\_x, \textcolor{keywordtype}{int} oversample\_y, \textcolor{keywordtype}{float} *sub\_x, \textcolor{keywordtype}{float} *sub\_y, \textcolor{keywordtype}{int} codepoint);}
\DoxyCodeLine{881 \textcolor{comment}{// same as stbtt\_MakeCodepointBitmapSubpixel, but prefiltering}}
\DoxyCodeLine{882 \textcolor{comment}{// is performed (see stbtt\_PackSetOversampling)}}
\DoxyCodeLine{883 }
\DoxyCodeLine{884 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetCodepointBitmapBox(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *font, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{int} *ix0, \textcolor{keywordtype}{int} *iy0, \textcolor{keywordtype}{int} *ix1, \textcolor{keywordtype}{int} *iy1);}
\DoxyCodeLine{885 \textcolor{comment}{// get the bbox of the bitmap centered around the glyph origin; so the}}
\DoxyCodeLine{886 \textcolor{comment}{// bitmap width is ix1-\/ix0, height is iy1-\/iy0, and location to place}}
\DoxyCodeLine{887 \textcolor{comment}{// the bitmap top left is (leftSideBearing*scale,iy0).}}
\DoxyCodeLine{888 \textcolor{comment}{// (Note that the bitmap uses y-\/increases-\/down, but the shape uses}}
\DoxyCodeLine{889 \textcolor{comment}{// y-\/increases-\/up, so CodepointBitmapBox and CodepointBox are inverted.)}}
\DoxyCodeLine{890 }
\DoxyCodeLine{891 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetCodepointBitmapBoxSubpixel(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *font, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} *ix0, \textcolor{keywordtype}{int} *iy0, \textcolor{keywordtype}{int} *ix1, \textcolor{keywordtype}{int} *iy1);}
\DoxyCodeLine{892 \textcolor{comment}{// same as stbtt\_GetCodepointBitmapBox, but you can specify a subpixel}}
\DoxyCodeLine{893 \textcolor{comment}{// shift for the character}}
\DoxyCodeLine{894 }
\DoxyCodeLine{895 \textcolor{comment}{// the following functions are equivalent to the above functions, but operate}}
\DoxyCodeLine{896 \textcolor{comment}{// on glyph indices instead of Unicode codepoints (for efficiency)}}
\DoxyCodeLine{897 STBTT\_DEF \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbtt\_GetGlyphBitmap(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{int} glyph, \textcolor{keywordtype}{int} *width, \textcolor{keywordtype}{int} *height, \textcolor{keywordtype}{int} *xoff, \textcolor{keywordtype}{int} *yoff);}
\DoxyCodeLine{898 STBTT\_DEF \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbtt\_GetGlyphBitmapSubpixel(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} glyph, \textcolor{keywordtype}{int} *width, \textcolor{keywordtype}{int} *height, \textcolor{keywordtype}{int} *xoff, \textcolor{keywordtype}{int} *yoff);}
\DoxyCodeLine{899 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_MakeGlyphBitmap(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *output, \textcolor{keywordtype}{int} out\_w, \textcolor{keywordtype}{int} out\_h, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{int} glyph);}
\DoxyCodeLine{900 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_MakeGlyphBitmapSubpixel(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *output, \textcolor{keywordtype}{int} out\_w, \textcolor{keywordtype}{int} out\_h, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} glyph);}
\DoxyCodeLine{901 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_MakeGlyphBitmapSubpixelPrefilter(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *output, \textcolor{keywordtype}{int} out\_w, \textcolor{keywordtype}{int} out\_h, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} oversample\_x, \textcolor{keywordtype}{int} oversample\_y, \textcolor{keywordtype}{float} *sub\_x, \textcolor{keywordtype}{float} *sub\_y, \textcolor{keywordtype}{int} glyph);}
\DoxyCodeLine{902 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetGlyphBitmapBox(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *font, \textcolor{keywordtype}{int} glyph, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{int} *ix0, \textcolor{keywordtype}{int} *iy0, \textcolor{keywordtype}{int} *ix1, \textcolor{keywordtype}{int} *iy1);}
\DoxyCodeLine{903 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetGlyphBitmapBoxSubpixel(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *font, \textcolor{keywordtype}{int} glyph, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y,\textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} *ix0, \textcolor{keywordtype}{int} *iy0, \textcolor{keywordtype}{int} *ix1, \textcolor{keywordtype}{int} *iy1);}
\DoxyCodeLine{904 }
\DoxyCodeLine{905 }
\DoxyCodeLine{906 \textcolor{comment}{// @TODO: don't expose this structure}}
\DoxyCodeLine{907 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{908 \{}
\DoxyCodeLine{909    \textcolor{keywordtype}{int} w,h,stride;}
\DoxyCodeLine{910    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *pixels;}
\DoxyCodeLine{911 \} \mbox{\hyperlink{structstbtt____bitmap}{stbtt\_\_bitmap}};}
\DoxyCodeLine{912 }
\DoxyCodeLine{913 \textcolor{comment}{// rasterize a shape with quadratic beziers into a bitmap}}
\DoxyCodeLine{914 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_Rasterize(\mbox{\hyperlink{structstbtt____bitmap}{stbtt\_\_bitmap}} *result,        \textcolor{comment}{// 1-\/channel bitmap to draw into}}
\DoxyCodeLine{915                                \textcolor{keywordtype}{float} flatness\_in\_pixels,     \textcolor{comment}{// allowable error of curve in pixels}}
\DoxyCodeLine{916                                \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *vertices,       \textcolor{comment}{// array of vertices defining shape}}
\DoxyCodeLine{917                                \textcolor{keywordtype}{int} num\_verts,                \textcolor{comment}{// number of vertices in above array}}
\DoxyCodeLine{918                                \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{comment}{// scale applied to input vertices}}
\DoxyCodeLine{919                                \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{comment}{// translation applied to input vertices}}
\DoxyCodeLine{920                                \textcolor{keywordtype}{int} x\_off, \textcolor{keywordtype}{int} y\_off,         \textcolor{comment}{// another translation applied to input}}
\DoxyCodeLine{921                                \textcolor{keywordtype}{int} invert,                   \textcolor{comment}{// if non-\/zero, vertically flip shape}}
\DoxyCodeLine{922                                \textcolor{keywordtype}{void} *userdata);              \textcolor{comment}{// context for to STBTT\_MALLOC}}
\DoxyCodeLine{923 }
\DoxyCodeLine{925 \textcolor{comment}{//}}
\DoxyCodeLine{926 \textcolor{comment}{// Signed Distance Function (or Field) rendering}}
\DoxyCodeLine{927 }
\DoxyCodeLine{928 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_FreeSDF(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *bitmap, \textcolor{keywordtype}{void} *userdata);}
\DoxyCodeLine{929 \textcolor{comment}{// frees the SDF bitmap allocated below}}
\DoxyCodeLine{930 }
\DoxyCodeLine{931 STBTT\_DEF \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} * stbtt\_GetGlyphSDF(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} scale, \textcolor{keywordtype}{int} glyph, \textcolor{keywordtype}{int} padding, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} onedge\_value, \textcolor{keywordtype}{float} pixel\_dist\_scale, \textcolor{keywordtype}{int} *width, \textcolor{keywordtype}{int} *height, \textcolor{keywordtype}{int} *xoff, \textcolor{keywordtype}{int} *yoff);}
\DoxyCodeLine{932 STBTT\_DEF \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} * stbtt\_GetCodepointSDF(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} scale, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{int} padding, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} onedge\_value, \textcolor{keywordtype}{float} pixel\_dist\_scale, \textcolor{keywordtype}{int} *width, \textcolor{keywordtype}{int} *height, \textcolor{keywordtype}{int} *xoff, \textcolor{keywordtype}{int} *yoff);}
\DoxyCodeLine{933 \textcolor{comment}{// These functions compute a discretized SDF field for a single character, suitable for storing}}
\DoxyCodeLine{934 \textcolor{comment}{// in a single-\/channel texture, sampling with bilinear filtering, and testing against}}
\DoxyCodeLine{935 \textcolor{comment}{// larger than some threshold to produce scalable fonts.}}
\DoxyCodeLine{936 \textcolor{comment}{//        info              -\/-\/  the font}}
\DoxyCodeLine{937 \textcolor{comment}{//        scale             -\/-\/  controls the size of the resulting SDF bitmap, same as it would be creating a regular bitmap}}
\DoxyCodeLine{938 \textcolor{comment}{//        glyph/codepoint   -\/-\/  the character to generate the SDF for}}
\DoxyCodeLine{939 \textcolor{comment}{//        padding           -\/-\/  extra "{}pixels"{} around the character which are filled with the distance to the character (not 0),}}
\DoxyCodeLine{940 \textcolor{comment}{//                                 which allows effects like bit outlines}}
\DoxyCodeLine{941 \textcolor{comment}{//        onedge\_value      -\/-\/  value 0-\/255 to test the SDF against to reconstruct the character (i.e. the isocontour of the character)}}
\DoxyCodeLine{942 \textcolor{comment}{//        pixel\_dist\_scale  -\/-\/  what value the SDF should increase by when moving one SDF "{}pixel"{} away from the edge (on the 0..255 scale)}}
\DoxyCodeLine{943 \textcolor{comment}{//                                 if positive, > onedge\_value is inside; if negative, < onedge\_value is inside}}
\DoxyCodeLine{944 \textcolor{comment}{//        width,height      -\/-\/  output height \& width of the SDF bitmap (including padding)}}
\DoxyCodeLine{945 \textcolor{comment}{//        xoff,yoff         -\/-\/  output origin of the character}}
\DoxyCodeLine{946 \textcolor{comment}{//        return value      -\/-\/  a 2D array of bytes 0..255, width*height in size}}
\DoxyCodeLine{947 \textcolor{comment}{//}}
\DoxyCodeLine{948 \textcolor{comment}{// pixel\_dist\_scale \& onedge\_value are a scale \& bias that allows you to make}}
\DoxyCodeLine{949 \textcolor{comment}{// optimal use of the limited 0..255 for your application, trading off precision}}
\DoxyCodeLine{950 \textcolor{comment}{// and special effects. SDF values outside the range 0..255 are clamped to 0..255.}}
\DoxyCodeLine{951 \textcolor{comment}{//}}
\DoxyCodeLine{952 \textcolor{comment}{// Example:}}
\DoxyCodeLine{953 \textcolor{comment}{//      scale = stbtt\_ScaleForPixelHeight(22)}}
\DoxyCodeLine{954 \textcolor{comment}{//      padding = 5}}
\DoxyCodeLine{955 \textcolor{comment}{//      onedge\_value = 180}}
\DoxyCodeLine{956 \textcolor{comment}{//      pixel\_dist\_scale = 180/5.0 = 36.0}}
\DoxyCodeLine{957 \textcolor{comment}{//}}
\DoxyCodeLine{958 \textcolor{comment}{//      This will create an SDF bitmap in which the character is about 22 pixels}}
\DoxyCodeLine{959 \textcolor{comment}{//      high but the whole bitmap is about 22+5+5=32 pixels high. To produce a filled}}
\DoxyCodeLine{960 \textcolor{comment}{//      shape, sample the SDF at each pixel and fill the pixel if the SDF value}}
\DoxyCodeLine{961 \textcolor{comment}{//      is greater than or equal to 180/255. (You'll actually want to antialias,}}
\DoxyCodeLine{962 \textcolor{comment}{//      which is beyond the scope of this example.) Additionally, you can compute}}
\DoxyCodeLine{963 \textcolor{comment}{//      offset outlines (e.g. to stroke the character border inside \& outside,}}
\DoxyCodeLine{964 \textcolor{comment}{//      or only outside). For example, to fill outside the character up to 3 SDF}}
\DoxyCodeLine{965 \textcolor{comment}{//      pixels, you would compare against (180-\/36.0*3)/255 = 72/255. The above}}
\DoxyCodeLine{966 \textcolor{comment}{//      choice of variables maps a range from 5 pixels outside the shape to}}
\DoxyCodeLine{967 \textcolor{comment}{//      2 pixels inside the shape to 0..255; this is intended primarily for apply}}
\DoxyCodeLine{968 \textcolor{comment}{//      outside effects only (the interior range is needed to allow proper}}
\DoxyCodeLine{969 \textcolor{comment}{//      antialiasing of the font at *smaller* sizes)}}
\DoxyCodeLine{970 \textcolor{comment}{//}}
\DoxyCodeLine{971 \textcolor{comment}{// The function computes the SDF analytically at each SDF pixel, not by e.g.}}
\DoxyCodeLine{972 \textcolor{comment}{// building a higher-\/res bitmap and approximating it. In theory the quality}}
\DoxyCodeLine{973 \textcolor{comment}{// should be as high as possible for an SDF of this size \& representation, but}}
\DoxyCodeLine{974 \textcolor{comment}{// unclear if this is true in practice (perhaps building a higher-\/res bitmap}}
\DoxyCodeLine{975 \textcolor{comment}{// and computing from that can allow drop-\/out prevention).}}
\DoxyCodeLine{976 \textcolor{comment}{//}}
\DoxyCodeLine{977 \textcolor{comment}{// The algorithm has not been optimized at all, so expect it to be slow}}
\DoxyCodeLine{978 \textcolor{comment}{// if computing lots of characters or very large sizes. }}
\DoxyCodeLine{979 }
\DoxyCodeLine{980 }
\DoxyCodeLine{981 }
\DoxyCodeLine{983 \textcolor{comment}{//}}
\DoxyCodeLine{984 \textcolor{comment}{// Finding the right font...}}
\DoxyCodeLine{985 \textcolor{comment}{//}}
\DoxyCodeLine{986 \textcolor{comment}{// You should really just solve this offline, keep your own tables}}
\DoxyCodeLine{987 \textcolor{comment}{// of what font is what, and don't try to get it out of the .ttf file.}}
\DoxyCodeLine{988 \textcolor{comment}{// That's because getting it out of the .ttf file is really hard, because}}
\DoxyCodeLine{989 \textcolor{comment}{// the names in the file can appear in many possible encodings, in many}}
\DoxyCodeLine{990 \textcolor{comment}{// possible languages, and e.g. if you need a case-\/insensitive comparison,}}
\DoxyCodeLine{991 \textcolor{comment}{// the details of that depend on the encoding \& language in a complex way}}
\DoxyCodeLine{992 \textcolor{comment}{// (actually underspecified in truetype, but also gigantic).}}
\DoxyCodeLine{993 \textcolor{comment}{//}}
\DoxyCodeLine{994 \textcolor{comment}{// But you can use the provided functions in two possible ways:}}
\DoxyCodeLine{995 \textcolor{comment}{//     stbtt\_FindMatchingFont() will use *case-\/sensitive* comparisons on}}
\DoxyCodeLine{996 \textcolor{comment}{//             unicode-\/encoded names to try to find the font you want;}}
\DoxyCodeLine{997 \textcolor{comment}{//             you can run this before calling stbtt\_InitFont()}}
\DoxyCodeLine{998 \textcolor{comment}{//}}
\DoxyCodeLine{999 \textcolor{comment}{//     stbtt\_GetFontNameString() lets you get any of the various strings}}
\DoxyCodeLine{1000 \textcolor{comment}{//             from the file yourself and do your own comparisons on them.}}
\DoxyCodeLine{1001 \textcolor{comment}{//             You have to have called stbtt\_InitFont() first.}}
\DoxyCodeLine{1002 }
\DoxyCodeLine{1003 }
\DoxyCodeLine{1004 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_FindMatchingFont(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *fontdata, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *name, \textcolor{keywordtype}{int} flags);}
\DoxyCodeLine{1005 \textcolor{comment}{// returns the offset (not index) of the font that matches, or -\/1 if none}}
\DoxyCodeLine{1006 \textcolor{comment}{//   if you use STBTT\_MACSTYLE\_DONTCARE, use a font name like "{}Arial Bold"{}.}}
\DoxyCodeLine{1007 \textcolor{comment}{//   if you use any other flag, use a font name like "{}Arial"{}; this checks}}
\DoxyCodeLine{1008 \textcolor{comment}{//     the 'macStyle' header field; i don't know if fonts set this consistently}}
\DoxyCodeLine{1009 \textcolor{preprocessor}{\#define STBTT\_MACSTYLE\_DONTCARE     0}}
\DoxyCodeLine{1010 \textcolor{preprocessor}{\#define STBTT\_MACSTYLE\_BOLD         1}}
\DoxyCodeLine{1011 \textcolor{preprocessor}{\#define STBTT\_MACSTYLE\_ITALIC       2}}
\DoxyCodeLine{1012 \textcolor{preprocessor}{\#define STBTT\_MACSTYLE\_UNDERSCORE   4}}
\DoxyCodeLine{1013 \textcolor{preprocessor}{\#define STBTT\_MACSTYLE\_NONE         8   }\textcolor{comment}{// <= not same as 0, this makes us check the bitfield is 0}}
\DoxyCodeLine{1014 }
\DoxyCodeLine{1015 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_CompareUTF8toUTF16\_bigendian(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *s1, \textcolor{keywordtype}{int} len1, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *s2, \textcolor{keywordtype}{int} len2);}
\DoxyCodeLine{1016 \textcolor{comment}{// returns 1/0 whether the first string interpreted as utf8 is identical to}}
\DoxyCodeLine{1017 \textcolor{comment}{// the second string interpreted as big-\/endian utf16... useful for strings from next func}}
\DoxyCodeLine{1018 }
\DoxyCodeLine{1019 STBTT\_DEF \textcolor{keyword}{const} \textcolor{keywordtype}{char} *stbtt\_GetFontNameString(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *font, \textcolor{keywordtype}{int} *length, \textcolor{keywordtype}{int} platformID, \textcolor{keywordtype}{int} encodingID, \textcolor{keywordtype}{int} languageID, \textcolor{keywordtype}{int} nameID);}
\DoxyCodeLine{1020 \textcolor{comment}{// returns the string (which may be big-\/endian double byte, e.g. for unicode)}}
\DoxyCodeLine{1021 \textcolor{comment}{// and puts the length in bytes in *length.}}
\DoxyCodeLine{1022 \textcolor{comment}{//}}
\DoxyCodeLine{1023 \textcolor{comment}{// some of the values for the IDs are below; for more see the truetype spec:}}
\DoxyCodeLine{1024 \textcolor{comment}{//     http://developer.apple.com/textfonts/TTRefMan/RM06/Chap6name.html}}
\DoxyCodeLine{1025 \textcolor{comment}{//     http://www.microsoft.com/typography/otspec/name.htm}}
\DoxyCodeLine{1026 }
\DoxyCodeLine{1027 \textcolor{keyword}{enum} \{ \textcolor{comment}{// platformID}}
\DoxyCodeLine{1028    STBTT\_PLATFORM\_ID\_UNICODE   =0,}
\DoxyCodeLine{1029    STBTT\_PLATFORM\_ID\_MAC       =1,}
\DoxyCodeLine{1030    STBTT\_PLATFORM\_ID\_ISO       =2,}
\DoxyCodeLine{1031    STBTT\_PLATFORM\_ID\_MICROSOFT =3}
\DoxyCodeLine{1032 \};}
\DoxyCodeLine{1033 }
\DoxyCodeLine{1034 \textcolor{keyword}{enum} \{ \textcolor{comment}{// encodingID for STBTT\_PLATFORM\_ID\_UNICODE}}
\DoxyCodeLine{1035    STBTT\_UNICODE\_EID\_UNICODE\_1\_0    =0,}
\DoxyCodeLine{1036    STBTT\_UNICODE\_EID\_UNICODE\_1\_1    =1,}
\DoxyCodeLine{1037    STBTT\_UNICODE\_EID\_ISO\_10646      =2,}
\DoxyCodeLine{1038    STBTT\_UNICODE\_EID\_UNICODE\_2\_0\_BMP=3,}
\DoxyCodeLine{1039    STBTT\_UNICODE\_EID\_UNICODE\_2\_0\_FULL=4}
\DoxyCodeLine{1040 \};}
\DoxyCodeLine{1041 }
\DoxyCodeLine{1042 \textcolor{keyword}{enum} \{ \textcolor{comment}{// encodingID for STBTT\_PLATFORM\_ID\_MICROSOFT}}
\DoxyCodeLine{1043    STBTT\_MS\_EID\_SYMBOL        =0,}
\DoxyCodeLine{1044    STBTT\_MS\_EID\_UNICODE\_BMP   =1,}
\DoxyCodeLine{1045    STBTT\_MS\_EID\_SHIFTJIS      =2,}
\DoxyCodeLine{1046    STBTT\_MS\_EID\_UNICODE\_FULL  =10}
\DoxyCodeLine{1047 \};}
\DoxyCodeLine{1048 }
\DoxyCodeLine{1049 \textcolor{keyword}{enum} \{ \textcolor{comment}{// encodingID for STBTT\_PLATFORM\_ID\_MAC; same as Script Manager codes}}
\DoxyCodeLine{1050    STBTT\_MAC\_EID\_ROMAN        =0,   STBTT\_MAC\_EID\_ARABIC       =4,}
\DoxyCodeLine{1051    STBTT\_MAC\_EID\_JAPANESE     =1,   STBTT\_MAC\_EID\_HEBREW       =5,}
\DoxyCodeLine{1052    STBTT\_MAC\_EID\_CHINESE\_TRAD =2,   STBTT\_MAC\_EID\_GREEK        =6,}
\DoxyCodeLine{1053    STBTT\_MAC\_EID\_KOREAN       =3,   STBTT\_MAC\_EID\_RUSSIAN      =7}
\DoxyCodeLine{1054 \};}
\DoxyCodeLine{1055 }
\DoxyCodeLine{1056 \textcolor{keyword}{enum} \{ \textcolor{comment}{// languageID for STBTT\_PLATFORM\_ID\_MICROSOFT; same as LCID...}}
\DoxyCodeLine{1057        \textcolor{comment}{// problematic because there are e.g. 16 english LCIDs and 16 arabic LCIDs}}
\DoxyCodeLine{1058    STBTT\_MS\_LANG\_ENGLISH     =0x0409,   STBTT\_MS\_LANG\_ITALIAN     =0x0410,}
\DoxyCodeLine{1059    STBTT\_MS\_LANG\_CHINESE     =0x0804,   STBTT\_MS\_LANG\_JAPANESE    =0x0411,}
\DoxyCodeLine{1060    STBTT\_MS\_LANG\_DUTCH       =0x0413,   STBTT\_MS\_LANG\_KOREAN      =0x0412,}
\DoxyCodeLine{1061    STBTT\_MS\_LANG\_FRENCH      =0x040c,   STBTT\_MS\_LANG\_RUSSIAN     =0x0419,}
\DoxyCodeLine{1062    STBTT\_MS\_LANG\_GERMAN      =0x0407,   STBTT\_MS\_LANG\_SPANISH     =0x0409,}
\DoxyCodeLine{1063    STBTT\_MS\_LANG\_HEBREW      =0x040d,   STBTT\_MS\_LANG\_SWEDISH     =0x041D}
\DoxyCodeLine{1064 \};}
\DoxyCodeLine{1065 }
\DoxyCodeLine{1066 \textcolor{keyword}{enum} \{ \textcolor{comment}{// languageID for STBTT\_PLATFORM\_ID\_MAC}}
\DoxyCodeLine{1067    STBTT\_MAC\_LANG\_ENGLISH      =0 ,   STBTT\_MAC\_LANG\_JAPANESE     =11,}
\DoxyCodeLine{1068    STBTT\_MAC\_LANG\_ARABIC       =12,   STBTT\_MAC\_LANG\_KOREAN       =23,}
\DoxyCodeLine{1069    STBTT\_MAC\_LANG\_DUTCH        =4 ,   STBTT\_MAC\_LANG\_RUSSIAN      =32,}
\DoxyCodeLine{1070    STBTT\_MAC\_LANG\_FRENCH       =1 ,   STBTT\_MAC\_LANG\_SPANISH      =6 ,}
\DoxyCodeLine{1071    STBTT\_MAC\_LANG\_GERMAN       =2 ,   STBTT\_MAC\_LANG\_SWEDISH      =5 ,}
\DoxyCodeLine{1072    STBTT\_MAC\_LANG\_HEBREW       =10,   STBTT\_MAC\_LANG\_CHINESE\_SIMPLIFIED =33,}
\DoxyCodeLine{1073    STBTT\_MAC\_LANG\_ITALIAN      =3 ,   STBTT\_MAC\_LANG\_CHINESE\_TRAD =19}
\DoxyCodeLine{1074 \};}
\DoxyCodeLine{1075 }
\DoxyCodeLine{1076 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{1077 \}}
\DoxyCodeLine{1078 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1079 }
\DoxyCodeLine{1080 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// \_\_STB\_INCLUDE\_STB\_TRUETYPE\_H\_\_}}
\DoxyCodeLine{1081 }
\DoxyCodeLine{1088 }
\DoxyCodeLine{1089 \textcolor{preprocessor}{\#ifdef STB\_TRUETYPE\_IMPLEMENTATION}}
\DoxyCodeLine{1090 }
\DoxyCodeLine{1091 \textcolor{preprocessor}{\#ifndef STBTT\_MAX\_OVERSAMPLE}}
\DoxyCodeLine{1092 \textcolor{preprocessor}{\#define STBTT\_MAX\_OVERSAMPLE   8}}
\DoxyCodeLine{1093 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1094 }
\DoxyCodeLine{1095 \textcolor{preprocessor}{\#if STBTT\_MAX\_OVERSAMPLE > 255}}
\DoxyCodeLine{1096 \textcolor{preprocessor}{\#error "{}STBTT\_MAX\_OVERSAMPLE cannot be > 255"{}}}
\DoxyCodeLine{1097 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1098 }
\DoxyCodeLine{1099 \textcolor{keyword}{typedef} \textcolor{keywordtype}{int} stbtt\_\_test\_oversample\_pow2[(STBTT\_MAX\_OVERSAMPLE \& (STBTT\_MAX\_OVERSAMPLE-\/1)) == 0 ? 1 : -\/1];}
\DoxyCodeLine{1100 }
\DoxyCodeLine{1101 \textcolor{preprocessor}{\#ifndef STBTT\_RASTERIZER\_VERSION}}
\DoxyCodeLine{1102 \textcolor{preprocessor}{\#define STBTT\_RASTERIZER\_VERSION 2}}
\DoxyCodeLine{1103 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1104 }
\DoxyCodeLine{1105 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{1106 \textcolor{preprocessor}{\#define STBTT\_\_NOTUSED(v)  (void)(v)}}
\DoxyCodeLine{1107 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{1108 \textcolor{preprocessor}{\#define STBTT\_\_NOTUSED(v)  (void)sizeof(v)}}
\DoxyCodeLine{1109 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{1110 }
\DoxyCodeLine{1112 \textcolor{comment}{//}}
\DoxyCodeLine{1113 \textcolor{comment}{// stbtt\_\_buf helpers to parse data from file}}
\DoxyCodeLine{1114 \textcolor{comment}{//}}
\DoxyCodeLine{1115 }
\DoxyCodeLine{1116 \textcolor{keyword}{static} stbtt\_uint8 stbtt\_\_buf\_get8(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} *b)}
\DoxyCodeLine{1117 \{}
\DoxyCodeLine{1118    \textcolor{keywordflow}{if} (b-\/>cursor >= b-\/>size)}
\DoxyCodeLine{1119       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1120    \textcolor{keywordflow}{return} b-\/>data[b-\/>cursor++];}
\DoxyCodeLine{1121 \}}
\DoxyCodeLine{1122 }
\DoxyCodeLine{1123 \textcolor{keyword}{static} stbtt\_uint8 stbtt\_\_buf\_peek8(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} *b)}
\DoxyCodeLine{1124 \{}
\DoxyCodeLine{1125    \textcolor{keywordflow}{if} (b-\/>cursor >= b-\/>size)}
\DoxyCodeLine{1126       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1127    \textcolor{keywordflow}{return} b-\/>data[b-\/>cursor];}
\DoxyCodeLine{1128 \}}
\DoxyCodeLine{1129 }
\DoxyCodeLine{1130 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_buf\_seek(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} *b, \textcolor{keywordtype}{int} o)}
\DoxyCodeLine{1131 \{}
\DoxyCodeLine{1132    STBTT\_assert(!(o > b-\/>size || o < 0));}
\DoxyCodeLine{1133    b-\/>cursor = (o > b-\/>size || o < 0) ? b-\/>size : o;}
\DoxyCodeLine{1134 \}}
\DoxyCodeLine{1135 }
\DoxyCodeLine{1136 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_buf\_skip(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} *b, \textcolor{keywordtype}{int} o)}
\DoxyCodeLine{1137 \{}
\DoxyCodeLine{1138    stbtt\_\_buf\_seek(b, b-\/>cursor + o);}
\DoxyCodeLine{1139 \}}
\DoxyCodeLine{1140 }
\DoxyCodeLine{1141 \textcolor{keyword}{static} stbtt\_uint32 stbtt\_\_buf\_get(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} *b, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{1142 \{}
\DoxyCodeLine{1143    stbtt\_uint32 v = 0;}
\DoxyCodeLine{1144    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{1145    STBTT\_assert(n >= 1 \&\& n <= 4);}
\DoxyCodeLine{1146    \textcolor{keywordflow}{for} (i = 0; i < n; i++)}
\DoxyCodeLine{1147       v = (v << 8) | stbtt\_\_buf\_get8(b);}
\DoxyCodeLine{1148    \textcolor{keywordflow}{return} v;}
\DoxyCodeLine{1149 \}}
\DoxyCodeLine{1150 }
\DoxyCodeLine{1151 \textcolor{keyword}{static} \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} stbtt\_\_new\_buf(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} size)}
\DoxyCodeLine{1152 \{}
\DoxyCodeLine{1153    \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} r;}
\DoxyCodeLine{1154    STBTT\_assert(size < 0x40000000);}
\DoxyCodeLine{1155    r.data = (stbtt\_uint8*) p;}
\DoxyCodeLine{1156    r.size = (int) size;}
\DoxyCodeLine{1157    r.cursor = 0;}
\DoxyCodeLine{1158    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{1159 \}}
\DoxyCodeLine{1160 }
\DoxyCodeLine{1161 \textcolor{preprocessor}{\#define stbtt\_\_buf\_get16(b)  stbtt\_\_buf\_get((b), 2)}}
\DoxyCodeLine{1162 \textcolor{preprocessor}{\#define stbtt\_\_buf\_get32(b)  stbtt\_\_buf\_get((b), 4)}}
\DoxyCodeLine{1163 }
\DoxyCodeLine{1164 \textcolor{keyword}{static} \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} stbtt\_\_buf\_range(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} *b, \textcolor{keywordtype}{int} o, \textcolor{keywordtype}{int} s)}
\DoxyCodeLine{1165 \{}
\DoxyCodeLine{1166    \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} r = stbtt\_\_new\_buf(NULL, 0);}
\DoxyCodeLine{1167    \textcolor{keywordflow}{if} (o < 0 || s < 0 || o > b-\/>size || s > b-\/>size -\/ o) \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{1168    r.data = b-\/>data + o;}
\DoxyCodeLine{1169    r.size = s;}
\DoxyCodeLine{1170    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{1171 \}}
\DoxyCodeLine{1172 }
\DoxyCodeLine{1173 \textcolor{keyword}{static} \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} stbtt\_\_cff\_get\_index(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} *b)}
\DoxyCodeLine{1174 \{}
\DoxyCodeLine{1175    \textcolor{keywordtype}{int} count, start, offsize;}
\DoxyCodeLine{1176    start = b-\/>cursor;}
\DoxyCodeLine{1177    count = stbtt\_\_buf\_get16(b);}
\DoxyCodeLine{1178    \textcolor{keywordflow}{if} (count) \{}
\DoxyCodeLine{1179       offsize = stbtt\_\_buf\_get8(b);}
\DoxyCodeLine{1180       STBTT\_assert(offsize >= 1 \&\& offsize <= 4);}
\DoxyCodeLine{1181       stbtt\_\_buf\_skip(b, offsize * count);}
\DoxyCodeLine{1182       stbtt\_\_buf\_skip(b, stbtt\_\_buf\_get(b, offsize) -\/ 1);}
\DoxyCodeLine{1183    \}}
\DoxyCodeLine{1184    \textcolor{keywordflow}{return} stbtt\_\_buf\_range(b, start, b-\/>cursor -\/ start);}
\DoxyCodeLine{1185 \}}
\DoxyCodeLine{1186 }
\DoxyCodeLine{1187 \textcolor{keyword}{static} stbtt\_uint32 stbtt\_\_cff\_int(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} *b)}
\DoxyCodeLine{1188 \{}
\DoxyCodeLine{1189    \textcolor{keywordtype}{int} b0 = stbtt\_\_buf\_get8(b);}
\DoxyCodeLine{1190    \textcolor{keywordflow}{if} (b0 >= 32 \&\& b0 <= 246)       \textcolor{keywordflow}{return} b0 -\/ 139;}
\DoxyCodeLine{1191    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (b0 >= 247 \&\& b0 <= 250) \textcolor{keywordflow}{return} (b0 -\/ 247)*256 + stbtt\_\_buf\_get8(b) + 108;}
\DoxyCodeLine{1192    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (b0 >= 251 \&\& b0 <= 254) \textcolor{keywordflow}{return} -\/(b0 -\/ 251)*256 -\/ stbtt\_\_buf\_get8(b) -\/ 108;}
\DoxyCodeLine{1193    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (b0 == 28)               \textcolor{keywordflow}{return} stbtt\_\_buf\_get16(b);}
\DoxyCodeLine{1194    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (b0 == 29)               \textcolor{keywordflow}{return} stbtt\_\_buf\_get32(b);}
\DoxyCodeLine{1195    STBTT\_assert(0);}
\DoxyCodeLine{1196    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1197 \}}
\DoxyCodeLine{1198 }
\DoxyCodeLine{1199 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_cff\_skip\_operand(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} *b) \{}
\DoxyCodeLine{1200    \textcolor{keywordtype}{int} v, b0 = stbtt\_\_buf\_peek8(b);}
\DoxyCodeLine{1201    STBTT\_assert(b0 >= 28);}
\DoxyCodeLine{1202    \textcolor{keywordflow}{if} (b0 == 30) \{}
\DoxyCodeLine{1203       stbtt\_\_buf\_skip(b, 1);}
\DoxyCodeLine{1204       \textcolor{keywordflow}{while} (b-\/>cursor < b-\/>size) \{}
\DoxyCodeLine{1205          v = stbtt\_\_buf\_get8(b);}
\DoxyCodeLine{1206          \textcolor{keywordflow}{if} ((v \& 0xF) == 0xF || (v >> 4) == 0xF)}
\DoxyCodeLine{1207             \textcolor{keywordflow}{break};}
\DoxyCodeLine{1208       \}}
\DoxyCodeLine{1209    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1210       stbtt\_\_cff\_int(b);}
\DoxyCodeLine{1211    \}}
\DoxyCodeLine{1212 \}}
\DoxyCodeLine{1213 }
\DoxyCodeLine{1214 \textcolor{keyword}{static} \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} stbtt\_\_dict\_get(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} *b, \textcolor{keywordtype}{int} key)}
\DoxyCodeLine{1215 \{}
\DoxyCodeLine{1216    stbtt\_\_buf\_seek(b, 0);}
\DoxyCodeLine{1217    \textcolor{keywordflow}{while} (b-\/>cursor < b-\/>size) \{}
\DoxyCodeLine{1218       \textcolor{keywordtype}{int} start = b-\/>cursor, end, op;}
\DoxyCodeLine{1219       \textcolor{keywordflow}{while} (stbtt\_\_buf\_peek8(b) >= 28)}
\DoxyCodeLine{1220          stbtt\_\_cff\_skip\_operand(b);}
\DoxyCodeLine{1221       end = b-\/>cursor;}
\DoxyCodeLine{1222       op = stbtt\_\_buf\_get8(b);}
\DoxyCodeLine{1223       \textcolor{keywordflow}{if} (op == 12)  op = stbtt\_\_buf\_get8(b) | 0x100;}
\DoxyCodeLine{1224       \textcolor{keywordflow}{if} (op == key) \textcolor{keywordflow}{return} stbtt\_\_buf\_range(b, start, end-\/start);}
\DoxyCodeLine{1225    \}}
\DoxyCodeLine{1226    \textcolor{keywordflow}{return} stbtt\_\_buf\_range(b, 0, 0);}
\DoxyCodeLine{1227 \}}
\DoxyCodeLine{1228 }
\DoxyCodeLine{1229 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_dict\_get\_ints(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} *b, \textcolor{keywordtype}{int} key, \textcolor{keywordtype}{int} outcount, stbtt\_uint32 *out)}
\DoxyCodeLine{1230 \{}
\DoxyCodeLine{1231    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{1232    \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} operands = stbtt\_\_dict\_get(b, key);}
\DoxyCodeLine{1233    \textcolor{keywordflow}{for} (i = 0; i < outcount \&\& operands.cursor < operands.size; i++)}
\DoxyCodeLine{1234       out[i] = stbtt\_\_cff\_int(\&operands);}
\DoxyCodeLine{1235 \}}
\DoxyCodeLine{1236 }
\DoxyCodeLine{1237 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_cff\_index\_count(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} *b)}
\DoxyCodeLine{1238 \{}
\DoxyCodeLine{1239    stbtt\_\_buf\_seek(b, 0);}
\DoxyCodeLine{1240    \textcolor{keywordflow}{return} stbtt\_\_buf\_get16(b);}
\DoxyCodeLine{1241 \}}
\DoxyCodeLine{1242 }
\DoxyCodeLine{1243 \textcolor{keyword}{static} \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} stbtt\_\_cff\_index\_get(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} b, \textcolor{keywordtype}{int} i)}
\DoxyCodeLine{1244 \{}
\DoxyCodeLine{1245    \textcolor{keywordtype}{int} count, offsize, start, end;}
\DoxyCodeLine{1246    stbtt\_\_buf\_seek(\&b, 0);}
\DoxyCodeLine{1247    count = stbtt\_\_buf\_get16(\&b);}
\DoxyCodeLine{1248    offsize = stbtt\_\_buf\_get8(\&b);}
\DoxyCodeLine{1249    STBTT\_assert(i >= 0 \&\& i < count);}
\DoxyCodeLine{1250    STBTT\_assert(offsize >= 1 \&\& offsize <= 4);}
\DoxyCodeLine{1251    stbtt\_\_buf\_skip(\&b, i*offsize);}
\DoxyCodeLine{1252    start = stbtt\_\_buf\_get(\&b, offsize);}
\DoxyCodeLine{1253    end = stbtt\_\_buf\_get(\&b, offsize);}
\DoxyCodeLine{1254    \textcolor{keywordflow}{return} stbtt\_\_buf\_range(\&b, 2+(count+1)*offsize+start, end -\/ start);}
\DoxyCodeLine{1255 \}}
\DoxyCodeLine{1256 }
\DoxyCodeLine{1258 \textcolor{comment}{//}}
\DoxyCodeLine{1259 \textcolor{comment}{// accessors to parse data from file}}
\DoxyCodeLine{1260 \textcolor{comment}{//}}
\DoxyCodeLine{1261 }
\DoxyCodeLine{1262 \textcolor{comment}{// on platforms that don't allow misaligned reads, if we want to allow}}
\DoxyCodeLine{1263 \textcolor{comment}{// truetype fonts that aren't padded to alignment, define ALLOW\_UNALIGNED\_TRUETYPE}}
\DoxyCodeLine{1264 }
\DoxyCodeLine{1265 \textcolor{preprocessor}{\#define ttBYTE(p)     (* (stbtt\_uint8 *) (p))}}
\DoxyCodeLine{1266 \textcolor{preprocessor}{\#define ttCHAR(p)     (* (stbtt\_int8 *) (p))}}
\DoxyCodeLine{1267 \textcolor{preprocessor}{\#define ttFixed(p)    ttLONG(p)}}
\DoxyCodeLine{1268 }
\DoxyCodeLine{1269 \textcolor{keyword}{static} stbtt\_uint16 ttUSHORT(stbtt\_uint8 *p) \{ \textcolor{keywordflow}{return} p[0]*256 + p[1]; \}}
\DoxyCodeLine{1270 \textcolor{keyword}{static} stbtt\_int16 ttSHORT(stbtt\_uint8 *p)   \{ \textcolor{keywordflow}{return} p[0]*256 + p[1]; \}}
\DoxyCodeLine{1271 \textcolor{keyword}{static} stbtt\_uint32 ttULONG(stbtt\_uint8 *p)  \{ \textcolor{keywordflow}{return} (p[0]<<24) + (p[1]<<16) + (p[2]<<8) + p[3]; \}}
\DoxyCodeLine{1272 \textcolor{keyword}{static} stbtt\_int32 ttLONG(stbtt\_uint8 *p)    \{ \textcolor{keywordflow}{return} (p[0]<<24) + (p[1]<<16) + (p[2]<<8) + p[3]; \}}
\DoxyCodeLine{1273 }
\DoxyCodeLine{1274 \textcolor{preprocessor}{\#define stbtt\_tag4(p,c0,c1,c2,c3) ((p)[0] == (c0) \&\& (p)[1] == (c1) \&\& (p)[2] == (c2) \&\& (p)[3] == (c3))}}
\DoxyCodeLine{1275 \textcolor{preprocessor}{\#define stbtt\_tag(p,str)           stbtt\_tag4(p,str[0],str[1],str[2],str[3])}}
\DoxyCodeLine{1276 }
\DoxyCodeLine{1277 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_isfont(stbtt\_uint8 *font)}
\DoxyCodeLine{1278 \{}
\DoxyCodeLine{1279    \textcolor{comment}{// check the version number}}
\DoxyCodeLine{1280    \textcolor{keywordflow}{if} (stbtt\_tag4(font, \textcolor{charliteral}{'1'},0,0,0))  \textcolor{keywordflow}{return} 1; \textcolor{comment}{// TrueType 1}}
\DoxyCodeLine{1281    \textcolor{keywordflow}{if} (stbtt\_tag(font, \textcolor{stringliteral}{"{}typ1"{}}))   \textcolor{keywordflow}{return} 1; \textcolor{comment}{// TrueType with type 1 font -\/-\/ we don't support this!}}
\DoxyCodeLine{1282    \textcolor{keywordflow}{if} (stbtt\_tag(font, \textcolor{stringliteral}{"{}OTTO"{}}))   \textcolor{keywordflow}{return} 1; \textcolor{comment}{// OpenType with CFF}}
\DoxyCodeLine{1283    \textcolor{keywordflow}{if} (stbtt\_tag4(font, 0,1,0,0)) \textcolor{keywordflow}{return} 1; \textcolor{comment}{// OpenType 1.0}}
\DoxyCodeLine{1284    \textcolor{keywordflow}{if} (stbtt\_tag(font, \textcolor{stringliteral}{"{}true"{}}))   \textcolor{keywordflow}{return} 1; \textcolor{comment}{// Apple specification for TrueType fonts}}
\DoxyCodeLine{1285    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1286 \}}
\DoxyCodeLine{1287 }
\DoxyCodeLine{1288 \textcolor{comment}{// @OPTIMIZE: binary search}}
\DoxyCodeLine{1289 \textcolor{keyword}{static} stbtt\_uint32 stbtt\_\_find\_table(stbtt\_uint8 *data, stbtt\_uint32 fontstart, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *tag)}
\DoxyCodeLine{1290 \{}
\DoxyCodeLine{1291    stbtt\_int32 num\_tables = ttUSHORT(data+fontstart+4);}
\DoxyCodeLine{1292    stbtt\_uint32 tabledir = fontstart + 12;}
\DoxyCodeLine{1293    stbtt\_int32 i;}
\DoxyCodeLine{1294    \textcolor{keywordflow}{for} (i=0; i < num\_tables; ++i) \{}
\DoxyCodeLine{1295       stbtt\_uint32 loc = tabledir + 16*i;}
\DoxyCodeLine{1296       \textcolor{keywordflow}{if} (stbtt\_tag(data+loc+0, tag))}
\DoxyCodeLine{1297          \textcolor{keywordflow}{return} ttULONG(data+loc+8);}
\DoxyCodeLine{1298    \}}
\DoxyCodeLine{1299    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1300 \}}
\DoxyCodeLine{1301 }
\DoxyCodeLine{1302 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_GetFontOffsetForIndex\_internal(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *font\_collection, \textcolor{keywordtype}{int} index)}
\DoxyCodeLine{1303 \{}
\DoxyCodeLine{1304    \textcolor{comment}{// if it's just a font, there's only one valid index}}
\DoxyCodeLine{1305    \textcolor{keywordflow}{if} (stbtt\_\_isfont(font\_collection))}
\DoxyCodeLine{1306       \textcolor{keywordflow}{return} index == 0 ? 0 : -\/1;}
\DoxyCodeLine{1307 }
\DoxyCodeLine{1308    \textcolor{comment}{// check if it's a TTC}}
\DoxyCodeLine{1309    \textcolor{keywordflow}{if} (stbtt\_tag(font\_collection, \textcolor{stringliteral}{"{}ttcf"{}})) \{}
\DoxyCodeLine{1310       \textcolor{comment}{// version 1?}}
\DoxyCodeLine{1311       \textcolor{keywordflow}{if} (ttULONG(font\_collection+4) == 0x00010000 || ttULONG(font\_collection+4) == 0x00020000) \{}
\DoxyCodeLine{1312          stbtt\_int32 n = ttLONG(font\_collection+8);}
\DoxyCodeLine{1313          \textcolor{keywordflow}{if} (index >= n)}
\DoxyCodeLine{1314             \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{1315          \textcolor{keywordflow}{return} ttULONG(font\_collection+12+index*4);}
\DoxyCodeLine{1316       \}}
\DoxyCodeLine{1317    \}}
\DoxyCodeLine{1318    \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{1319 \}}
\DoxyCodeLine{1320 }
\DoxyCodeLine{1321 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_GetNumberOfFonts\_internal(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *font\_collection)}
\DoxyCodeLine{1322 \{}
\DoxyCodeLine{1323    \textcolor{comment}{// if it's just a font, there's only one valid font}}
\DoxyCodeLine{1324    \textcolor{keywordflow}{if} (stbtt\_\_isfont(font\_collection))}
\DoxyCodeLine{1325       \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1326 }
\DoxyCodeLine{1327    \textcolor{comment}{// check if it's a TTC}}
\DoxyCodeLine{1328    \textcolor{keywordflow}{if} (stbtt\_tag(font\_collection, \textcolor{stringliteral}{"{}ttcf"{}})) \{}
\DoxyCodeLine{1329       \textcolor{comment}{// version 1?}}
\DoxyCodeLine{1330       \textcolor{keywordflow}{if} (ttULONG(font\_collection+4) == 0x00010000 || ttULONG(font\_collection+4) == 0x00020000) \{}
\DoxyCodeLine{1331          \textcolor{keywordflow}{return} ttLONG(font\_collection+8);}
\DoxyCodeLine{1332       \}}
\DoxyCodeLine{1333    \}}
\DoxyCodeLine{1334    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1335 \}}
\DoxyCodeLine{1336 }
\DoxyCodeLine{1337 \textcolor{keyword}{static} \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} stbtt\_\_get\_subrs(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} cff, \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} fontdict)}
\DoxyCodeLine{1338 \{}
\DoxyCodeLine{1339    stbtt\_uint32 subrsoff = 0, private\_loc[2] = \{ 0, 0 \};}
\DoxyCodeLine{1340    \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} pdict;}
\DoxyCodeLine{1341    stbtt\_\_dict\_get\_ints(\&fontdict, 18, 2, private\_loc);}
\DoxyCodeLine{1342    \textcolor{keywordflow}{if} (!private\_loc[1] || !private\_loc[0]) \textcolor{keywordflow}{return} stbtt\_\_new\_buf(NULL, 0);}
\DoxyCodeLine{1343    pdict = stbtt\_\_buf\_range(\&cff, private\_loc[1], private\_loc[0]);}
\DoxyCodeLine{1344    stbtt\_\_dict\_get\_ints(\&pdict, 19, 1, \&subrsoff);}
\DoxyCodeLine{1345    \textcolor{keywordflow}{if} (!subrsoff) \textcolor{keywordflow}{return} stbtt\_\_new\_buf(NULL, 0);}
\DoxyCodeLine{1346    stbtt\_\_buf\_seek(\&cff, private\_loc[1]+subrsoff);}
\DoxyCodeLine{1347    \textcolor{keywordflow}{return} stbtt\_\_cff\_get\_index(\&cff);}
\DoxyCodeLine{1348 \}}
\DoxyCodeLine{1349 }
\DoxyCodeLine{1350 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_InitFont\_internal(\mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} fontstart)}
\DoxyCodeLine{1351 \{}
\DoxyCodeLine{1352    stbtt\_uint32 cmap, t;}
\DoxyCodeLine{1353    stbtt\_int32 i,numTables;}
\DoxyCodeLine{1354 }
\DoxyCodeLine{1355    info-\/>data = data;}
\DoxyCodeLine{1356    info-\/>fontstart = fontstart;}
\DoxyCodeLine{1357    info-\/>cff = stbtt\_\_new\_buf(NULL, 0);}
\DoxyCodeLine{1358 }
\DoxyCodeLine{1359    cmap = stbtt\_\_find\_table(data, fontstart, \textcolor{stringliteral}{"{}cmap"{}});       \textcolor{comment}{// required}}
\DoxyCodeLine{1360    info-\/>loca = stbtt\_\_find\_table(data, fontstart, \textcolor{stringliteral}{"{}loca"{}}); \textcolor{comment}{// required}}
\DoxyCodeLine{1361    info-\/>head = stbtt\_\_find\_table(data, fontstart, \textcolor{stringliteral}{"{}head"{}}); \textcolor{comment}{// required}}
\DoxyCodeLine{1362    info-\/>glyf = stbtt\_\_find\_table(data, fontstart, \textcolor{stringliteral}{"{}glyf"{}}); \textcolor{comment}{// required}}
\DoxyCodeLine{1363    info-\/>hhea = stbtt\_\_find\_table(data, fontstart, \textcolor{stringliteral}{"{}hhea"{}}); \textcolor{comment}{// required}}
\DoxyCodeLine{1364    info-\/>hmtx = stbtt\_\_find\_table(data, fontstart, \textcolor{stringliteral}{"{}hmtx"{}}); \textcolor{comment}{// required}}
\DoxyCodeLine{1365    info-\/>kern = stbtt\_\_find\_table(data, fontstart, \textcolor{stringliteral}{"{}kern"{}}); \textcolor{comment}{// not required}}
\DoxyCodeLine{1366    info-\/>gpos = stbtt\_\_find\_table(data, fontstart, \textcolor{stringliteral}{"{}GPOS"{}}); \textcolor{comment}{// not required}}
\DoxyCodeLine{1367 }
\DoxyCodeLine{1368    \textcolor{keywordflow}{if} (!cmap || !info-\/>head || !info-\/>hhea || !info-\/>hmtx)}
\DoxyCodeLine{1369       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1370    \textcolor{keywordflow}{if} (info-\/>glyf) \{}
\DoxyCodeLine{1371       \textcolor{comment}{// required for truetype}}
\DoxyCodeLine{1372       \textcolor{keywordflow}{if} (!info-\/>loca) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1373    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1374       \textcolor{comment}{// initialization for CFF / Type2 fonts (OTF)}}
\DoxyCodeLine{1375       \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} b, topdict, topdictidx;}
\DoxyCodeLine{1376       stbtt\_uint32 cstype = 2, charstrings = 0, fdarrayoff = 0, fdselectoff = 0;}
\DoxyCodeLine{1377       stbtt\_uint32 cff;}
\DoxyCodeLine{1378 }
\DoxyCodeLine{1379       cff = stbtt\_\_find\_table(data, fontstart, \textcolor{stringliteral}{"{}CFF "{}});}
\DoxyCodeLine{1380       \textcolor{keywordflow}{if} (!cff) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1381 }
\DoxyCodeLine{1382       info-\/>fontdicts = stbtt\_\_new\_buf(NULL, 0);}
\DoxyCodeLine{1383       info-\/>fdselect = stbtt\_\_new\_buf(NULL, 0);}
\DoxyCodeLine{1384 }
\DoxyCodeLine{1385       \textcolor{comment}{// @TODO this should use size from table (not 512MB)}}
\DoxyCodeLine{1386       info-\/>cff = stbtt\_\_new\_buf(data+cff, 512*1024*1024);}
\DoxyCodeLine{1387       b = info-\/>cff;}
\DoxyCodeLine{1388 }
\DoxyCodeLine{1389       \textcolor{comment}{// read the header}}
\DoxyCodeLine{1390       stbtt\_\_buf\_skip(\&b, 2);}
\DoxyCodeLine{1391       stbtt\_\_buf\_seek(\&b, stbtt\_\_buf\_get8(\&b)); \textcolor{comment}{// hdrsize}}
\DoxyCodeLine{1392 }
\DoxyCodeLine{1393       \textcolor{comment}{// @TODO the name INDEX could list multiple fonts,}}
\DoxyCodeLine{1394       \textcolor{comment}{// but we just use the first one.}}
\DoxyCodeLine{1395       stbtt\_\_cff\_get\_index(\&b);  \textcolor{comment}{// name INDEX}}
\DoxyCodeLine{1396       topdictidx = stbtt\_\_cff\_get\_index(\&b);}
\DoxyCodeLine{1397       topdict = stbtt\_\_cff\_index\_get(topdictidx, 0);}
\DoxyCodeLine{1398       stbtt\_\_cff\_get\_index(\&b);  \textcolor{comment}{// string INDEX}}
\DoxyCodeLine{1399       info-\/>gsubrs = stbtt\_\_cff\_get\_index(\&b);}
\DoxyCodeLine{1400 }
\DoxyCodeLine{1401       stbtt\_\_dict\_get\_ints(\&topdict, 17, 1, \&charstrings);}
\DoxyCodeLine{1402       stbtt\_\_dict\_get\_ints(\&topdict, 0x100 | 6, 1, \&cstype);}
\DoxyCodeLine{1403       stbtt\_\_dict\_get\_ints(\&topdict, 0x100 | 36, 1, \&fdarrayoff);}
\DoxyCodeLine{1404       stbtt\_\_dict\_get\_ints(\&topdict, 0x100 | 37, 1, \&fdselectoff);}
\DoxyCodeLine{1405       info-\/>subrs = stbtt\_\_get\_subrs(b, topdict);}
\DoxyCodeLine{1406 }
\DoxyCodeLine{1407       \textcolor{comment}{// we only support Type 2 charstrings}}
\DoxyCodeLine{1408       \textcolor{keywordflow}{if} (cstype != 2) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1409       \textcolor{keywordflow}{if} (charstrings == 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1410 }
\DoxyCodeLine{1411       \textcolor{keywordflow}{if} (fdarrayoff) \{}
\DoxyCodeLine{1412          \textcolor{comment}{// looks like a CID font}}
\DoxyCodeLine{1413          \textcolor{keywordflow}{if} (!fdselectoff) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1414          stbtt\_\_buf\_seek(\&b, fdarrayoff);}
\DoxyCodeLine{1415          info-\/>fontdicts = stbtt\_\_cff\_get\_index(\&b);}
\DoxyCodeLine{1416          info-\/>fdselect = stbtt\_\_buf\_range(\&b, fdselectoff, b.size-\/fdselectoff);}
\DoxyCodeLine{1417       \}}
\DoxyCodeLine{1418 }
\DoxyCodeLine{1419       stbtt\_\_buf\_seek(\&b, charstrings);}
\DoxyCodeLine{1420       info-\/>charstrings = stbtt\_\_cff\_get\_index(\&b);}
\DoxyCodeLine{1421    \}}
\DoxyCodeLine{1422 }
\DoxyCodeLine{1423    t = stbtt\_\_find\_table(data, fontstart, \textcolor{stringliteral}{"{}maxp"{}});}
\DoxyCodeLine{1424    \textcolor{keywordflow}{if} (t)}
\DoxyCodeLine{1425       info-\/>numGlyphs = ttUSHORT(data+t+4);}
\DoxyCodeLine{1426    \textcolor{keywordflow}{else}}
\DoxyCodeLine{1427       info-\/>numGlyphs = 0xffff;}
\DoxyCodeLine{1428 }
\DoxyCodeLine{1429    \textcolor{comment}{// find a cmap encoding table we understand *now* to avoid searching}}
\DoxyCodeLine{1430    \textcolor{comment}{// later. (todo: could make this installable)}}
\DoxyCodeLine{1431    \textcolor{comment}{// the same regardless of glyph.}}
\DoxyCodeLine{1432    numTables = ttUSHORT(data + cmap + 2);}
\DoxyCodeLine{1433    info-\/>index\_map = 0;}
\DoxyCodeLine{1434    \textcolor{keywordflow}{for} (i=0; i < numTables; ++i) \{}
\DoxyCodeLine{1435       stbtt\_uint32 encoding\_record = cmap + 4 + 8 * i;}
\DoxyCodeLine{1436       \textcolor{comment}{// find an encoding we understand:}}
\DoxyCodeLine{1437       \textcolor{keywordflow}{switch}(ttUSHORT(data+encoding\_record)) \{}
\DoxyCodeLine{1438          \textcolor{keywordflow}{case} STBTT\_PLATFORM\_ID\_MICROSOFT:}
\DoxyCodeLine{1439             \textcolor{keywordflow}{switch} (ttUSHORT(data+encoding\_record+2)) \{}
\DoxyCodeLine{1440                \textcolor{keywordflow}{case} STBTT\_MS\_EID\_UNICODE\_BMP:}
\DoxyCodeLine{1441                \textcolor{keywordflow}{case} STBTT\_MS\_EID\_UNICODE\_FULL:}
\DoxyCodeLine{1442                   \textcolor{comment}{// MS/Unicode}}
\DoxyCodeLine{1443                   info-\/>index\_map = cmap + ttULONG(data+encoding\_record+4);}
\DoxyCodeLine{1444                   \textcolor{keywordflow}{break};}
\DoxyCodeLine{1445             \}}
\DoxyCodeLine{1446             \textcolor{keywordflow}{break};}
\DoxyCodeLine{1447         \textcolor{keywordflow}{case} STBTT\_PLATFORM\_ID\_UNICODE:}
\DoxyCodeLine{1448             \textcolor{comment}{// Mac/iOS has these}}
\DoxyCodeLine{1449             \textcolor{comment}{// all the encodingIDs are unicode, so we don't bother to check it}}
\DoxyCodeLine{1450             info-\/>index\_map = cmap + ttULONG(data+encoding\_record+4);}
\DoxyCodeLine{1451             \textcolor{keywordflow}{break};}
\DoxyCodeLine{1452       \}}
\DoxyCodeLine{1453    \}}
\DoxyCodeLine{1454    \textcolor{keywordflow}{if} (info-\/>index\_map == 0)}
\DoxyCodeLine{1455       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1456 }
\DoxyCodeLine{1457    info-\/>indexToLocFormat = ttUSHORT(data+info-\/>head + 50);}
\DoxyCodeLine{1458    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1459 \}}
\DoxyCodeLine{1460 }
\DoxyCodeLine{1461 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_FindGlyphIndex(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} unicode\_codepoint)}
\DoxyCodeLine{1462 \{}
\DoxyCodeLine{1463    stbtt\_uint8 *data = info-\/>data;}
\DoxyCodeLine{1464    stbtt\_uint32 index\_map = info-\/>index\_map;}
\DoxyCodeLine{1465 }
\DoxyCodeLine{1466    stbtt\_uint16 format = ttUSHORT(data + index\_map + 0);}
\DoxyCodeLine{1467    \textcolor{keywordflow}{if} (format == 0) \{ \textcolor{comment}{// apple byte encoding}}
\DoxyCodeLine{1468       stbtt\_int32 bytes = ttUSHORT(data + index\_map + 2);}
\DoxyCodeLine{1469       \textcolor{keywordflow}{if} (unicode\_codepoint < bytes-\/6)}
\DoxyCodeLine{1470          \textcolor{keywordflow}{return} ttBYTE(data + index\_map + 6 + unicode\_codepoint);}
\DoxyCodeLine{1471       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1472    \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (format == 6) \{}
\DoxyCodeLine{1473       stbtt\_uint32 first = ttUSHORT(data + index\_map + 6);}
\DoxyCodeLine{1474       stbtt\_uint32 count = ttUSHORT(data + index\_map + 8);}
\DoxyCodeLine{1475       \textcolor{keywordflow}{if} ((stbtt\_uint32) unicode\_codepoint >= first \&\& (stbtt\_uint32) unicode\_codepoint < first+count)}
\DoxyCodeLine{1476          \textcolor{keywordflow}{return} ttUSHORT(data + index\_map + 10 + (unicode\_codepoint -\/ first)*2);}
\DoxyCodeLine{1477       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1478    \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (format == 2) \{}
\DoxyCodeLine{1479       STBTT\_assert(0); \textcolor{comment}{// @TODO: high-\/byte mapping for japanese/chinese/korean}}
\DoxyCodeLine{1480       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1481    \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (format == 4) \{ \textcolor{comment}{// standard mapping for windows fonts: binary search collection of ranges}}
\DoxyCodeLine{1482       stbtt\_uint16 segcount = ttUSHORT(data+index\_map+6) >> 1;}
\DoxyCodeLine{1483       stbtt\_uint16 searchRange = ttUSHORT(data+index\_map+8) >> 1;}
\DoxyCodeLine{1484       stbtt\_uint16 entrySelector = ttUSHORT(data+index\_map+10);}
\DoxyCodeLine{1485       stbtt\_uint16 rangeShift = ttUSHORT(data+index\_map+12) >> 1;}
\DoxyCodeLine{1486 }
\DoxyCodeLine{1487       \textcolor{comment}{// do a binary search of the segments}}
\DoxyCodeLine{1488       stbtt\_uint32 endCount = index\_map + 14;}
\DoxyCodeLine{1489       stbtt\_uint32 search = endCount;}
\DoxyCodeLine{1490 }
\DoxyCodeLine{1491       \textcolor{keywordflow}{if} (unicode\_codepoint > 0xffff)}
\DoxyCodeLine{1492          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1493 }
\DoxyCodeLine{1494       \textcolor{comment}{// they lie from endCount .. endCount + segCount}}
\DoxyCodeLine{1495       \textcolor{comment}{// but searchRange is the nearest power of two, so...}}
\DoxyCodeLine{1496       \textcolor{keywordflow}{if} (unicode\_codepoint >= ttUSHORT(data + search + rangeShift*2))}
\DoxyCodeLine{1497          search += rangeShift*2;}
\DoxyCodeLine{1498 }
\DoxyCodeLine{1499       \textcolor{comment}{// now decrement to bias correctly to find smallest}}
\DoxyCodeLine{1500       search -\/= 2;}
\DoxyCodeLine{1501       \textcolor{keywordflow}{while} (entrySelector) \{}
\DoxyCodeLine{1502          stbtt\_uint16 end;}
\DoxyCodeLine{1503          searchRange >>= 1;}
\DoxyCodeLine{1504          end = ttUSHORT(data + search + searchRange*2);}
\DoxyCodeLine{1505          \textcolor{keywordflow}{if} (unicode\_codepoint > end)}
\DoxyCodeLine{1506             search += searchRange*2;}
\DoxyCodeLine{1507          -\/-\/entrySelector;}
\DoxyCodeLine{1508       \}}
\DoxyCodeLine{1509       search += 2;}
\DoxyCodeLine{1510 }
\DoxyCodeLine{1511       \{}
\DoxyCodeLine{1512          stbtt\_uint16 offset, start;}
\DoxyCodeLine{1513          stbtt\_uint16 item = (stbtt\_uint16) ((search -\/ endCount) >> 1);}
\DoxyCodeLine{1514 }
\DoxyCodeLine{1515          STBTT\_assert(unicode\_codepoint <= ttUSHORT(data + endCount + 2*item));}
\DoxyCodeLine{1516          start = ttUSHORT(data + index\_map + 14 + segcount*2 + 2 + 2*item);}
\DoxyCodeLine{1517          \textcolor{keywordflow}{if} (unicode\_codepoint < start)}
\DoxyCodeLine{1518             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1519 }
\DoxyCodeLine{1520          offset = ttUSHORT(data + index\_map + 14 + segcount*6 + 2 + 2*item);}
\DoxyCodeLine{1521          \textcolor{keywordflow}{if} (offset == 0)}
\DoxyCodeLine{1522             \textcolor{keywordflow}{return} (stbtt\_uint16) (unicode\_codepoint + ttSHORT(data + index\_map + 14 + segcount*4 + 2 + 2*item));}
\DoxyCodeLine{1523 }
\DoxyCodeLine{1524          \textcolor{keywordflow}{return} ttUSHORT(data + offset + (unicode\_codepoint-\/start)*2 + index\_map + 14 + segcount*6 + 2 + 2*item);}
\DoxyCodeLine{1525       \}}
\DoxyCodeLine{1526    \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (format == 12 || format == 13) \{}
\DoxyCodeLine{1527       stbtt\_uint32 ngroups = ttULONG(data+index\_map+12);}
\DoxyCodeLine{1528       stbtt\_int32 low,high;}
\DoxyCodeLine{1529       low = 0; high = (stbtt\_int32)ngroups;}
\DoxyCodeLine{1530       \textcolor{comment}{// Binary search the right group.}}
\DoxyCodeLine{1531       \textcolor{keywordflow}{while} (low < high) \{}
\DoxyCodeLine{1532          stbtt\_int32 mid = low + ((high-\/low) >> 1); \textcolor{comment}{// rounds down, so low <= mid < high}}
\DoxyCodeLine{1533          stbtt\_uint32 start\_char = ttULONG(data+index\_map+16+mid*12);}
\DoxyCodeLine{1534          stbtt\_uint32 end\_char = ttULONG(data+index\_map+16+mid*12+4);}
\DoxyCodeLine{1535          \textcolor{keywordflow}{if} ((stbtt\_uint32) unicode\_codepoint < start\_char)}
\DoxyCodeLine{1536             high = mid;}
\DoxyCodeLine{1537          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((stbtt\_uint32) unicode\_codepoint > end\_char)}
\DoxyCodeLine{1538             low = mid+1;}
\DoxyCodeLine{1539          \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1540             stbtt\_uint32 start\_glyph = ttULONG(data+index\_map+16+mid*12+8);}
\DoxyCodeLine{1541             \textcolor{keywordflow}{if} (format == 12)}
\DoxyCodeLine{1542                \textcolor{keywordflow}{return} start\_glyph + unicode\_codepoint-\/start\_char;}
\DoxyCodeLine{1543             \textcolor{keywordflow}{else} \textcolor{comment}{// format == 13}}
\DoxyCodeLine{1544                \textcolor{keywordflow}{return} start\_glyph;}
\DoxyCodeLine{1545          \}}
\DoxyCodeLine{1546       \}}
\DoxyCodeLine{1547       \textcolor{keywordflow}{return} 0; \textcolor{comment}{// not found}}
\DoxyCodeLine{1548    \}}
\DoxyCodeLine{1549    \textcolor{comment}{// @TODO}}
\DoxyCodeLine{1550    STBTT\_assert(0);}
\DoxyCodeLine{1551    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1552 \}}
\DoxyCodeLine{1553 }
\DoxyCodeLine{1554 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_GetCodepointShape(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} unicode\_codepoint, \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} **vertices)}
\DoxyCodeLine{1555 \{}
\DoxyCodeLine{1556    \textcolor{keywordflow}{return} stbtt\_GetGlyphShape(info, stbtt\_FindGlyphIndex(info, unicode\_codepoint), vertices);}
\DoxyCodeLine{1557 \}}
\DoxyCodeLine{1558 }
\DoxyCodeLine{1559 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_setvertex(\mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *v, stbtt\_uint8 type, stbtt\_int32 x, stbtt\_int32 y, stbtt\_int32 cx, stbtt\_int32 cy)}
\DoxyCodeLine{1560 \{}
\DoxyCodeLine{1561    v-\/>type = type;}
\DoxyCodeLine{1562    v-\/>x = (stbtt\_int16) x;}
\DoxyCodeLine{1563    v-\/>y = (stbtt\_int16) y;}
\DoxyCodeLine{1564    v-\/>cx = (stbtt\_int16) cx;}
\DoxyCodeLine{1565    v-\/>cy = (stbtt\_int16) cy;}
\DoxyCodeLine{1566 \}}
\DoxyCodeLine{1567 }
\DoxyCodeLine{1568 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_GetGlyfOffset(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index)}
\DoxyCodeLine{1569 \{}
\DoxyCodeLine{1570    \textcolor{keywordtype}{int} g1,g2;}
\DoxyCodeLine{1571 }
\DoxyCodeLine{1572    STBTT\_assert(!info-\/>cff.size);}
\DoxyCodeLine{1573 }
\DoxyCodeLine{1574    \textcolor{keywordflow}{if} (glyph\_index >= info-\/>numGlyphs) \textcolor{keywordflow}{return} -\/1; \textcolor{comment}{// glyph index out of range}}
\DoxyCodeLine{1575    \textcolor{keywordflow}{if} (info-\/>indexToLocFormat >= 2)    \textcolor{keywordflow}{return} -\/1; \textcolor{comment}{// unknown index-\/>glyph map format}}
\DoxyCodeLine{1576 }
\DoxyCodeLine{1577    \textcolor{keywordflow}{if} (info-\/>indexToLocFormat == 0) \{}
\DoxyCodeLine{1578       g1 = info-\/>glyf + ttUSHORT(info-\/>data + info-\/>loca + glyph\_index * 2) * 2;}
\DoxyCodeLine{1579       g2 = info-\/>glyf + ttUSHORT(info-\/>data + info-\/>loca + glyph\_index * 2 + 2) * 2;}
\DoxyCodeLine{1580    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1581       g1 = info-\/>glyf + ttULONG (info-\/>data + info-\/>loca + glyph\_index * 4);}
\DoxyCodeLine{1582       g2 = info-\/>glyf + ttULONG (info-\/>data + info-\/>loca + glyph\_index * 4 + 4);}
\DoxyCodeLine{1583    \}}
\DoxyCodeLine{1584 }
\DoxyCodeLine{1585    \textcolor{keywordflow}{return} g1==g2 ? -\/1 : g1; \textcolor{comment}{// if length is 0, return -\/1}}
\DoxyCodeLine{1586 \}}
\DoxyCodeLine{1587 }
\DoxyCodeLine{1588 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_GetGlyphInfoT2(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index, \textcolor{keywordtype}{int} *x0, \textcolor{keywordtype}{int} *y0, \textcolor{keywordtype}{int} *x1, \textcolor{keywordtype}{int} *y1);}
\DoxyCodeLine{1589 }
\DoxyCodeLine{1590 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_GetGlyphBox(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index, \textcolor{keywordtype}{int} *x0, \textcolor{keywordtype}{int} *y0, \textcolor{keywordtype}{int} *x1, \textcolor{keywordtype}{int} *y1)}
\DoxyCodeLine{1591 \{}
\DoxyCodeLine{1592    \textcolor{keywordflow}{if} (info-\/>cff.size) \{}
\DoxyCodeLine{1593       stbtt\_\_GetGlyphInfoT2(info, glyph\_index, x0, y0, x1, y1);}
\DoxyCodeLine{1594    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1595       \textcolor{keywordtype}{int} g = stbtt\_\_GetGlyfOffset(info, glyph\_index);}
\DoxyCodeLine{1596       \textcolor{keywordflow}{if} (g < 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1597 }
\DoxyCodeLine{1598       \textcolor{keywordflow}{if} (x0) *x0 = ttSHORT(info-\/>data + g + 2);}
\DoxyCodeLine{1599       \textcolor{keywordflow}{if} (y0) *y0 = ttSHORT(info-\/>data + g + 4);}
\DoxyCodeLine{1600       \textcolor{keywordflow}{if} (x1) *x1 = ttSHORT(info-\/>data + g + 6);}
\DoxyCodeLine{1601       \textcolor{keywordflow}{if} (y1) *y1 = ttSHORT(info-\/>data + g + 8);}
\DoxyCodeLine{1602    \}}
\DoxyCodeLine{1603    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1604 \}}
\DoxyCodeLine{1605 }
\DoxyCodeLine{1606 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_GetCodepointBox(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{int} *x0, \textcolor{keywordtype}{int} *y0, \textcolor{keywordtype}{int} *x1, \textcolor{keywordtype}{int} *y1)}
\DoxyCodeLine{1607 \{}
\DoxyCodeLine{1608    \textcolor{keywordflow}{return} stbtt\_GetGlyphBox(info, stbtt\_FindGlyphIndex(info,codepoint), x0,y0,x1,y1);}
\DoxyCodeLine{1609 \}}
\DoxyCodeLine{1610 }
\DoxyCodeLine{1611 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_IsGlyphEmpty(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index)}
\DoxyCodeLine{1612 \{}
\DoxyCodeLine{1613    stbtt\_int16 numberOfContours;}
\DoxyCodeLine{1614    \textcolor{keywordtype}{int} g;}
\DoxyCodeLine{1615    \textcolor{keywordflow}{if} (info-\/>cff.size)}
\DoxyCodeLine{1616       \textcolor{keywordflow}{return} stbtt\_\_GetGlyphInfoT2(info, glyph\_index, NULL, NULL, NULL, NULL) == 0;}
\DoxyCodeLine{1617    g = stbtt\_\_GetGlyfOffset(info, glyph\_index);}
\DoxyCodeLine{1618    \textcolor{keywordflow}{if} (g < 0) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{1619    numberOfContours = ttSHORT(info-\/>data + g);}
\DoxyCodeLine{1620    \textcolor{keywordflow}{return} numberOfContours == 0;}
\DoxyCodeLine{1621 \}}
\DoxyCodeLine{1622 }
\DoxyCodeLine{1623 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_close\_shape(\mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *vertices, \textcolor{keywordtype}{int} num\_vertices, \textcolor{keywordtype}{int} was\_off, \textcolor{keywordtype}{int} start\_off,}
\DoxyCodeLine{1624     stbtt\_int32 sx, stbtt\_int32 sy, stbtt\_int32 scx, stbtt\_int32 scy, stbtt\_int32 cx, stbtt\_int32 cy)}
\DoxyCodeLine{1625 \{}
\DoxyCodeLine{1626    \textcolor{keywordflow}{if} (start\_off) \{}
\DoxyCodeLine{1627       \textcolor{keywordflow}{if} (was\_off)}
\DoxyCodeLine{1628          stbtt\_setvertex(\&vertices[num\_vertices++], STBTT\_vcurve, (cx+scx)>>1, (cy+scy)>>1, cx,cy);}
\DoxyCodeLine{1629       stbtt\_setvertex(\&vertices[num\_vertices++], STBTT\_vcurve, sx,sy,scx,scy);}
\DoxyCodeLine{1630    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1631       \textcolor{keywordflow}{if} (was\_off)}
\DoxyCodeLine{1632          stbtt\_setvertex(\&vertices[num\_vertices++], STBTT\_vcurve,sx,sy,cx,cy);}
\DoxyCodeLine{1633       \textcolor{keywordflow}{else}}
\DoxyCodeLine{1634          stbtt\_setvertex(\&vertices[num\_vertices++], STBTT\_vline,sx,sy,0,0);}
\DoxyCodeLine{1635    \}}
\DoxyCodeLine{1636    \textcolor{keywordflow}{return} num\_vertices;}
\DoxyCodeLine{1637 \}}
\DoxyCodeLine{1638 }
\DoxyCodeLine{1639 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_GetGlyphShapeTT(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index, \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} **pvertices)}
\DoxyCodeLine{1640 \{}
\DoxyCodeLine{1641    stbtt\_int16 numberOfContours;}
\DoxyCodeLine{1642    stbtt\_uint8 *endPtsOfContours;}
\DoxyCodeLine{1643    stbtt\_uint8 *data = info-\/>data;}
\DoxyCodeLine{1644    \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *vertices=0;}
\DoxyCodeLine{1645    \textcolor{keywordtype}{int} num\_vertices=0;}
\DoxyCodeLine{1646    \textcolor{keywordtype}{int} g = stbtt\_\_GetGlyfOffset(info, glyph\_index);}
\DoxyCodeLine{1647 }
\DoxyCodeLine{1648    *pvertices = NULL;}
\DoxyCodeLine{1649 }
\DoxyCodeLine{1650    \textcolor{keywordflow}{if} (g < 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1651 }
\DoxyCodeLine{1652    numberOfContours = ttSHORT(data + g);}
\DoxyCodeLine{1653 }
\DoxyCodeLine{1654    \textcolor{keywordflow}{if} (numberOfContours > 0) \{}
\DoxyCodeLine{1655       stbtt\_uint8 flags=0,flagcount;}
\DoxyCodeLine{1656       stbtt\_int32 ins, i,j=0,m,n, next\_move, was\_off=0, off, start\_off=0;}
\DoxyCodeLine{1657       stbtt\_int32 x,y,cx,cy,sx,sy, scx,scy;}
\DoxyCodeLine{1658       stbtt\_uint8 *points;}
\DoxyCodeLine{1659       endPtsOfContours = (data + g + 10);}
\DoxyCodeLine{1660       ins = ttUSHORT(data + g + 10 + numberOfContours * 2);}
\DoxyCodeLine{1661       points = data + g + 10 + numberOfContours * 2 + 2 + ins;}
\DoxyCodeLine{1662 }
\DoxyCodeLine{1663       n = 1+ttUSHORT(endPtsOfContours + numberOfContours*2-\/2);}
\DoxyCodeLine{1664 }
\DoxyCodeLine{1665       m = n + 2*numberOfContours;  \textcolor{comment}{// a loose bound on how many vertices we might need}}
\DoxyCodeLine{1666       vertices = (\mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *) STBTT\_malloc(m * \textcolor{keyword}{sizeof}(vertices[0]), info-\/>userdata);}
\DoxyCodeLine{1667       \textcolor{keywordflow}{if} (vertices == 0)}
\DoxyCodeLine{1668          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1669 }
\DoxyCodeLine{1670       next\_move = 0;}
\DoxyCodeLine{1671       flagcount=0;}
\DoxyCodeLine{1672 }
\DoxyCodeLine{1673       \textcolor{comment}{// in first pass, we load uninterpreted data into the allocated array}}
\DoxyCodeLine{1674       \textcolor{comment}{// above, shifted to the end of the array so we won't overwrite it when}}
\DoxyCodeLine{1675       \textcolor{comment}{// we create our final data starting from the front}}
\DoxyCodeLine{1676 }
\DoxyCodeLine{1677       off = m -\/ n; \textcolor{comment}{// starting offset for uninterpreted data, regardless of how m ends up being calculated}}
\DoxyCodeLine{1678 }
\DoxyCodeLine{1679       \textcolor{comment}{// first load flags}}
\DoxyCodeLine{1680 }
\DoxyCodeLine{1681       \textcolor{keywordflow}{for} (i=0; i < n; ++i) \{}
\DoxyCodeLine{1682          \textcolor{keywordflow}{if} (flagcount == 0) \{}
\DoxyCodeLine{1683             flags = *points++;}
\DoxyCodeLine{1684             \textcolor{keywordflow}{if} (flags \& 8)}
\DoxyCodeLine{1685                flagcount = *points++;}
\DoxyCodeLine{1686          \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{1687             -\/-\/flagcount;}
\DoxyCodeLine{1688          vertices[off+i].type = flags;}
\DoxyCodeLine{1689       \}}
\DoxyCodeLine{1690 }
\DoxyCodeLine{1691       \textcolor{comment}{// now load x coordinates}}
\DoxyCodeLine{1692       x=0;}
\DoxyCodeLine{1693       \textcolor{keywordflow}{for} (i=0; i < n; ++i) \{}
\DoxyCodeLine{1694          flags = vertices[off+i].type;}
\DoxyCodeLine{1695          \textcolor{keywordflow}{if} (flags \& 2) \{}
\DoxyCodeLine{1696             stbtt\_int16 dx = *points++;}
\DoxyCodeLine{1697             x += (flags \& 16) ? dx : -\/dx; \textcolor{comment}{// ???}}
\DoxyCodeLine{1698          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1699             \textcolor{keywordflow}{if} (!(flags \& 16)) \{}
\DoxyCodeLine{1700                x = x + (stbtt\_int16) (points[0]*256 + points[1]);}
\DoxyCodeLine{1701                points += 2;}
\DoxyCodeLine{1702             \}}
\DoxyCodeLine{1703          \}}
\DoxyCodeLine{1704          vertices[off+i].x = (stbtt\_int16) x;}
\DoxyCodeLine{1705       \}}
\DoxyCodeLine{1706 }
\DoxyCodeLine{1707       \textcolor{comment}{// now load y coordinates}}
\DoxyCodeLine{1708       y=0;}
\DoxyCodeLine{1709       \textcolor{keywordflow}{for} (i=0; i < n; ++i) \{}
\DoxyCodeLine{1710          flags = vertices[off+i].type;}
\DoxyCodeLine{1711          \textcolor{keywordflow}{if} (flags \& 4) \{}
\DoxyCodeLine{1712             stbtt\_int16 dy = *points++;}
\DoxyCodeLine{1713             y += (flags \& 32) ? dy : -\/dy; \textcolor{comment}{// ???}}
\DoxyCodeLine{1714          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1715             \textcolor{keywordflow}{if} (!(flags \& 32)) \{}
\DoxyCodeLine{1716                y = y + (stbtt\_int16) (points[0]*256 + points[1]);}
\DoxyCodeLine{1717                points += 2;}
\DoxyCodeLine{1718             \}}
\DoxyCodeLine{1719          \}}
\DoxyCodeLine{1720          vertices[off+i].y = (stbtt\_int16) y;}
\DoxyCodeLine{1721       \}}
\DoxyCodeLine{1722 }
\DoxyCodeLine{1723       \textcolor{comment}{// now convert them to our format}}
\DoxyCodeLine{1724       num\_vertices=0;}
\DoxyCodeLine{1725       sx = sy = cx = cy = scx = scy = 0;}
\DoxyCodeLine{1726       \textcolor{keywordflow}{for} (i=0; i < n; ++i) \{}
\DoxyCodeLine{1727          flags = vertices[off+i].type;}
\DoxyCodeLine{1728          x     = (stbtt\_int16) vertices[off+i].x;}
\DoxyCodeLine{1729          y     = (stbtt\_int16) vertices[off+i].y;}
\DoxyCodeLine{1730 }
\DoxyCodeLine{1731          \textcolor{keywordflow}{if} (next\_move == i) \{}
\DoxyCodeLine{1732             \textcolor{keywordflow}{if} (i != 0)}
\DoxyCodeLine{1733                num\_vertices = stbtt\_\_close\_shape(vertices, num\_vertices, was\_off, start\_off, sx,sy,scx,scy,cx,cy);}
\DoxyCodeLine{1734 }
\DoxyCodeLine{1735             \textcolor{comment}{// now start the new one               }}
\DoxyCodeLine{1736             start\_off = !(flags \& 1);}
\DoxyCodeLine{1737             \textcolor{keywordflow}{if} (start\_off) \{}
\DoxyCodeLine{1738                \textcolor{comment}{// if we start off with an off-\/curve point, then when we need to find a point on the curve}}
\DoxyCodeLine{1739                \textcolor{comment}{// where we can start, and we need to save some state for when we wraparound.}}
\DoxyCodeLine{1740                scx = x;}
\DoxyCodeLine{1741                scy = y;}
\DoxyCodeLine{1742                \textcolor{keywordflow}{if} (!(vertices[off+i+1].type \& 1)) \{}
\DoxyCodeLine{1743                   \textcolor{comment}{// next point is also a curve point, so interpolate an on-\/point curve}}
\DoxyCodeLine{1744                   sx = (x + (stbtt\_int32) vertices[off+i+1].x) >> 1;}
\DoxyCodeLine{1745                   sy = (y + (stbtt\_int32) vertices[off+i+1].y) >> 1;}
\DoxyCodeLine{1746                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1747                   \textcolor{comment}{// otherwise just use the next point as our start point}}
\DoxyCodeLine{1748                   sx = (stbtt\_int32) vertices[off+i+1].x;}
\DoxyCodeLine{1749                   sy = (stbtt\_int32) vertices[off+i+1].y;}
\DoxyCodeLine{1750                   ++i; \textcolor{comment}{// we're using point i+1 as the starting point, so skip it}}
\DoxyCodeLine{1751                \}}
\DoxyCodeLine{1752             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1753                sx = x;}
\DoxyCodeLine{1754                sy = y;}
\DoxyCodeLine{1755             \}}
\DoxyCodeLine{1756             stbtt\_setvertex(\&vertices[num\_vertices++], STBTT\_vmove,sx,sy,0,0);}
\DoxyCodeLine{1757             was\_off = 0;}
\DoxyCodeLine{1758             next\_move = 1 + ttUSHORT(endPtsOfContours+j*2);}
\DoxyCodeLine{1759             ++j;}
\DoxyCodeLine{1760          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1761             \textcolor{keywordflow}{if} (!(flags \& 1)) \{ \textcolor{comment}{// if it's a curve}}
\DoxyCodeLine{1762                \textcolor{keywordflow}{if} (was\_off) \textcolor{comment}{// two off-\/curve control points in a row means interpolate an on-\/curve midpoint}}
\DoxyCodeLine{1763                   stbtt\_setvertex(\&vertices[num\_vertices++], STBTT\_vcurve, (cx+x)>>1, (cy+y)>>1, cx, cy);}
\DoxyCodeLine{1764                cx = x;}
\DoxyCodeLine{1765                cy = y;}
\DoxyCodeLine{1766                was\_off = 1;}
\DoxyCodeLine{1767             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1768                \textcolor{keywordflow}{if} (was\_off)}
\DoxyCodeLine{1769                   stbtt\_setvertex(\&vertices[num\_vertices++], STBTT\_vcurve, x,y, cx, cy);}
\DoxyCodeLine{1770                \textcolor{keywordflow}{else}}
\DoxyCodeLine{1771                   stbtt\_setvertex(\&vertices[num\_vertices++], STBTT\_vline, x,y,0,0);}
\DoxyCodeLine{1772                was\_off = 0;}
\DoxyCodeLine{1773             \}}
\DoxyCodeLine{1774          \}}
\DoxyCodeLine{1775       \}}
\DoxyCodeLine{1776       num\_vertices = stbtt\_\_close\_shape(vertices, num\_vertices, was\_off, start\_off, sx,sy,scx,scy,cx,cy);}
\DoxyCodeLine{1777    \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (numberOfContours == -\/1) \{}
\DoxyCodeLine{1778       \textcolor{comment}{// Compound shapes.}}
\DoxyCodeLine{1779       \textcolor{keywordtype}{int} more = 1;}
\DoxyCodeLine{1780       stbtt\_uint8 *comp = data + g + 10;}
\DoxyCodeLine{1781       num\_vertices = 0;}
\DoxyCodeLine{1782       vertices = 0;}
\DoxyCodeLine{1783       \textcolor{keywordflow}{while} (more) \{}
\DoxyCodeLine{1784          stbtt\_uint16 flags, gidx;}
\DoxyCodeLine{1785          \textcolor{keywordtype}{int} comp\_num\_verts = 0, i;}
\DoxyCodeLine{1786          \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *comp\_verts = 0, *tmp = 0;}
\DoxyCodeLine{1787          \textcolor{keywordtype}{float} mtx[6] = \{1,0,0,1,0,0\}, m, n;}
\DoxyCodeLine{1788          }
\DoxyCodeLine{1789          flags = ttSHORT(comp); comp+=2;}
\DoxyCodeLine{1790          gidx = ttSHORT(comp); comp+=2;}
\DoxyCodeLine{1791 }
\DoxyCodeLine{1792          \textcolor{keywordflow}{if} (flags \& 2) \{ \textcolor{comment}{// XY values}}
\DoxyCodeLine{1793             \textcolor{keywordflow}{if} (flags \& 1) \{ \textcolor{comment}{// shorts}}
\DoxyCodeLine{1794                mtx[4] = ttSHORT(comp); comp+=2;}
\DoxyCodeLine{1795                mtx[5] = ttSHORT(comp); comp+=2;}
\DoxyCodeLine{1796             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1797                mtx[4] = ttCHAR(comp); comp+=1;}
\DoxyCodeLine{1798                mtx[5] = ttCHAR(comp); comp+=1;}
\DoxyCodeLine{1799             \}}
\DoxyCodeLine{1800          \}}
\DoxyCodeLine{1801          \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1802             \textcolor{comment}{// @TODO handle matching point}}
\DoxyCodeLine{1803             STBTT\_assert(0);}
\DoxyCodeLine{1804          \}}
\DoxyCodeLine{1805          \textcolor{keywordflow}{if} (flags \& (1<<3)) \{ \textcolor{comment}{// WE\_HAVE\_A\_SCALE}}
\DoxyCodeLine{1806             mtx[0] = mtx[3] = ttSHORT(comp)/16384.0f; comp+=2;}
\DoxyCodeLine{1807             mtx[1] = mtx[2] = 0;}
\DoxyCodeLine{1808          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (flags \& (1<<6)) \{ \textcolor{comment}{// WE\_HAVE\_AN\_X\_AND\_YSCALE}}
\DoxyCodeLine{1809             mtx[0] = ttSHORT(comp)/16384.0f; comp+=2;}
\DoxyCodeLine{1810             mtx[1] = mtx[2] = 0;}
\DoxyCodeLine{1811             mtx[3] = ttSHORT(comp)/16384.0f; comp+=2;}
\DoxyCodeLine{1812          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (flags \& (1<<7)) \{ \textcolor{comment}{// WE\_HAVE\_A\_TWO\_BY\_TWO}}
\DoxyCodeLine{1813             mtx[0] = ttSHORT(comp)/16384.0f; comp+=2;}
\DoxyCodeLine{1814             mtx[1] = ttSHORT(comp)/16384.0f; comp+=2;}
\DoxyCodeLine{1815             mtx[2] = ttSHORT(comp)/16384.0f; comp+=2;}
\DoxyCodeLine{1816             mtx[3] = ttSHORT(comp)/16384.0f; comp+=2;}
\DoxyCodeLine{1817          \}}
\DoxyCodeLine{1818          }
\DoxyCodeLine{1819          \textcolor{comment}{// Find transformation scales.}}
\DoxyCodeLine{1820          m = (float) STBTT\_sqrt(mtx[0]*mtx[0] + mtx[1]*mtx[1]);}
\DoxyCodeLine{1821          n = (float) STBTT\_sqrt(mtx[2]*mtx[2] + mtx[3]*mtx[3]);}
\DoxyCodeLine{1822 }
\DoxyCodeLine{1823          \textcolor{comment}{// Get indexed glyph.}}
\DoxyCodeLine{1824          comp\_num\_verts = stbtt\_GetGlyphShape(info, gidx, \&comp\_verts);}
\DoxyCodeLine{1825          \textcolor{keywordflow}{if} (comp\_num\_verts > 0) \{}
\DoxyCodeLine{1826             \textcolor{comment}{// Transform vertices.}}
\DoxyCodeLine{1827             \textcolor{keywordflow}{for} (i = 0; i < comp\_num\_verts; ++i) \{}
\DoxyCodeLine{1828                \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}}* v = \&comp\_verts[i];}
\DoxyCodeLine{1829                stbtt\_vertex\_type x,y;}
\DoxyCodeLine{1830                x=v-\/>x; y=v-\/>y;}
\DoxyCodeLine{1831                v-\/>x = (stbtt\_vertex\_type)(m * (mtx[0]*x + mtx[2]*y + mtx[4]));}
\DoxyCodeLine{1832                v-\/>y = (stbtt\_vertex\_type)(n * (mtx[1]*x + mtx[3]*y + mtx[5]));}
\DoxyCodeLine{1833                x=v-\/>cx; y=v-\/>cy;}
\DoxyCodeLine{1834                v-\/>cx = (stbtt\_vertex\_type)(m * (mtx[0]*x + mtx[2]*y + mtx[4]));}
\DoxyCodeLine{1835                v-\/>cy = (stbtt\_vertex\_type)(n * (mtx[1]*x + mtx[3]*y + mtx[5]));}
\DoxyCodeLine{1836             \}}
\DoxyCodeLine{1837             \textcolor{comment}{// Append vertices.}}
\DoxyCodeLine{1838             tmp = (\mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}}*)STBTT\_malloc((num\_vertices+comp\_num\_verts)*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}}), info-\/>userdata);}
\DoxyCodeLine{1839             \textcolor{keywordflow}{if} (!tmp) \{}
\DoxyCodeLine{1840                \textcolor{keywordflow}{if} (vertices) STBTT\_free(vertices, info-\/>userdata);}
\DoxyCodeLine{1841                \textcolor{keywordflow}{if} (comp\_verts) STBTT\_free(comp\_verts, info-\/>userdata);}
\DoxyCodeLine{1842                \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1843             \}}
\DoxyCodeLine{1844             \textcolor{keywordflow}{if} (num\_vertices > 0) STBTT\_memcpy(tmp, vertices, num\_vertices*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}})); \textcolor{comment}{//-\/V595}}
\DoxyCodeLine{1845             STBTT\_memcpy(tmp+num\_vertices, comp\_verts, comp\_num\_verts*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}}));}
\DoxyCodeLine{1846             \textcolor{keywordflow}{if} (vertices) STBTT\_free(vertices, info-\/>userdata);}
\DoxyCodeLine{1847             vertices = tmp;}
\DoxyCodeLine{1848             STBTT\_free(comp\_verts, info-\/>userdata);}
\DoxyCodeLine{1849             num\_vertices += comp\_num\_verts;}
\DoxyCodeLine{1850          \}}
\DoxyCodeLine{1851          \textcolor{comment}{// More components ?}}
\DoxyCodeLine{1852          more = flags \& (1<<5);}
\DoxyCodeLine{1853       \}}
\DoxyCodeLine{1854    \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (numberOfContours < 0) \{}
\DoxyCodeLine{1855       \textcolor{comment}{// @TODO other compound variations?}}
\DoxyCodeLine{1856       STBTT\_assert(0);}
\DoxyCodeLine{1857    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1858       \textcolor{comment}{// numberOfCounters == 0, do nothing}}
\DoxyCodeLine{1859    \}}
\DoxyCodeLine{1860 }
\DoxyCodeLine{1861    *pvertices = vertices;}
\DoxyCodeLine{1862    \textcolor{keywordflow}{return} num\_vertices;}
\DoxyCodeLine{1863 \}}
\DoxyCodeLine{1864 }
\DoxyCodeLine{1865 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{1866 \{}
\DoxyCodeLine{1867    \textcolor{keywordtype}{int} bounds;}
\DoxyCodeLine{1868    \textcolor{keywordtype}{int} started;}
\DoxyCodeLine{1869    \textcolor{keywordtype}{float} first\_x, first\_y;}
\DoxyCodeLine{1870    \textcolor{keywordtype}{float} x, y;}
\DoxyCodeLine{1871    stbtt\_int32 min\_x, max\_x, min\_y, max\_y;}
\DoxyCodeLine{1872 }
\DoxyCodeLine{1873    \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *pvertices;}
\DoxyCodeLine{1874    \textcolor{keywordtype}{int} num\_vertices;}
\DoxyCodeLine{1875 \} stbtt\_\_csctx;}
\DoxyCodeLine{1876 }
\DoxyCodeLine{1877 \textcolor{preprocessor}{\#define STBTT\_\_CSCTX\_INIT(bounds) \{bounds,0, 0,0, 0,0, 0,0,0,0, NULL, 0\}}}
\DoxyCodeLine{1878 }
\DoxyCodeLine{1879 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_track\_vertex(stbtt\_\_csctx *c, stbtt\_int32 x, stbtt\_int32 y)}
\DoxyCodeLine{1880 \{}
\DoxyCodeLine{1881    \textcolor{keywordflow}{if} (x > c-\/>max\_x || !c-\/>started) c-\/>max\_x = x;}
\DoxyCodeLine{1882    \textcolor{keywordflow}{if} (y > c-\/>max\_y || !c-\/>started) c-\/>max\_y = y;}
\DoxyCodeLine{1883    \textcolor{keywordflow}{if} (x < c-\/>min\_x || !c-\/>started) c-\/>min\_x = x;}
\DoxyCodeLine{1884    \textcolor{keywordflow}{if} (y < c-\/>min\_y || !c-\/>started) c-\/>min\_y = y;}
\DoxyCodeLine{1885    c-\/>started = 1;}
\DoxyCodeLine{1886 \}}
\DoxyCodeLine{1887 }
\DoxyCodeLine{1888 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_csctx\_v(stbtt\_\_csctx *c, stbtt\_uint8 type, stbtt\_int32 x, stbtt\_int32 y, stbtt\_int32 cx, stbtt\_int32 cy, stbtt\_int32 cx1, stbtt\_int32 cy1)}
\DoxyCodeLine{1889 \{}
\DoxyCodeLine{1890    \textcolor{keywordflow}{if} (c-\/>bounds) \{}
\DoxyCodeLine{1891       stbtt\_\_track\_vertex(c, x, y);}
\DoxyCodeLine{1892       \textcolor{keywordflow}{if} (type == STBTT\_vcubic) \{}
\DoxyCodeLine{1893          stbtt\_\_track\_vertex(c, cx, cy);}
\DoxyCodeLine{1894          stbtt\_\_track\_vertex(c, cx1, cy1);}
\DoxyCodeLine{1895       \}}
\DoxyCodeLine{1896    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1897       stbtt\_setvertex(\&c-\/>pvertices[c-\/>num\_vertices], type, x, y, cx, cy);}
\DoxyCodeLine{1898       c-\/>pvertices[c-\/>num\_vertices].cx1 = (stbtt\_int16) cx1;}
\DoxyCodeLine{1899       c-\/>pvertices[c-\/>num\_vertices].cy1 = (stbtt\_int16) cy1;}
\DoxyCodeLine{1900    \}}
\DoxyCodeLine{1901    c-\/>num\_vertices++;}
\DoxyCodeLine{1902 \}}
\DoxyCodeLine{1903 }
\DoxyCodeLine{1904 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_csctx\_close\_shape(stbtt\_\_csctx *ctx)}
\DoxyCodeLine{1905 \{}
\DoxyCodeLine{1906    \textcolor{keywordflow}{if} (ctx-\/>first\_x != ctx-\/>x || ctx-\/>first\_y != ctx-\/>y)}
\DoxyCodeLine{1907       stbtt\_\_csctx\_v(ctx, STBTT\_vline, (\textcolor{keywordtype}{int})ctx-\/>first\_x, (\textcolor{keywordtype}{int})ctx-\/>first\_y, 0, 0, 0, 0);}
\DoxyCodeLine{1908 \}}
\DoxyCodeLine{1909 }
\DoxyCodeLine{1910 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_csctx\_rmove\_to(stbtt\_\_csctx *ctx, \textcolor{keywordtype}{float} dx, \textcolor{keywordtype}{float} dy)}
\DoxyCodeLine{1911 \{}
\DoxyCodeLine{1912    stbtt\_\_csctx\_close\_shape(ctx);}
\DoxyCodeLine{1913    ctx-\/>first\_x = ctx-\/>x = ctx-\/>x + dx;}
\DoxyCodeLine{1914    ctx-\/>first\_y = ctx-\/>y = ctx-\/>y + dy;}
\DoxyCodeLine{1915    stbtt\_\_csctx\_v(ctx, STBTT\_vmove, (\textcolor{keywordtype}{int})ctx-\/>x, (\textcolor{keywordtype}{int})ctx-\/>y, 0, 0, 0, 0);}
\DoxyCodeLine{1916 \}}
\DoxyCodeLine{1917 }
\DoxyCodeLine{1918 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_csctx\_rline\_to(stbtt\_\_csctx *ctx, \textcolor{keywordtype}{float} dx, \textcolor{keywordtype}{float} dy)}
\DoxyCodeLine{1919 \{}
\DoxyCodeLine{1920    ctx-\/>x += dx;}
\DoxyCodeLine{1921    ctx-\/>y += dy;}
\DoxyCodeLine{1922    stbtt\_\_csctx\_v(ctx, STBTT\_vline, (\textcolor{keywordtype}{int})ctx-\/>x, (\textcolor{keywordtype}{int})ctx-\/>y, 0, 0, 0, 0);}
\DoxyCodeLine{1923 \}}
\DoxyCodeLine{1924 }
\DoxyCodeLine{1925 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_csctx\_rccurve\_to(stbtt\_\_csctx *ctx, \textcolor{keywordtype}{float} dx1, \textcolor{keywordtype}{float} dy1, \textcolor{keywordtype}{float} dx2, \textcolor{keywordtype}{float} dy2, \textcolor{keywordtype}{float} dx3, \textcolor{keywordtype}{float} dy3)}
\DoxyCodeLine{1926 \{}
\DoxyCodeLine{1927    \textcolor{keywordtype}{float} cx1 = ctx-\/>x + dx1;}
\DoxyCodeLine{1928    \textcolor{keywordtype}{float} cy1 = ctx-\/>y + dy1;}
\DoxyCodeLine{1929    \textcolor{keywordtype}{float} cx2 = cx1 + dx2;}
\DoxyCodeLine{1930    \textcolor{keywordtype}{float} cy2 = cy1 + dy2;}
\DoxyCodeLine{1931    ctx-\/>x = cx2 + dx3;}
\DoxyCodeLine{1932    ctx-\/>y = cy2 + dy3;}
\DoxyCodeLine{1933    stbtt\_\_csctx\_v(ctx, STBTT\_vcubic, (\textcolor{keywordtype}{int})ctx-\/>x, (\textcolor{keywordtype}{int})ctx-\/>y, (\textcolor{keywordtype}{int})cx1, (\textcolor{keywordtype}{int})cy1, (\textcolor{keywordtype}{int})cx2, (\textcolor{keywordtype}{int})cy2);}
\DoxyCodeLine{1934 \}}
\DoxyCodeLine{1935 }
\DoxyCodeLine{1936 \textcolor{keyword}{static} \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} stbtt\_\_get\_subr(\mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} idx, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{1937 \{}
\DoxyCodeLine{1938    \textcolor{keywordtype}{int} count = stbtt\_\_cff\_index\_count(\&idx);}
\DoxyCodeLine{1939    \textcolor{keywordtype}{int} bias = 107;}
\DoxyCodeLine{1940    \textcolor{keywordflow}{if} (count >= 33900)}
\DoxyCodeLine{1941       bias = 32768;}
\DoxyCodeLine{1942    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (count >= 1240)}
\DoxyCodeLine{1943       bias = 1131;}
\DoxyCodeLine{1944    n += bias;}
\DoxyCodeLine{1945    \textcolor{keywordflow}{if} (n < 0 || n >= count)}
\DoxyCodeLine{1946       \textcolor{keywordflow}{return} stbtt\_\_new\_buf(NULL, 0);}
\DoxyCodeLine{1947    \textcolor{keywordflow}{return} stbtt\_\_cff\_index\_get(idx, n);}
\DoxyCodeLine{1948 \}}
\DoxyCodeLine{1949 }
\DoxyCodeLine{1950 \textcolor{keyword}{static} \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} stbtt\_\_cid\_get\_glyph\_subrs(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index)}
\DoxyCodeLine{1951 \{}
\DoxyCodeLine{1952    \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} fdselect = info-\/>fdselect;}
\DoxyCodeLine{1953    \textcolor{keywordtype}{int} nranges, start, end, v, fmt, fdselector = -\/1, i;}
\DoxyCodeLine{1954 }
\DoxyCodeLine{1955    stbtt\_\_buf\_seek(\&fdselect, 0);}
\DoxyCodeLine{1956    fmt = stbtt\_\_buf\_get8(\&fdselect);}
\DoxyCodeLine{1957    \textcolor{keywordflow}{if} (fmt == 0) \{}
\DoxyCodeLine{1958       \textcolor{comment}{// untested}}
\DoxyCodeLine{1959       stbtt\_\_buf\_skip(\&fdselect, glyph\_index);}
\DoxyCodeLine{1960       fdselector = stbtt\_\_buf\_get8(\&fdselect);}
\DoxyCodeLine{1961    \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (fmt == 3) \{}
\DoxyCodeLine{1962       nranges = stbtt\_\_buf\_get16(\&fdselect);}
\DoxyCodeLine{1963       start = stbtt\_\_buf\_get16(\&fdselect);}
\DoxyCodeLine{1964       \textcolor{keywordflow}{for} (i = 0; i < nranges; i++) \{}
\DoxyCodeLine{1965          v = stbtt\_\_buf\_get8(\&fdselect);}
\DoxyCodeLine{1966          end = stbtt\_\_buf\_get16(\&fdselect);}
\DoxyCodeLine{1967          \textcolor{keywordflow}{if} (glyph\_index >= start \&\& glyph\_index < end) \{}
\DoxyCodeLine{1968             fdselector = v;}
\DoxyCodeLine{1969             \textcolor{keywordflow}{break};}
\DoxyCodeLine{1970          \}}
\DoxyCodeLine{1971          start = end;}
\DoxyCodeLine{1972       \}}
\DoxyCodeLine{1973    \}}
\DoxyCodeLine{1974    \textcolor{keywordflow}{if} (fdselector == -\/1) stbtt\_\_new\_buf(NULL, 0);}
\DoxyCodeLine{1975    \textcolor{keywordflow}{return} stbtt\_\_get\_subrs(info-\/>cff, stbtt\_\_cff\_index\_get(info-\/>fontdicts, fdselector));}
\DoxyCodeLine{1976 \}}
\DoxyCodeLine{1977 }
\DoxyCodeLine{1978 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_run\_charstring(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index, stbtt\_\_csctx *c)}
\DoxyCodeLine{1979 \{}
\DoxyCodeLine{1980    \textcolor{keywordtype}{int} in\_header = 1, maskbits = 0, subr\_stack\_height = 0, sp = 0, v, i, b0;}
\DoxyCodeLine{1981    \textcolor{keywordtype}{int} has\_subrs = 0, clear\_stack;}
\DoxyCodeLine{1982    \textcolor{keywordtype}{float} s[48];}
\DoxyCodeLine{1983    \mbox{\hyperlink{structstbtt____buf}{stbtt\_\_buf}} subr\_stack[10], subrs = info-\/>subrs, b;}
\DoxyCodeLine{1984    \textcolor{keywordtype}{float} f;}
\DoxyCodeLine{1985 }
\DoxyCodeLine{1986 \textcolor{preprocessor}{\#define STBTT\_\_CSERR(s) (0)}}
\DoxyCodeLine{1987 }
\DoxyCodeLine{1988    \textcolor{comment}{// this currently ignores the initial width value, which isn't needed if we have hmtx}}
\DoxyCodeLine{1989    b = stbtt\_\_cff\_index\_get(info-\/>charstrings, glyph\_index);}
\DoxyCodeLine{1990    \textcolor{keywordflow}{while} (b.cursor < b.size) \{}
\DoxyCodeLine{1991       i = 0;}
\DoxyCodeLine{1992       clear\_stack = 1;}
\DoxyCodeLine{1993       b0 = stbtt\_\_buf\_get8(\&b);}
\DoxyCodeLine{1994       \textcolor{keywordflow}{switch} (b0) \{}
\DoxyCodeLine{1995       \textcolor{comment}{// @TODO implement hinting}}
\DoxyCodeLine{1996       \textcolor{keywordflow}{case} 0x13: \textcolor{comment}{// hintmask}}
\DoxyCodeLine{1997       \textcolor{keywordflow}{case} 0x14: \textcolor{comment}{// cntrmask}}
\DoxyCodeLine{1998          \textcolor{keywordflow}{if} (in\_header)}
\DoxyCodeLine{1999             maskbits += (sp / 2); \textcolor{comment}{// implicit "{}vstem"{}}}
\DoxyCodeLine{2000          in\_header = 0;}
\DoxyCodeLine{2001          stbtt\_\_buf\_skip(\&b, (maskbits + 7) / 8);}
\DoxyCodeLine{2002          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2003 }
\DoxyCodeLine{2004       \textcolor{keywordflow}{case} 0x01: \textcolor{comment}{// hstem}}
\DoxyCodeLine{2005       \textcolor{keywordflow}{case} 0x03: \textcolor{comment}{// vstem}}
\DoxyCodeLine{2006       \textcolor{keywordflow}{case} 0x12: \textcolor{comment}{// hstemhm}}
\DoxyCodeLine{2007       \textcolor{keywordflow}{case} 0x17: \textcolor{comment}{// vstemhm}}
\DoxyCodeLine{2008          maskbits += (sp / 2);}
\DoxyCodeLine{2009          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2010 }
\DoxyCodeLine{2011       \textcolor{keywordflow}{case} 0x15: \textcolor{comment}{// rmoveto}}
\DoxyCodeLine{2012          in\_header = 0;}
\DoxyCodeLine{2013          \textcolor{keywordflow}{if} (sp < 2) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}rmoveto stack"{}});}
\DoxyCodeLine{2014          stbtt\_\_csctx\_rmove\_to(c, s[sp-\/2], s[sp-\/1]);}
\DoxyCodeLine{2015          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2016       \textcolor{keywordflow}{case} 0x04: \textcolor{comment}{// vmoveto}}
\DoxyCodeLine{2017          in\_header = 0;}
\DoxyCodeLine{2018          \textcolor{keywordflow}{if} (sp < 1) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}vmoveto stack"{}});}
\DoxyCodeLine{2019          stbtt\_\_csctx\_rmove\_to(c, 0, s[sp-\/1]);}
\DoxyCodeLine{2020          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2021       \textcolor{keywordflow}{case} 0x16: \textcolor{comment}{// hmoveto}}
\DoxyCodeLine{2022          in\_header = 0;}
\DoxyCodeLine{2023          \textcolor{keywordflow}{if} (sp < 1) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}hmoveto stack"{}});}
\DoxyCodeLine{2024          stbtt\_\_csctx\_rmove\_to(c, s[sp-\/1], 0);}
\DoxyCodeLine{2025          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2026 }
\DoxyCodeLine{2027       \textcolor{keywordflow}{case} 0x05: \textcolor{comment}{// rlineto}}
\DoxyCodeLine{2028          \textcolor{keywordflow}{if} (sp < 2) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}rlineto stack"{}});}
\DoxyCodeLine{2029          \textcolor{keywordflow}{for} (; i + 1 < sp; i += 2)}
\DoxyCodeLine{2030             stbtt\_\_csctx\_rline\_to(c, s[i], s[i+1]);}
\DoxyCodeLine{2031          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2032 }
\DoxyCodeLine{2033       \textcolor{comment}{// hlineto/vlineto and vhcurveto/hvcurveto alternate horizontal and vertical}}
\DoxyCodeLine{2034       \textcolor{comment}{// starting from a different place.}}
\DoxyCodeLine{2035 }
\DoxyCodeLine{2036       \textcolor{keywordflow}{case} 0x07: \textcolor{comment}{// vlineto}}
\DoxyCodeLine{2037          \textcolor{keywordflow}{if} (sp < 1) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}vlineto stack"{}});}
\DoxyCodeLine{2038          \textcolor{keywordflow}{goto} vlineto;}
\DoxyCodeLine{2039       \textcolor{keywordflow}{case} 0x06: \textcolor{comment}{// hlineto}}
\DoxyCodeLine{2040          \textcolor{keywordflow}{if} (sp < 1) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}hlineto stack"{}});}
\DoxyCodeLine{2041          \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{2042             \textcolor{keywordflow}{if} (i >= sp) \textcolor{keywordflow}{break};}
\DoxyCodeLine{2043             stbtt\_\_csctx\_rline\_to(c, s[i], 0);}
\DoxyCodeLine{2044             i++;}
\DoxyCodeLine{2045       vlineto:}
\DoxyCodeLine{2046             \textcolor{keywordflow}{if} (i >= sp) \textcolor{keywordflow}{break};}
\DoxyCodeLine{2047             stbtt\_\_csctx\_rline\_to(c, 0, s[i]);}
\DoxyCodeLine{2048             i++;}
\DoxyCodeLine{2049          \}}
\DoxyCodeLine{2050          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2051 }
\DoxyCodeLine{2052       \textcolor{keywordflow}{case} 0x1F: \textcolor{comment}{// hvcurveto}}
\DoxyCodeLine{2053          \textcolor{keywordflow}{if} (sp < 4) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}hvcurveto stack"{}});}
\DoxyCodeLine{2054          \textcolor{keywordflow}{goto} hvcurveto;}
\DoxyCodeLine{2055       \textcolor{keywordflow}{case} 0x1E: \textcolor{comment}{// vhcurveto}}
\DoxyCodeLine{2056          \textcolor{keywordflow}{if} (sp < 4) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}vhcurveto stack"{}});}
\DoxyCodeLine{2057          \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{2058             \textcolor{keywordflow}{if} (i + 3 >= sp) \textcolor{keywordflow}{break};}
\DoxyCodeLine{2059             stbtt\_\_csctx\_rccurve\_to(c, 0, s[i], s[i+1], s[i+2], s[i+3], (sp -\/ i == 5) ? s[i + 4] : 0.0f);}
\DoxyCodeLine{2060             i += 4;}
\DoxyCodeLine{2061       hvcurveto:}
\DoxyCodeLine{2062             \textcolor{keywordflow}{if} (i + 3 >= sp) \textcolor{keywordflow}{break};}
\DoxyCodeLine{2063             stbtt\_\_csctx\_rccurve\_to(c, s[i], 0, s[i+1], s[i+2], (sp -\/ i == 5) ? s[i+4] : 0.0f, s[i+3]);}
\DoxyCodeLine{2064             i += 4;}
\DoxyCodeLine{2065          \}}
\DoxyCodeLine{2066          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2067 }
\DoxyCodeLine{2068       \textcolor{keywordflow}{case} 0x08: \textcolor{comment}{// rrcurveto}}
\DoxyCodeLine{2069          \textcolor{keywordflow}{if} (sp < 6) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}rcurveline stack"{}});}
\DoxyCodeLine{2070          \textcolor{keywordflow}{for} (; i + 5 < sp; i += 6)}
\DoxyCodeLine{2071             stbtt\_\_csctx\_rccurve\_to(c, s[i], s[i+1], s[i+2], s[i+3], s[i+4], s[i+5]);}
\DoxyCodeLine{2072          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2073 }
\DoxyCodeLine{2074       \textcolor{keywordflow}{case} 0x18: \textcolor{comment}{// rcurveline}}
\DoxyCodeLine{2075          \textcolor{keywordflow}{if} (sp < 8) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}rcurveline stack"{}});}
\DoxyCodeLine{2076          \textcolor{keywordflow}{for} (; i + 5 < sp -\/ 2; i += 6)}
\DoxyCodeLine{2077             stbtt\_\_csctx\_rccurve\_to(c, s[i], s[i+1], s[i+2], s[i+3], s[i+4], s[i+5]);}
\DoxyCodeLine{2078          \textcolor{keywordflow}{if} (i + 1 >= sp) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}rcurveline stack"{}});}
\DoxyCodeLine{2079          stbtt\_\_csctx\_rline\_to(c, s[i], s[i+1]);}
\DoxyCodeLine{2080          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2081 }
\DoxyCodeLine{2082       \textcolor{keywordflow}{case} 0x19: \textcolor{comment}{// rlinecurve}}
\DoxyCodeLine{2083          \textcolor{keywordflow}{if} (sp < 8) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}rlinecurve stack"{}});}
\DoxyCodeLine{2084          \textcolor{keywordflow}{for} (; i + 1 < sp -\/ 6; i += 2)}
\DoxyCodeLine{2085             stbtt\_\_csctx\_rline\_to(c, s[i], s[i+1]);}
\DoxyCodeLine{2086          \textcolor{keywordflow}{if} (i + 5 >= sp) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}rlinecurve stack"{}});}
\DoxyCodeLine{2087          stbtt\_\_csctx\_rccurve\_to(c, s[i], s[i+1], s[i+2], s[i+3], s[i+4], s[i+5]);}
\DoxyCodeLine{2088          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2089 }
\DoxyCodeLine{2090       \textcolor{keywordflow}{case} 0x1A: \textcolor{comment}{// vvcurveto}}
\DoxyCodeLine{2091       \textcolor{keywordflow}{case} 0x1B: \textcolor{comment}{// hhcurveto}}
\DoxyCodeLine{2092          \textcolor{keywordflow}{if} (sp < 4) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}(vv|hh)curveto stack"{}});}
\DoxyCodeLine{2093          f = 0.0;}
\DoxyCodeLine{2094          \textcolor{keywordflow}{if} (sp \& 1) \{ f = s[i]; i++; \}}
\DoxyCodeLine{2095          \textcolor{keywordflow}{for} (; i + 3 < sp; i += 4) \{}
\DoxyCodeLine{2096             \textcolor{keywordflow}{if} (b0 == 0x1B)}
\DoxyCodeLine{2097                stbtt\_\_csctx\_rccurve\_to(c, s[i], f, s[i+1], s[i+2], s[i+3], 0.0);}
\DoxyCodeLine{2098             \textcolor{keywordflow}{else}}
\DoxyCodeLine{2099                stbtt\_\_csctx\_rccurve\_to(c, f, s[i], s[i+1], s[i+2], 0.0, s[i+3]);}
\DoxyCodeLine{2100             f = 0.0;}
\DoxyCodeLine{2101          \}}
\DoxyCodeLine{2102          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2103 }
\DoxyCodeLine{2104       \textcolor{keywordflow}{case} 0x0A: \textcolor{comment}{// callsubr}}
\DoxyCodeLine{2105          \textcolor{keywordflow}{if} (!has\_subrs) \{}
\DoxyCodeLine{2106             \textcolor{keywordflow}{if} (info-\/>fdselect.size)}
\DoxyCodeLine{2107                subrs = stbtt\_\_cid\_get\_glyph\_subrs(info, glyph\_index);}
\DoxyCodeLine{2108             has\_subrs = 1;}
\DoxyCodeLine{2109          \}}
\DoxyCodeLine{2110          \textcolor{comment}{// fallthrough}}
\DoxyCodeLine{2111       \textcolor{keywordflow}{case} 0x1D: \textcolor{comment}{// callgsubr}}
\DoxyCodeLine{2112          \textcolor{keywordflow}{if} (sp < 1) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}call(g|)subr stack"{}});}
\DoxyCodeLine{2113          v = (int) s[-\/-\/sp];}
\DoxyCodeLine{2114          \textcolor{keywordflow}{if} (subr\_stack\_height >= 10) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}recursion limit"{}});}
\DoxyCodeLine{2115          subr\_stack[subr\_stack\_height++] = b;}
\DoxyCodeLine{2116          b = stbtt\_\_get\_subr(b0 == 0x0A ? subrs : info-\/>gsubrs, v);}
\DoxyCodeLine{2117          \textcolor{keywordflow}{if} (b.size == 0) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}subr not found"{}});}
\DoxyCodeLine{2118          b.cursor = 0;}
\DoxyCodeLine{2119          clear\_stack = 0;}
\DoxyCodeLine{2120          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2121 }
\DoxyCodeLine{2122       \textcolor{keywordflow}{case} 0x0B: \textcolor{comment}{// return}}
\DoxyCodeLine{2123          \textcolor{keywordflow}{if} (subr\_stack\_height <= 0) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}return outside subr"{}});}
\DoxyCodeLine{2124          b = subr\_stack[-\/-\/subr\_stack\_height];}
\DoxyCodeLine{2125          clear\_stack = 0;}
\DoxyCodeLine{2126          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2127 }
\DoxyCodeLine{2128       \textcolor{keywordflow}{case} 0x0E: \textcolor{comment}{// endchar}}
\DoxyCodeLine{2129          stbtt\_\_csctx\_close\_shape(c);}
\DoxyCodeLine{2130          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2131 }
\DoxyCodeLine{2132       \textcolor{keywordflow}{case} 0x0C: \{ \textcolor{comment}{// two-\/byte escape}}
\DoxyCodeLine{2133          \textcolor{keywordtype}{float} dx1, dx2, dx3, dx4, dx5, dx6, dy1, dy2, dy3, dy4, dy5, dy6;}
\DoxyCodeLine{2134          \textcolor{keywordtype}{float} dx, dy;}
\DoxyCodeLine{2135          \textcolor{keywordtype}{int} b1 = stbtt\_\_buf\_get8(\&b);}
\DoxyCodeLine{2136          \textcolor{keywordflow}{switch} (b1) \{}
\DoxyCodeLine{2137          \textcolor{comment}{// @TODO These "{}flex"{} implementations ignore the flex-\/depth and resolution,}}
\DoxyCodeLine{2138          \textcolor{comment}{// and always draw beziers.}}
\DoxyCodeLine{2139          \textcolor{keywordflow}{case} 0x22: \textcolor{comment}{// hflex}}
\DoxyCodeLine{2140             \textcolor{keywordflow}{if} (sp < 7) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}hflex stack"{}});}
\DoxyCodeLine{2141             dx1 = s[0];}
\DoxyCodeLine{2142             dx2 = s[1];}
\DoxyCodeLine{2143             dy2 = s[2];}
\DoxyCodeLine{2144             dx3 = s[3];}
\DoxyCodeLine{2145             dx4 = s[4];}
\DoxyCodeLine{2146             dx5 = s[5];}
\DoxyCodeLine{2147             dx6 = s[6];}
\DoxyCodeLine{2148             stbtt\_\_csctx\_rccurve\_to(c, dx1, 0, dx2, dy2, dx3, 0);}
\DoxyCodeLine{2149             stbtt\_\_csctx\_rccurve\_to(c, dx4, 0, dx5, -\/dy2, dx6, 0);}
\DoxyCodeLine{2150             \textcolor{keywordflow}{break};}
\DoxyCodeLine{2151 }
\DoxyCodeLine{2152          \textcolor{keywordflow}{case} 0x23: \textcolor{comment}{// flex}}
\DoxyCodeLine{2153             \textcolor{keywordflow}{if} (sp < 13) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}flex stack"{}});}
\DoxyCodeLine{2154             dx1 = s[0];}
\DoxyCodeLine{2155             dy1 = s[1];}
\DoxyCodeLine{2156             dx2 = s[2];}
\DoxyCodeLine{2157             dy2 = s[3];}
\DoxyCodeLine{2158             dx3 = s[4];}
\DoxyCodeLine{2159             dy3 = s[5];}
\DoxyCodeLine{2160             dx4 = s[6];}
\DoxyCodeLine{2161             dy4 = s[7];}
\DoxyCodeLine{2162             dx5 = s[8];}
\DoxyCodeLine{2163             dy5 = s[9];}
\DoxyCodeLine{2164             dx6 = s[10];}
\DoxyCodeLine{2165             dy6 = s[11];}
\DoxyCodeLine{2166             \textcolor{comment}{//fd is s[12]}}
\DoxyCodeLine{2167             stbtt\_\_csctx\_rccurve\_to(c, dx1, dy1, dx2, dy2, dx3, dy3);}
\DoxyCodeLine{2168             stbtt\_\_csctx\_rccurve\_to(c, dx4, dy4, dx5, dy5, dx6, dy6);}
\DoxyCodeLine{2169             \textcolor{keywordflow}{break};}
\DoxyCodeLine{2170 }
\DoxyCodeLine{2171          \textcolor{keywordflow}{case} 0x24: \textcolor{comment}{// hflex1}}
\DoxyCodeLine{2172             \textcolor{keywordflow}{if} (sp < 9) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}hflex1 stack"{}});}
\DoxyCodeLine{2173             dx1 = s[0];}
\DoxyCodeLine{2174             dy1 = s[1];}
\DoxyCodeLine{2175             dx2 = s[2];}
\DoxyCodeLine{2176             dy2 = s[3];}
\DoxyCodeLine{2177             dx3 = s[4];}
\DoxyCodeLine{2178             dx4 = s[5];}
\DoxyCodeLine{2179             dx5 = s[6];}
\DoxyCodeLine{2180             dy5 = s[7];}
\DoxyCodeLine{2181             dx6 = s[8];}
\DoxyCodeLine{2182             stbtt\_\_csctx\_rccurve\_to(c, dx1, dy1, dx2, dy2, dx3, 0);}
\DoxyCodeLine{2183             stbtt\_\_csctx\_rccurve\_to(c, dx4, 0, dx5, dy5, dx6, -\/(dy1+dy2+dy5));}
\DoxyCodeLine{2184             \textcolor{keywordflow}{break};}
\DoxyCodeLine{2185 }
\DoxyCodeLine{2186          \textcolor{keywordflow}{case} 0x25: \textcolor{comment}{// flex1}}
\DoxyCodeLine{2187             \textcolor{keywordflow}{if} (sp < 11) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}flex1 stack"{}});}
\DoxyCodeLine{2188             dx1 = s[0];}
\DoxyCodeLine{2189             dy1 = s[1];}
\DoxyCodeLine{2190             dx2 = s[2];}
\DoxyCodeLine{2191             dy2 = s[3];}
\DoxyCodeLine{2192             dx3 = s[4];}
\DoxyCodeLine{2193             dy3 = s[5];}
\DoxyCodeLine{2194             dx4 = s[6];}
\DoxyCodeLine{2195             dy4 = s[7];}
\DoxyCodeLine{2196             dx5 = s[8];}
\DoxyCodeLine{2197             dy5 = s[9];}
\DoxyCodeLine{2198             dx6 = dy6 = s[10];}
\DoxyCodeLine{2199             dx = dx1+dx2+dx3+dx4+dx5;}
\DoxyCodeLine{2200             dy = dy1+dy2+dy3+dy4+dy5;}
\DoxyCodeLine{2201             \textcolor{keywordflow}{if} (STBTT\_fabs(dx) > STBTT\_fabs(dy))}
\DoxyCodeLine{2202                dy6 = -\/dy;}
\DoxyCodeLine{2203             \textcolor{keywordflow}{else}}
\DoxyCodeLine{2204                dx6 = -\/dx;}
\DoxyCodeLine{2205             stbtt\_\_csctx\_rccurve\_to(c, dx1, dy1, dx2, dy2, dx3, dy3);}
\DoxyCodeLine{2206             stbtt\_\_csctx\_rccurve\_to(c, dx4, dy4, dx5, dy5, dx6, dy6);}
\DoxyCodeLine{2207             \textcolor{keywordflow}{break};}
\DoxyCodeLine{2208 }
\DoxyCodeLine{2209          \textcolor{keywordflow}{default}:}
\DoxyCodeLine{2210             \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}unimplemented"{}});}
\DoxyCodeLine{2211          \}}
\DoxyCodeLine{2212       \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{2213 }
\DoxyCodeLine{2214       \textcolor{keywordflow}{default}:}
\DoxyCodeLine{2215          \textcolor{keywordflow}{if} (b0 != 255 \&\& b0 != 28 \&\& (b0 < 32 || b0 > 254)) \textcolor{comment}{//-\/V560}}
\DoxyCodeLine{2216             \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}reserved operator"{}});}
\DoxyCodeLine{2217 }
\DoxyCodeLine{2218          \textcolor{comment}{// push immediate}}
\DoxyCodeLine{2219          \textcolor{keywordflow}{if} (b0 == 255) \{}
\DoxyCodeLine{2220             f = (float)(stbtt\_int32)stbtt\_\_buf\_get32(\&b) / 0x10000;}
\DoxyCodeLine{2221          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2222             stbtt\_\_buf\_skip(\&b, -\/1);}
\DoxyCodeLine{2223             f = (float)(stbtt\_int16)stbtt\_\_cff\_int(\&b);}
\DoxyCodeLine{2224          \}}
\DoxyCodeLine{2225          \textcolor{keywordflow}{if} (sp >= 48) \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}push stack overflow"{}});}
\DoxyCodeLine{2226          s[sp++] = f;}
\DoxyCodeLine{2227          clear\_stack = 0;}
\DoxyCodeLine{2228          \textcolor{keywordflow}{break};}
\DoxyCodeLine{2229       \}}
\DoxyCodeLine{2230       \textcolor{keywordflow}{if} (clear\_stack) sp = 0;}
\DoxyCodeLine{2231    \}}
\DoxyCodeLine{2232    \textcolor{keywordflow}{return} STBTT\_\_CSERR(\textcolor{stringliteral}{"{}no endchar"{}});}
\DoxyCodeLine{2233 }
\DoxyCodeLine{2234 \textcolor{preprocessor}{\#undef STBTT\_\_CSERR}}
\DoxyCodeLine{2235 \}}
\DoxyCodeLine{2236 }
\DoxyCodeLine{2237 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_GetGlyphShapeT2(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index, \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} **pvertices)}
\DoxyCodeLine{2238 \{}
\DoxyCodeLine{2239    \textcolor{comment}{// runs the charstring twice, once to count and once to output (to avoid realloc)}}
\DoxyCodeLine{2240    stbtt\_\_csctx count\_ctx = STBTT\_\_CSCTX\_INIT(1);}
\DoxyCodeLine{2241    stbtt\_\_csctx output\_ctx = STBTT\_\_CSCTX\_INIT(0);}
\DoxyCodeLine{2242    \textcolor{keywordflow}{if} (stbtt\_\_run\_charstring(info, glyph\_index, \&count\_ctx)) \{}
\DoxyCodeLine{2243       *pvertices = (\mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}}*)STBTT\_malloc(count\_ctx.num\_vertices*\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}}), info-\/>userdata);}
\DoxyCodeLine{2244       output\_ctx.pvertices = *pvertices;}
\DoxyCodeLine{2245       \textcolor{keywordflow}{if} (stbtt\_\_run\_charstring(info, glyph\_index, \&output\_ctx)) \{}
\DoxyCodeLine{2246          STBTT\_assert(output\_ctx.num\_vertices == count\_ctx.num\_vertices);}
\DoxyCodeLine{2247          \textcolor{keywordflow}{return} output\_ctx.num\_vertices;}
\DoxyCodeLine{2248       \}}
\DoxyCodeLine{2249    \}}
\DoxyCodeLine{2250    *pvertices = NULL;}
\DoxyCodeLine{2251    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2252 \}}
\DoxyCodeLine{2253 }
\DoxyCodeLine{2254 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_GetGlyphInfoT2(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index, \textcolor{keywordtype}{int} *x0, \textcolor{keywordtype}{int} *y0, \textcolor{keywordtype}{int} *x1, \textcolor{keywordtype}{int} *y1)}
\DoxyCodeLine{2255 \{}
\DoxyCodeLine{2256    stbtt\_\_csctx c = STBTT\_\_CSCTX\_INIT(1);}
\DoxyCodeLine{2257    \textcolor{keywordtype}{int} r = stbtt\_\_run\_charstring(info, glyph\_index, \&c);}
\DoxyCodeLine{2258    \textcolor{keywordflow}{if} (x0)  *x0 = r ? c.min\_x : 0;}
\DoxyCodeLine{2259    \textcolor{keywordflow}{if} (y0)  *y0 = r ? c.min\_y : 0;}
\DoxyCodeLine{2260    \textcolor{keywordflow}{if} (x1)  *x1 = r ? c.max\_x : 0;}
\DoxyCodeLine{2261    \textcolor{keywordflow}{if} (y1)  *y1 = r ? c.max\_y : 0;}
\DoxyCodeLine{2262    \textcolor{keywordflow}{return} r ? c.num\_vertices : 0;}
\DoxyCodeLine{2263 \}}
\DoxyCodeLine{2264 }
\DoxyCodeLine{2265 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_GetGlyphShape(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index, \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} **pvertices)}
\DoxyCodeLine{2266 \{}
\DoxyCodeLine{2267    \textcolor{keywordflow}{if} (!info-\/>cff.size)}
\DoxyCodeLine{2268       \textcolor{keywordflow}{return} stbtt\_\_GetGlyphShapeTT(info, glyph\_index, pvertices);}
\DoxyCodeLine{2269    \textcolor{keywordflow}{else}}
\DoxyCodeLine{2270       \textcolor{keywordflow}{return} stbtt\_\_GetGlyphShapeT2(info, glyph\_index, pvertices);}
\DoxyCodeLine{2271 \}}
\DoxyCodeLine{2272 }
\DoxyCodeLine{2273 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetGlyphHMetrics(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph\_index, \textcolor{keywordtype}{int} *advanceWidth, \textcolor{keywordtype}{int} *leftSideBearing)}
\DoxyCodeLine{2274 \{}
\DoxyCodeLine{2275    stbtt\_uint16 numOfLongHorMetrics = ttUSHORT(info-\/>data+info-\/>hhea + 34);}
\DoxyCodeLine{2276    \textcolor{keywordflow}{if} (glyph\_index < numOfLongHorMetrics) \{}
\DoxyCodeLine{2277       \textcolor{keywordflow}{if} (advanceWidth)     *advanceWidth    = ttSHORT(info-\/>data + info-\/>hmtx + 4*glyph\_index);}
\DoxyCodeLine{2278       \textcolor{keywordflow}{if} (leftSideBearing)  *leftSideBearing = ttSHORT(info-\/>data + info-\/>hmtx + 4*glyph\_index + 2);}
\DoxyCodeLine{2279    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2280       \textcolor{keywordflow}{if} (advanceWidth)     *advanceWidth    = ttSHORT(info-\/>data + info-\/>hmtx + 4*(numOfLongHorMetrics-\/1));}
\DoxyCodeLine{2281       \textcolor{keywordflow}{if} (leftSideBearing)  *leftSideBearing = ttSHORT(info-\/>data + info-\/>hmtx + 4*numOfLongHorMetrics + 2*(glyph\_index -\/ numOfLongHorMetrics));}
\DoxyCodeLine{2282    \}}
\DoxyCodeLine{2283 \}}
\DoxyCodeLine{2284 }
\DoxyCodeLine{2285 \textcolor{keyword}{static} \textcolor{keywordtype}{int}  stbtt\_\_GetGlyphKernInfoAdvance(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph1, \textcolor{keywordtype}{int} glyph2)}
\DoxyCodeLine{2286 \{}
\DoxyCodeLine{2287    stbtt\_uint8 *data = info-\/>data + info-\/>kern;}
\DoxyCodeLine{2288    stbtt\_uint32 needle, straw;}
\DoxyCodeLine{2289    \textcolor{keywordtype}{int} l, r, m;}
\DoxyCodeLine{2290 }
\DoxyCodeLine{2291    \textcolor{comment}{// we only look at the first table. it must be 'horizontal' and format 0.}}
\DoxyCodeLine{2292    \textcolor{keywordflow}{if} (!info-\/>kern)}
\DoxyCodeLine{2293       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2294    \textcolor{keywordflow}{if} (ttUSHORT(data+2) < 1) \textcolor{comment}{// number of tables, need at least 1}}
\DoxyCodeLine{2295       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2296    \textcolor{keywordflow}{if} (ttUSHORT(data+8) != 1) \textcolor{comment}{// horizontal flag must be set in format}}
\DoxyCodeLine{2297       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2298 }
\DoxyCodeLine{2299    l = 0;}
\DoxyCodeLine{2300    r = ttUSHORT(data+10) -\/ 1;}
\DoxyCodeLine{2301    needle = glyph1 << 16 | glyph2;}
\DoxyCodeLine{2302    \textcolor{keywordflow}{while} (l <= r) \{}
\DoxyCodeLine{2303       m = (l + r) >> 1;}
\DoxyCodeLine{2304       straw = ttULONG(data+18+(m*6)); \textcolor{comment}{// note: unaligned read}}
\DoxyCodeLine{2305       \textcolor{keywordflow}{if} (needle < straw)}
\DoxyCodeLine{2306          r = m -\/ 1;}
\DoxyCodeLine{2307       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (needle > straw)}
\DoxyCodeLine{2308          l = m + 1;}
\DoxyCodeLine{2309       \textcolor{keywordflow}{else}}
\DoxyCodeLine{2310          \textcolor{keywordflow}{return} ttSHORT(data+22+(m*6));}
\DoxyCodeLine{2311    \}}
\DoxyCodeLine{2312    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2313 \}}
\DoxyCodeLine{2314 }
\DoxyCodeLine{2315 \textcolor{keyword}{static} stbtt\_int32  stbtt\_\_GetCoverageIndex(stbtt\_uint8 *coverageTable, \textcolor{keywordtype}{int} glyph)}
\DoxyCodeLine{2316 \{}
\DoxyCodeLine{2317     stbtt\_uint16 coverageFormat = ttUSHORT(coverageTable);}
\DoxyCodeLine{2318     \textcolor{keywordflow}{switch}(coverageFormat) \{}
\DoxyCodeLine{2319         \textcolor{keywordflow}{case} 1: \{}
\DoxyCodeLine{2320             stbtt\_uint16 glyphCount = ttUSHORT(coverageTable + 2);}
\DoxyCodeLine{2321 }
\DoxyCodeLine{2322             \textcolor{comment}{// Binary search.}}
\DoxyCodeLine{2323             stbtt\_int32 l=0, r=glyphCount-\/1, m;}
\DoxyCodeLine{2324             \textcolor{keywordtype}{int} straw, needle=glyph;}
\DoxyCodeLine{2325             \textcolor{keywordflow}{while} (l <= r) \{}
\DoxyCodeLine{2326                 stbtt\_uint8 *glyphArray = coverageTable + 4;}
\DoxyCodeLine{2327                 stbtt\_uint16 glyphID;}
\DoxyCodeLine{2328                 m = (l + r) >> 1;}
\DoxyCodeLine{2329                 glyphID = ttUSHORT(glyphArray + 2 * m);}
\DoxyCodeLine{2330                 straw = glyphID;}
\DoxyCodeLine{2331                 \textcolor{keywordflow}{if} (needle < straw)}
\DoxyCodeLine{2332                     r = m -\/ 1;}
\DoxyCodeLine{2333                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (needle > straw)}
\DoxyCodeLine{2334                     l = m + 1;}
\DoxyCodeLine{2335                 \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2336                      \textcolor{keywordflow}{return} m;}
\DoxyCodeLine{2337                 \}}
\DoxyCodeLine{2338             \}}
\DoxyCodeLine{2339         \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{2340 }
\DoxyCodeLine{2341         \textcolor{keywordflow}{case} 2: \{}
\DoxyCodeLine{2342             stbtt\_uint16 rangeCount = ttUSHORT(coverageTable + 2);}
\DoxyCodeLine{2343             stbtt\_uint8 *rangeArray = coverageTable + 4;}
\DoxyCodeLine{2344 }
\DoxyCodeLine{2345             \textcolor{comment}{// Binary search.}}
\DoxyCodeLine{2346             stbtt\_int32 l=0, r=rangeCount-\/1, m;}
\DoxyCodeLine{2347             \textcolor{keywordtype}{int} strawStart, strawEnd, needle=glyph;}
\DoxyCodeLine{2348             \textcolor{keywordflow}{while} (l <= r) \{}
\DoxyCodeLine{2349                 stbtt\_uint8 *rangeRecord;}
\DoxyCodeLine{2350                 m = (l + r) >> 1;}
\DoxyCodeLine{2351                 rangeRecord = rangeArray + 6 * m;}
\DoxyCodeLine{2352                 strawStart = ttUSHORT(rangeRecord);}
\DoxyCodeLine{2353                 strawEnd = ttUSHORT(rangeRecord + 2);}
\DoxyCodeLine{2354                 \textcolor{keywordflow}{if} (needle < strawStart)}
\DoxyCodeLine{2355                     r = m -\/ 1;}
\DoxyCodeLine{2356                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (needle > strawEnd)}
\DoxyCodeLine{2357                     l = m + 1;}
\DoxyCodeLine{2358                 \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2359                     stbtt\_uint16 startCoverageIndex = ttUSHORT(rangeRecord + 4);}
\DoxyCodeLine{2360                     \textcolor{keywordflow}{return} startCoverageIndex + glyph -\/ strawStart;}
\DoxyCodeLine{2361                 \}}
\DoxyCodeLine{2362             \}}
\DoxyCodeLine{2363         \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{2364 }
\DoxyCodeLine{2365         \textcolor{keywordflow}{default}: \{}
\DoxyCodeLine{2366             \textcolor{comment}{// There are no other cases.}}
\DoxyCodeLine{2367             STBTT\_assert(0);}
\DoxyCodeLine{2368         \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{2369     \}}
\DoxyCodeLine{2370 }
\DoxyCodeLine{2371     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{2372 \}}
\DoxyCodeLine{2373 }
\DoxyCodeLine{2374 \textcolor{keyword}{static} stbtt\_int32  stbtt\_\_GetGlyphClass(stbtt\_uint8 *classDefTable, \textcolor{keywordtype}{int} glyph)}
\DoxyCodeLine{2375 \{}
\DoxyCodeLine{2376     stbtt\_uint16 classDefFormat = ttUSHORT(classDefTable);}
\DoxyCodeLine{2377     \textcolor{keywordflow}{switch}(classDefFormat)}
\DoxyCodeLine{2378     \{}
\DoxyCodeLine{2379         \textcolor{keywordflow}{case} 1: \{}
\DoxyCodeLine{2380             stbtt\_uint16 startGlyphID = ttUSHORT(classDefTable + 2);}
\DoxyCodeLine{2381             stbtt\_uint16 glyphCount = ttUSHORT(classDefTable + 4);}
\DoxyCodeLine{2382             stbtt\_uint8 *classDef1ValueArray = classDefTable + 6;}
\DoxyCodeLine{2383 }
\DoxyCodeLine{2384             \textcolor{keywordflow}{if} (glyph >= startGlyphID \&\& glyph < startGlyphID + glyphCount)}
\DoxyCodeLine{2385                 \textcolor{keywordflow}{return} (stbtt\_int32)ttUSHORT(classDef1ValueArray + 2 * (glyph -\/ startGlyphID));}
\DoxyCodeLine{2386 }
\DoxyCodeLine{2387             \textcolor{comment}{// [DEAR IMGUI] Commented to fix static analyzer warning}}
\DoxyCodeLine{2388             \textcolor{comment}{//classDefTable = classDef1ValueArray + 2 * glyphCount;}}
\DoxyCodeLine{2389         \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{2390 }
\DoxyCodeLine{2391         \textcolor{keywordflow}{case} 2: \{}
\DoxyCodeLine{2392             stbtt\_uint16 classRangeCount = ttUSHORT(classDefTable + 2);}
\DoxyCodeLine{2393             stbtt\_uint8 *classRangeRecords = classDefTable + 4;}
\DoxyCodeLine{2394 }
\DoxyCodeLine{2395             \textcolor{comment}{// Binary search.}}
\DoxyCodeLine{2396             stbtt\_int32 l=0, r=classRangeCount-\/1, m;}
\DoxyCodeLine{2397             \textcolor{keywordtype}{int} strawStart, strawEnd, needle=glyph;}
\DoxyCodeLine{2398             \textcolor{keywordflow}{while} (l <= r) \{}
\DoxyCodeLine{2399                 stbtt\_uint8 *classRangeRecord;}
\DoxyCodeLine{2400                 m = (l + r) >> 1;}
\DoxyCodeLine{2401                 classRangeRecord = classRangeRecords + 6 * m;}
\DoxyCodeLine{2402                 strawStart = ttUSHORT(classRangeRecord);}
\DoxyCodeLine{2403                 strawEnd = ttUSHORT(classRangeRecord + 2);}
\DoxyCodeLine{2404                 \textcolor{keywordflow}{if} (needle < strawStart)}
\DoxyCodeLine{2405                     r = m -\/ 1;}
\DoxyCodeLine{2406                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (needle > strawEnd)}
\DoxyCodeLine{2407                     l = m + 1;}
\DoxyCodeLine{2408                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{2409                     \textcolor{keywordflow}{return} (stbtt\_int32)ttUSHORT(classRangeRecord + 4);}
\DoxyCodeLine{2410             \}}
\DoxyCodeLine{2411 }
\DoxyCodeLine{2412             \textcolor{comment}{// [DEAR IMGUI] Commented to fix static analyzer warning}}
\DoxyCodeLine{2413             \textcolor{comment}{//classDefTable = classRangeRecords + 6 * classRangeCount;}}
\DoxyCodeLine{2414         \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{2415 }
\DoxyCodeLine{2416         \textcolor{keywordflow}{default}: \{}
\DoxyCodeLine{2417             \textcolor{comment}{// There are no other cases.}}
\DoxyCodeLine{2418             STBTT\_assert(0);}
\DoxyCodeLine{2419         \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{2420     \}}
\DoxyCodeLine{2421 }
\DoxyCodeLine{2422     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{2423 \}}
\DoxyCodeLine{2424 }
\DoxyCodeLine{2425 \textcolor{comment}{// Define to STBTT\_assert(x) if you want to break on unimplemented formats.}}
\DoxyCodeLine{2426 \textcolor{preprocessor}{\#define STBTT\_GPOS\_TODO\_assert(x)}}
\DoxyCodeLine{2427 }
\DoxyCodeLine{2428 \textcolor{keyword}{static} stbtt\_int32  stbtt\_\_GetGlyphGPOSInfoAdvance(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} glyph1, \textcolor{keywordtype}{int} glyph2)}
\DoxyCodeLine{2429 \{}
\DoxyCodeLine{2430     stbtt\_uint16 lookupListOffset;}
\DoxyCodeLine{2431     stbtt\_uint8 *lookupList;}
\DoxyCodeLine{2432     stbtt\_uint16 lookupCount;}
\DoxyCodeLine{2433     stbtt\_uint8 *data;}
\DoxyCodeLine{2434     stbtt\_int32 i;}
\DoxyCodeLine{2435 }
\DoxyCodeLine{2436     \textcolor{keywordflow}{if} (!info-\/>gpos) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2437 }
\DoxyCodeLine{2438     data = info-\/>data + info-\/>gpos;}
\DoxyCodeLine{2439 }
\DoxyCodeLine{2440     \textcolor{keywordflow}{if} (ttUSHORT(data+0) != 1) \textcolor{keywordflow}{return} 0; \textcolor{comment}{// Major version 1}}
\DoxyCodeLine{2441     \textcolor{keywordflow}{if} (ttUSHORT(data+2) != 0) \textcolor{keywordflow}{return} 0; \textcolor{comment}{// Minor version 0}}
\DoxyCodeLine{2442 }
\DoxyCodeLine{2443     lookupListOffset = ttUSHORT(data+8);}
\DoxyCodeLine{2444     lookupList = data + lookupListOffset;}
\DoxyCodeLine{2445     lookupCount = ttUSHORT(lookupList);}
\DoxyCodeLine{2446 }
\DoxyCodeLine{2447     \textcolor{keywordflow}{for} (i=0; i<lookupCount; ++i) \{}
\DoxyCodeLine{2448         stbtt\_uint16 lookupOffset = ttUSHORT(lookupList + 2 + 2 * i);}
\DoxyCodeLine{2449         stbtt\_uint8 *lookupTable = lookupList + lookupOffset;}
\DoxyCodeLine{2450 }
\DoxyCodeLine{2451         stbtt\_uint16 lookupType = ttUSHORT(lookupTable);}
\DoxyCodeLine{2452         stbtt\_uint16 subTableCount = ttUSHORT(lookupTable + 4);}
\DoxyCodeLine{2453         stbtt\_uint8 *subTableOffsets = lookupTable + 6;}
\DoxyCodeLine{2454         \textcolor{keywordflow}{switch}(lookupType) \{}
\DoxyCodeLine{2455             \textcolor{keywordflow}{case} 2: \{ \textcolor{comment}{// Pair Adjustment Positioning Subtable}}
\DoxyCodeLine{2456                 stbtt\_int32 sti;}
\DoxyCodeLine{2457                 \textcolor{keywordflow}{for} (sti=0; sti<subTableCount; sti++) \{}
\DoxyCodeLine{2458                     stbtt\_uint16 subtableOffset = ttUSHORT(subTableOffsets + 2 * sti);}
\DoxyCodeLine{2459                     stbtt\_uint8 *table = lookupTable + subtableOffset;}
\DoxyCodeLine{2460                     stbtt\_uint16 posFormat = ttUSHORT(table);}
\DoxyCodeLine{2461                     stbtt\_uint16 coverageOffset = ttUSHORT(table + 2);}
\DoxyCodeLine{2462                     stbtt\_int32 coverageIndex = stbtt\_\_GetCoverageIndex(table + coverageOffset, glyph1);}
\DoxyCodeLine{2463                     \textcolor{keywordflow}{if} (coverageIndex == -\/1) \textcolor{keywordflow}{continue};}
\DoxyCodeLine{2464 }
\DoxyCodeLine{2465                     \textcolor{keywordflow}{switch} (posFormat) \{}
\DoxyCodeLine{2466                         \textcolor{keywordflow}{case} 1: \{}
\DoxyCodeLine{2467                             stbtt\_int32 l, r, m;}
\DoxyCodeLine{2468                             \textcolor{keywordtype}{int} straw, needle;}
\DoxyCodeLine{2469                             stbtt\_uint16 valueFormat1 = ttUSHORT(table + 4);}
\DoxyCodeLine{2470                             stbtt\_uint16 valueFormat2 = ttUSHORT(table + 6);}
\DoxyCodeLine{2471                             stbtt\_int32 valueRecordPairSizeInBytes = 2;}
\DoxyCodeLine{2472                             stbtt\_uint16 pairSetCount = ttUSHORT(table + 8);}
\DoxyCodeLine{2473                             stbtt\_uint16 pairPosOffset = ttUSHORT(table + 10 + 2 * coverageIndex);}
\DoxyCodeLine{2474                             stbtt\_uint8 *pairValueTable = table + pairPosOffset;}
\DoxyCodeLine{2475                             stbtt\_uint16 pairValueCount = ttUSHORT(pairValueTable);}
\DoxyCodeLine{2476                             stbtt\_uint8 *pairValueArray = pairValueTable + 2;}
\DoxyCodeLine{2477                             \textcolor{comment}{// TODO: Support more formats.}}
\DoxyCodeLine{2478                             STBTT\_GPOS\_TODO\_assert(valueFormat1 == 4);}
\DoxyCodeLine{2479                             \textcolor{keywordflow}{if} (valueFormat1 != 4) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2480                             STBTT\_GPOS\_TODO\_assert(valueFormat2 == 0);}
\DoxyCodeLine{2481                             \textcolor{keywordflow}{if} (valueFormat2 != 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2482 }
\DoxyCodeLine{2483                             STBTT\_assert(coverageIndex < pairSetCount);}
\DoxyCodeLine{2484                             STBTT\_\_NOTUSED(pairSetCount);}
\DoxyCodeLine{2485 }
\DoxyCodeLine{2486                             needle=glyph2;}
\DoxyCodeLine{2487                             r=pairValueCount-\/1;}
\DoxyCodeLine{2488                             l=0;}
\DoxyCodeLine{2489 }
\DoxyCodeLine{2490                             \textcolor{comment}{// Binary search.}}
\DoxyCodeLine{2491                             \textcolor{keywordflow}{while} (l <= r) \{}
\DoxyCodeLine{2492                                 stbtt\_uint16 secondGlyph;}
\DoxyCodeLine{2493                                 stbtt\_uint8 *pairValue;}
\DoxyCodeLine{2494                                 m = (l + r) >> 1;}
\DoxyCodeLine{2495                                 pairValue = pairValueArray + (2 + valueRecordPairSizeInBytes) * m;}
\DoxyCodeLine{2496                                 secondGlyph = ttUSHORT(pairValue);}
\DoxyCodeLine{2497                                 straw = secondGlyph;}
\DoxyCodeLine{2498                                 \textcolor{keywordflow}{if} (needle < straw)}
\DoxyCodeLine{2499                                     r = m -\/ 1;}
\DoxyCodeLine{2500                                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (needle > straw)}
\DoxyCodeLine{2501                                     l = m + 1;}
\DoxyCodeLine{2502                                 \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2503                                     stbtt\_int16 xAdvance = ttSHORT(pairValue + 2);}
\DoxyCodeLine{2504                                     \textcolor{keywordflow}{return} xAdvance;}
\DoxyCodeLine{2505                                 \}}
\DoxyCodeLine{2506                             \}}
\DoxyCodeLine{2507                         \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{2508 }
\DoxyCodeLine{2509                         \textcolor{keywordflow}{case} 2: \{}
\DoxyCodeLine{2510                             stbtt\_uint16 valueFormat1 = ttUSHORT(table + 4);}
\DoxyCodeLine{2511                             stbtt\_uint16 valueFormat2 = ttUSHORT(table + 6);}
\DoxyCodeLine{2512 }
\DoxyCodeLine{2513                             stbtt\_uint16 classDef1Offset = ttUSHORT(table + 8);}
\DoxyCodeLine{2514                             stbtt\_uint16 classDef2Offset = ttUSHORT(table + 10);}
\DoxyCodeLine{2515                             \textcolor{keywordtype}{int} glyph1class = stbtt\_\_GetGlyphClass(table + classDef1Offset, glyph1);}
\DoxyCodeLine{2516                             \textcolor{keywordtype}{int} glyph2class = stbtt\_\_GetGlyphClass(table + classDef2Offset, glyph2);}
\DoxyCodeLine{2517 }
\DoxyCodeLine{2518                             stbtt\_uint16 class1Count = ttUSHORT(table + 12);}
\DoxyCodeLine{2519                             stbtt\_uint16 class2Count = ttUSHORT(table + 14);}
\DoxyCodeLine{2520                             STBTT\_assert(glyph1class < class1Count);}
\DoxyCodeLine{2521                             STBTT\_assert(glyph2class < class2Count);}
\DoxyCodeLine{2522 }
\DoxyCodeLine{2523                             \textcolor{comment}{// TODO: Support more formats.}}
\DoxyCodeLine{2524                             STBTT\_GPOS\_TODO\_assert(valueFormat1 == 4);}
\DoxyCodeLine{2525                             \textcolor{keywordflow}{if} (valueFormat1 != 4) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2526                             STBTT\_GPOS\_TODO\_assert(valueFormat2 == 0);}
\DoxyCodeLine{2527                             \textcolor{keywordflow}{if} (valueFormat2 != 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2528 }
\DoxyCodeLine{2529                             \textcolor{keywordflow}{if} (glyph1class >= 0 \&\& glyph1class < class1Count \&\& glyph2class >= 0 \&\& glyph2class < class2Count) \{}
\DoxyCodeLine{2530                                 stbtt\_uint8 *class1Records = table + 16;}
\DoxyCodeLine{2531                                 stbtt\_uint8 *class2Records = class1Records + 2 * (glyph1class * class2Count);}
\DoxyCodeLine{2532                                 stbtt\_int16 xAdvance = ttSHORT(class2Records + 2 * glyph2class);}
\DoxyCodeLine{2533                                 \textcolor{keywordflow}{return} xAdvance;}
\DoxyCodeLine{2534                             \}}
\DoxyCodeLine{2535                         \} \textcolor{keywordflow}{break};}
\DoxyCodeLine{2536 }
\DoxyCodeLine{2537                         \textcolor{keywordflow}{default}: \{}
\DoxyCodeLine{2538                             \textcolor{comment}{// There are no other cases.}}
\DoxyCodeLine{2539                             STBTT\_assert(0);}
\DoxyCodeLine{2540                             \textcolor{keywordflow}{break};}
\DoxyCodeLine{2541                         \} \textcolor{comment}{// [DEAR IMGUI] removed ;}}
\DoxyCodeLine{2542                     \}}
\DoxyCodeLine{2543                 \}}
\DoxyCodeLine{2544                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{2545             \} \textcolor{comment}{// [DEAR IMGUI] removed ;}}
\DoxyCodeLine{2546 }
\DoxyCodeLine{2547             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{2548                 \textcolor{comment}{// TODO: Implement other stuff.}}
\DoxyCodeLine{2549                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{2550         \}}
\DoxyCodeLine{2551     \}}
\DoxyCodeLine{2552 }
\DoxyCodeLine{2553     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2554 \}}
\DoxyCodeLine{2555 }
\DoxyCodeLine{2556 STBTT\_DEF \textcolor{keywordtype}{int}  stbtt\_GetGlyphKernAdvance(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} g1, \textcolor{keywordtype}{int} g2)}
\DoxyCodeLine{2557 \{}
\DoxyCodeLine{2558    \textcolor{keywordtype}{int} xAdvance = 0;}
\DoxyCodeLine{2559 }
\DoxyCodeLine{2560    \textcolor{keywordflow}{if} (info-\/>gpos)}
\DoxyCodeLine{2561       xAdvance += stbtt\_\_GetGlyphGPOSInfoAdvance(info, g1, g2);}
\DoxyCodeLine{2562 }
\DoxyCodeLine{2563    \textcolor{keywordflow}{if} (info-\/>kern)}
\DoxyCodeLine{2564       xAdvance += stbtt\_\_GetGlyphKernInfoAdvance(info, g1, g2);}
\DoxyCodeLine{2565 }
\DoxyCodeLine{2566    \textcolor{keywordflow}{return} xAdvance;}
\DoxyCodeLine{2567 \}}
\DoxyCodeLine{2568 }
\DoxyCodeLine{2569 STBTT\_DEF \textcolor{keywordtype}{int}  stbtt\_GetCodepointKernAdvance(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} ch1, \textcolor{keywordtype}{int} ch2)}
\DoxyCodeLine{2570 \{}
\DoxyCodeLine{2571    \textcolor{keywordflow}{if} (!info-\/>kern \&\& !info-\/>gpos) \textcolor{comment}{// if no kerning table, don't waste time looking up both codepoint-\/>glyphs}}
\DoxyCodeLine{2572       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2573    \textcolor{keywordflow}{return} stbtt\_GetGlyphKernAdvance(info, stbtt\_FindGlyphIndex(info,ch1), stbtt\_FindGlyphIndex(info,ch2));}
\DoxyCodeLine{2574 \}}
\DoxyCodeLine{2575 }
\DoxyCodeLine{2576 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetCodepointHMetrics(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{int} *advanceWidth, \textcolor{keywordtype}{int} *leftSideBearing)}
\DoxyCodeLine{2577 \{}
\DoxyCodeLine{2578    stbtt\_GetGlyphHMetrics(info, stbtt\_FindGlyphIndex(info,codepoint), advanceWidth, leftSideBearing);}
\DoxyCodeLine{2579 \}}
\DoxyCodeLine{2580 }
\DoxyCodeLine{2581 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetFontVMetrics(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} *ascent, \textcolor{keywordtype}{int} *descent, \textcolor{keywordtype}{int} *lineGap)}
\DoxyCodeLine{2582 \{}
\DoxyCodeLine{2583    \textcolor{keywordflow}{if} (ascent ) *ascent  = ttSHORT(info-\/>data+info-\/>hhea + 4);}
\DoxyCodeLine{2584    \textcolor{keywordflow}{if} (descent) *descent = ttSHORT(info-\/>data+info-\/>hhea + 6);}
\DoxyCodeLine{2585    \textcolor{keywordflow}{if} (lineGap) *lineGap = ttSHORT(info-\/>data+info-\/>hhea + 8);}
\DoxyCodeLine{2586 \}}
\DoxyCodeLine{2587 }
\DoxyCodeLine{2588 STBTT\_DEF \textcolor{keywordtype}{int}  stbtt\_GetFontVMetricsOS2(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} *typoAscent, \textcolor{keywordtype}{int} *typoDescent, \textcolor{keywordtype}{int} *typoLineGap)}
\DoxyCodeLine{2589 \{}
\DoxyCodeLine{2590    \textcolor{keywordtype}{int} tab = stbtt\_\_find\_table(info-\/>data, info-\/>fontstart, \textcolor{stringliteral}{"{}OS/2"{}});}
\DoxyCodeLine{2591    \textcolor{keywordflow}{if} (!tab)}
\DoxyCodeLine{2592       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{2593    \textcolor{keywordflow}{if} (typoAscent ) *typoAscent  = ttSHORT(info-\/>data+tab + 68);}
\DoxyCodeLine{2594    \textcolor{keywordflow}{if} (typoDescent) *typoDescent = ttSHORT(info-\/>data+tab + 70);}
\DoxyCodeLine{2595    \textcolor{keywordflow}{if} (typoLineGap) *typoLineGap = ttSHORT(info-\/>data+tab + 72);}
\DoxyCodeLine{2596    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{2597 \}}
\DoxyCodeLine{2598 }
\DoxyCodeLine{2599 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetFontBoundingBox(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{int} *x0, \textcolor{keywordtype}{int} *y0, \textcolor{keywordtype}{int} *x1, \textcolor{keywordtype}{int} *y1)}
\DoxyCodeLine{2600 \{}
\DoxyCodeLine{2601    *x0 = ttSHORT(info-\/>data + info-\/>head + 36);}
\DoxyCodeLine{2602    *y0 = ttSHORT(info-\/>data + info-\/>head + 38);}
\DoxyCodeLine{2603    *x1 = ttSHORT(info-\/>data + info-\/>head + 40);}
\DoxyCodeLine{2604    *y1 = ttSHORT(info-\/>data + info-\/>head + 42);}
\DoxyCodeLine{2605 \}}
\DoxyCodeLine{2606 }
\DoxyCodeLine{2607 STBTT\_DEF \textcolor{keywordtype}{float} stbtt\_ScaleForPixelHeight(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} height)}
\DoxyCodeLine{2608 \{}
\DoxyCodeLine{2609    \textcolor{keywordtype}{int} fheight = ttSHORT(info-\/>data + info-\/>hhea + 4) -\/ ttSHORT(info-\/>data + info-\/>hhea + 6);}
\DoxyCodeLine{2610    \textcolor{keywordflow}{return} (\textcolor{keywordtype}{float}) height / fheight;}
\DoxyCodeLine{2611 \}}
\DoxyCodeLine{2612 }
\DoxyCodeLine{2613 STBTT\_DEF \textcolor{keywordtype}{float} stbtt\_ScaleForMappingEmToPixels(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} pixels)}
\DoxyCodeLine{2614 \{}
\DoxyCodeLine{2615    \textcolor{keywordtype}{int} unitsPerEm = ttUSHORT(info-\/>data + info-\/>head + 18);}
\DoxyCodeLine{2616    \textcolor{keywordflow}{return} pixels / unitsPerEm;}
\DoxyCodeLine{2617 \}}
\DoxyCodeLine{2618 }
\DoxyCodeLine{2619 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_FreeShape(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *v)}
\DoxyCodeLine{2620 \{}
\DoxyCodeLine{2621    STBTT\_free(v, info-\/>userdata);}
\DoxyCodeLine{2622 \}}
\DoxyCodeLine{2623 }
\DoxyCodeLine{2625 \textcolor{comment}{//}}
\DoxyCodeLine{2626 \textcolor{comment}{// antialiasing software rasterizer}}
\DoxyCodeLine{2627 \textcolor{comment}{//}}
\DoxyCodeLine{2628 }
\DoxyCodeLine{2629 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetGlyphBitmapBoxSubpixel(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *font, \textcolor{keywordtype}{int} glyph, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y,\textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} *ix0, \textcolor{keywordtype}{int} *iy0, \textcolor{keywordtype}{int} *ix1, \textcolor{keywordtype}{int} *iy1)}
\DoxyCodeLine{2630 \{}
\DoxyCodeLine{2631    \textcolor{keywordtype}{int} x0=0,y0=0,x1,y1; \textcolor{comment}{// =0 suppresses compiler warning}}
\DoxyCodeLine{2632    \textcolor{keywordflow}{if} (!stbtt\_GetGlyphBox(font, glyph, \&x0,\&y0,\&x1,\&y1)) \{}
\DoxyCodeLine{2633       \textcolor{comment}{// e.g. space character}}
\DoxyCodeLine{2634       \textcolor{keywordflow}{if} (ix0) *ix0 = 0;}
\DoxyCodeLine{2635       \textcolor{keywordflow}{if} (iy0) *iy0 = 0;}
\DoxyCodeLine{2636       \textcolor{keywordflow}{if} (ix1) *ix1 = 0;}
\DoxyCodeLine{2637       \textcolor{keywordflow}{if} (iy1) *iy1 = 0;}
\DoxyCodeLine{2638    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2639       \textcolor{comment}{// move to integral bboxes (treating pixels as little squares, what pixels get touched)?}}
\DoxyCodeLine{2640       \textcolor{keywordflow}{if} (ix0) *ix0 = STBTT\_ifloor( x0 * scale\_x + shift\_x);}
\DoxyCodeLine{2641       \textcolor{keywordflow}{if} (iy0) *iy0 = STBTT\_ifloor(-\/y1 * scale\_y + shift\_y);}
\DoxyCodeLine{2642       \textcolor{keywordflow}{if} (ix1) *ix1 = STBTT\_iceil ( x1 * scale\_x + shift\_x);}
\DoxyCodeLine{2643       \textcolor{keywordflow}{if} (iy1) *iy1 = STBTT\_iceil (-\/y0 * scale\_y + shift\_y);}
\DoxyCodeLine{2644    \}}
\DoxyCodeLine{2645 \}}
\DoxyCodeLine{2646 }
\DoxyCodeLine{2647 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetGlyphBitmapBox(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *font, \textcolor{keywordtype}{int} glyph, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{int} *ix0, \textcolor{keywordtype}{int} *iy0, \textcolor{keywordtype}{int} *ix1, \textcolor{keywordtype}{int} *iy1)}
\DoxyCodeLine{2648 \{}
\DoxyCodeLine{2649    stbtt\_GetGlyphBitmapBoxSubpixel(font, glyph, scale\_x, scale\_y,0.0f,0.0f, ix0, iy0, ix1, iy1);}
\DoxyCodeLine{2650 \}}
\DoxyCodeLine{2651 }
\DoxyCodeLine{2652 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetCodepointBitmapBoxSubpixel(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *font, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} *ix0, \textcolor{keywordtype}{int} *iy0, \textcolor{keywordtype}{int} *ix1, \textcolor{keywordtype}{int} *iy1)}
\DoxyCodeLine{2653 \{}
\DoxyCodeLine{2654    stbtt\_GetGlyphBitmapBoxSubpixel(font, stbtt\_FindGlyphIndex(font,codepoint), scale\_x, scale\_y,shift\_x,shift\_y, ix0,iy0,ix1,iy1);}
\DoxyCodeLine{2655 \}}
\DoxyCodeLine{2656 }
\DoxyCodeLine{2657 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetCodepointBitmapBox(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *font, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{int} *ix0, \textcolor{keywordtype}{int} *iy0, \textcolor{keywordtype}{int} *ix1, \textcolor{keywordtype}{int} *iy1)}
\DoxyCodeLine{2658 \{}
\DoxyCodeLine{2659    stbtt\_GetCodepointBitmapBoxSubpixel(font, codepoint, scale\_x, scale\_y,0.0f,0.0f, ix0,iy0,ix1,iy1);}
\DoxyCodeLine{2660 \}}
\DoxyCodeLine{2661 }
\DoxyCodeLine{2663 \textcolor{comment}{//}}
\DoxyCodeLine{2664 \textcolor{comment}{//  Rasterizer}}
\DoxyCodeLine{2665 }
\DoxyCodeLine{2666 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stbtt\_\_hheap\_chunk}
\DoxyCodeLine{2667 \{}
\DoxyCodeLine{2668    \textcolor{keyword}{struct }stbtt\_\_hheap\_chunk *next;}
\DoxyCodeLine{2669 \} stbtt\_\_hheap\_chunk;}
\DoxyCodeLine{2670 }
\DoxyCodeLine{2671 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stbtt\_\_hheap}
\DoxyCodeLine{2672 \{}
\DoxyCodeLine{2673    \textcolor{keyword}{struct }stbtt\_\_hheap\_chunk *head;}
\DoxyCodeLine{2674    \textcolor{keywordtype}{void}   *first\_free;}
\DoxyCodeLine{2675    \textcolor{keywordtype}{int}    num\_remaining\_in\_head\_chunk;}
\DoxyCodeLine{2676 \} stbtt\_\_hheap;}
\DoxyCodeLine{2677 }
\DoxyCodeLine{2678 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stbtt\_\_hheap\_alloc(stbtt\_\_hheap *hh, \textcolor{keywordtype}{size\_t} size, \textcolor{keywordtype}{void} *userdata)}
\DoxyCodeLine{2679 \{}
\DoxyCodeLine{2680    \textcolor{keywordflow}{if} (hh-\/>first\_free) \{}
\DoxyCodeLine{2681       \textcolor{keywordtype}{void} *p = hh-\/>first\_free;}
\DoxyCodeLine{2682       hh-\/>first\_free = * (\textcolor{keywordtype}{void} **) p;}
\DoxyCodeLine{2683       \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{2684    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2685       \textcolor{keywordflow}{if} (hh-\/>num\_remaining\_in\_head\_chunk == 0) \{}
\DoxyCodeLine{2686          \textcolor{keywordtype}{int} count = (size < 32 ? 2000 : size < 128 ? 800 : 100);}
\DoxyCodeLine{2687          stbtt\_\_hheap\_chunk *c = (stbtt\_\_hheap\_chunk *) STBTT\_malloc(\textcolor{keyword}{sizeof}(stbtt\_\_hheap\_chunk) + size * count, userdata);}
\DoxyCodeLine{2688          \textcolor{keywordflow}{if} (c == NULL)}
\DoxyCodeLine{2689             \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{2690          c-\/>next = hh-\/>head;}
\DoxyCodeLine{2691          hh-\/>head = c;}
\DoxyCodeLine{2692          hh-\/>num\_remaining\_in\_head\_chunk = count;}
\DoxyCodeLine{2693       \}}
\DoxyCodeLine{2694       -\/-\/hh-\/>num\_remaining\_in\_head\_chunk;}
\DoxyCodeLine{2695       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{char} *) (hh-\/>head) + \textcolor{keyword}{sizeof}(stbtt\_\_hheap\_chunk) + size * hh-\/>num\_remaining\_in\_head\_chunk;}
\DoxyCodeLine{2696    \}}
\DoxyCodeLine{2697 \}}
\DoxyCodeLine{2698 }
\DoxyCodeLine{2699 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_hheap\_free(stbtt\_\_hheap *hh, \textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{2700 \{}
\DoxyCodeLine{2701    *(\textcolor{keywordtype}{void} **) p = hh-\/>first\_free;}
\DoxyCodeLine{2702    hh-\/>first\_free = p;}
\DoxyCodeLine{2703 \}}
\DoxyCodeLine{2704 }
\DoxyCodeLine{2705 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_hheap\_cleanup(stbtt\_\_hheap *hh, \textcolor{keywordtype}{void} *userdata)}
\DoxyCodeLine{2706 \{}
\DoxyCodeLine{2707    stbtt\_\_hheap\_chunk *c = hh-\/>head;}
\DoxyCodeLine{2708    \textcolor{keywordflow}{while} (c) \{}
\DoxyCodeLine{2709       stbtt\_\_hheap\_chunk *n = c-\/>next;}
\DoxyCodeLine{2710       STBTT\_free(c, userdata);}
\DoxyCodeLine{2711       c = n;}
\DoxyCodeLine{2712    \}}
\DoxyCodeLine{2713 \}}
\DoxyCodeLine{2714 }
\DoxyCodeLine{2715 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stbtt\_\_edge \{}
\DoxyCodeLine{2716    \textcolor{keywordtype}{float} x0,y0, x1,y1;}
\DoxyCodeLine{2717    \textcolor{keywordtype}{int} invert;}
\DoxyCodeLine{2718 \} stbtt\_\_edge;}
\DoxyCodeLine{2719 }
\DoxyCodeLine{2720 }
\DoxyCodeLine{2721 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stbtt\_\_active\_edge}
\DoxyCodeLine{2722 \{}
\DoxyCodeLine{2723    \textcolor{keyword}{struct }stbtt\_\_active\_edge *next;}
\DoxyCodeLine{2724 \textcolor{preprocessor}{   \#if STBTT\_RASTERIZER\_VERSION==1}}
\DoxyCodeLine{2725    \textcolor{keywordtype}{int} x,dx;}
\DoxyCodeLine{2726    \textcolor{keywordtype}{float} ey;}
\DoxyCodeLine{2727    \textcolor{keywordtype}{int} direction;}
\DoxyCodeLine{2728 \textcolor{preprocessor}{   \#elif STBTT\_RASTERIZER\_VERSION==2}}
\DoxyCodeLine{2729    \textcolor{keywordtype}{float} fx,fdx,fdy;}
\DoxyCodeLine{2730    \textcolor{keywordtype}{float} direction;}
\DoxyCodeLine{2731    \textcolor{keywordtype}{float} sy;}
\DoxyCodeLine{2732    \textcolor{keywordtype}{float} ey;}
\DoxyCodeLine{2733 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{2734 \textcolor{preprocessor}{   \#error "{}Unrecognized value of STBTT\_RASTERIZER\_VERSION"{}}}
\DoxyCodeLine{2735 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{2736 \} stbtt\_\_active\_edge;}
\DoxyCodeLine{2737 }
\DoxyCodeLine{2738 \textcolor{preprocessor}{\#if STBTT\_RASTERIZER\_VERSION == 1}}
\DoxyCodeLine{2739 \textcolor{preprocessor}{\#define STBTT\_FIXSHIFT   10}}
\DoxyCodeLine{2740 \textcolor{preprocessor}{\#define STBTT\_FIX        (1 << STBTT\_FIXSHIFT)}}
\DoxyCodeLine{2741 \textcolor{preprocessor}{\#define STBTT\_FIXMASK    (STBTT\_FIX-\/1)}}
\DoxyCodeLine{2742 }
\DoxyCodeLine{2743 \textcolor{keyword}{static} stbtt\_\_active\_edge *stbtt\_\_new\_active(stbtt\_\_hheap *hh, stbtt\_\_edge *e, \textcolor{keywordtype}{int} off\_x, \textcolor{keywordtype}{float} start\_point, \textcolor{keywordtype}{void} *userdata)}
\DoxyCodeLine{2744 \{}
\DoxyCodeLine{2745    stbtt\_\_active\_edge *z = (stbtt\_\_active\_edge *) stbtt\_\_hheap\_alloc(hh, \textcolor{keyword}{sizeof}(*z), userdata);}
\DoxyCodeLine{2746    \textcolor{keywordtype}{float} dxdy = (e-\/>x1 -\/ e-\/>x0) / (e-\/>y1 -\/ e-\/>y0);}
\DoxyCodeLine{2747    STBTT\_assert(z != NULL);}
\DoxyCodeLine{2748    \textcolor{keywordflow}{if} (!z) \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{2749    }
\DoxyCodeLine{2750    \textcolor{comment}{// round dx down to avoid overshooting}}
\DoxyCodeLine{2751    \textcolor{keywordflow}{if} (dxdy < 0)}
\DoxyCodeLine{2752       z-\/>dx = -\/STBTT\_ifloor(STBTT\_FIX * -\/dxdy);}
\DoxyCodeLine{2753    \textcolor{keywordflow}{else}}
\DoxyCodeLine{2754       z-\/>dx = STBTT\_ifloor(STBTT\_FIX * dxdy);}
\DoxyCodeLine{2755 }
\DoxyCodeLine{2756    z-\/>x = STBTT\_ifloor(STBTT\_FIX * e-\/>x0 + z-\/>dx * (start\_point -\/ e-\/>y0)); \textcolor{comment}{// use z-\/>dx so when we offset later it's by the same amount}}
\DoxyCodeLine{2757    z-\/>x -\/= off\_x * STBTT\_FIX;}
\DoxyCodeLine{2758 }
\DoxyCodeLine{2759    z-\/>ey = e-\/>y1;}
\DoxyCodeLine{2760    z-\/>next = 0;}
\DoxyCodeLine{2761    z-\/>direction = e-\/>invert ? 1 : -\/1;}
\DoxyCodeLine{2762    \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{2763 \}}
\DoxyCodeLine{2764 \textcolor{preprocessor}{\#elif STBTT\_RASTERIZER\_VERSION == 2}}
\DoxyCodeLine{2765 \textcolor{keyword}{static} stbtt\_\_active\_edge *stbtt\_\_new\_active(stbtt\_\_hheap *hh, stbtt\_\_edge *e, \textcolor{keywordtype}{int} off\_x, \textcolor{keywordtype}{float} start\_point, \textcolor{keywordtype}{void} *userdata)}
\DoxyCodeLine{2766 \{}
\DoxyCodeLine{2767    stbtt\_\_active\_edge *z = (stbtt\_\_active\_edge *) stbtt\_\_hheap\_alloc(hh, \textcolor{keyword}{sizeof}(*z), userdata);}
\DoxyCodeLine{2768    \textcolor{keywordtype}{float} dxdy = (e-\/>x1 -\/ e-\/>x0) / (e-\/>y1 -\/ e-\/>y0);}
\DoxyCodeLine{2769    STBTT\_assert(z != NULL);}
\DoxyCodeLine{2770    \textcolor{comment}{//STBTT\_assert(e-\/>y0 <= start\_point);}}
\DoxyCodeLine{2771    \textcolor{keywordflow}{if} (!z) \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{2772    z-\/>fdx = dxdy;}
\DoxyCodeLine{2773    z-\/>fdy = dxdy != 0.0f ? (1.0f/dxdy) : 0.0f;}
\DoxyCodeLine{2774    z-\/>fx = e-\/>x0 + dxdy * (start\_point -\/ e-\/>y0);}
\DoxyCodeLine{2775    z-\/>fx -\/= off\_x;}
\DoxyCodeLine{2776    z-\/>direction = e-\/>invert ? 1.0f : -\/1.0f;}
\DoxyCodeLine{2777    z-\/>sy = e-\/>y0;}
\DoxyCodeLine{2778    z-\/>ey = e-\/>y1;}
\DoxyCodeLine{2779    z-\/>next = 0;}
\DoxyCodeLine{2780    \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{2781 \}}
\DoxyCodeLine{2782 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{2783 \textcolor{preprocessor}{\#error "{}Unrecognized value of STBTT\_RASTERIZER\_VERSION"{}}}
\DoxyCodeLine{2784 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{2785 }
\DoxyCodeLine{2786 \textcolor{preprocessor}{\#if STBTT\_RASTERIZER\_VERSION == 1}}
\DoxyCodeLine{2787 \textcolor{comment}{// note: this routine clips fills that extend off the edges... ideally this}}
\DoxyCodeLine{2788 \textcolor{comment}{// wouldn't happen, but it could happen if the truetype glyph bounding boxes}}
\DoxyCodeLine{2789 \textcolor{comment}{// are wrong, or if the user supplies a too-\/small bitmap}}
\DoxyCodeLine{2790 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_fill\_active\_edges(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *scanline, \textcolor{keywordtype}{int} len, stbtt\_\_active\_edge *e, \textcolor{keywordtype}{int} max\_weight)}
\DoxyCodeLine{2791 \{}
\DoxyCodeLine{2792    \textcolor{comment}{// non-\/zero winding fill}}
\DoxyCodeLine{2793    \textcolor{keywordtype}{int} x0=0, w=0;}
\DoxyCodeLine{2794 }
\DoxyCodeLine{2795    \textcolor{keywordflow}{while} (e) \{}
\DoxyCodeLine{2796       \textcolor{keywordflow}{if} (w == 0) \{}
\DoxyCodeLine{2797          \textcolor{comment}{// if we're currently at zero, we need to record the edge start point}}
\DoxyCodeLine{2798          x0 = e-\/>x; w += e-\/>direction;}
\DoxyCodeLine{2799       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2800          \textcolor{keywordtype}{int} x1 = e-\/>x; w += e-\/>direction;}
\DoxyCodeLine{2801          \textcolor{comment}{// if we went to zero, we need to draw}}
\DoxyCodeLine{2802          \textcolor{keywordflow}{if} (w == 0) \{}
\DoxyCodeLine{2803             \textcolor{keywordtype}{int} i = x0 >> STBTT\_FIXSHIFT;}
\DoxyCodeLine{2804             \textcolor{keywordtype}{int} j = x1 >> STBTT\_FIXSHIFT;}
\DoxyCodeLine{2805 }
\DoxyCodeLine{2806             \textcolor{keywordflow}{if} (i < len \&\& j >= 0) \{}
\DoxyCodeLine{2807                \textcolor{keywordflow}{if} (i == j) \{}
\DoxyCodeLine{2808                   \textcolor{comment}{// x0,x1 are the same pixel, so compute combined coverage}}
\DoxyCodeLine{2809                   scanline[i] = scanline[i] + (stbtt\_uint8) ((x1 -\/ x0) * max\_weight >> STBTT\_FIXSHIFT);}
\DoxyCodeLine{2810                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2811                   \textcolor{keywordflow}{if} (i >= 0) \textcolor{comment}{// add antialiasing for x0}}
\DoxyCodeLine{2812                      scanline[i] = scanline[i] + (stbtt\_uint8) (((STBTT\_FIX -\/ (x0 \& STBTT\_FIXMASK)) * max\_weight) >> STBTT\_FIXSHIFT);}
\DoxyCodeLine{2813                   \textcolor{keywordflow}{else}}
\DoxyCodeLine{2814                      i = -\/1; \textcolor{comment}{// clip}}
\DoxyCodeLine{2815 }
\DoxyCodeLine{2816                   \textcolor{keywordflow}{if} (j < len) \textcolor{comment}{// add antialiasing for x1}}
\DoxyCodeLine{2817                      scanline[j] = scanline[j] + (stbtt\_uint8) (((x1 \& STBTT\_FIXMASK) * max\_weight) >> STBTT\_FIXSHIFT);}
\DoxyCodeLine{2818                   \textcolor{keywordflow}{else}}
\DoxyCodeLine{2819                      j = len; \textcolor{comment}{// clip}}
\DoxyCodeLine{2820 }
\DoxyCodeLine{2821                   \textcolor{keywordflow}{for} (++i; i < j; ++i) \textcolor{comment}{// fill pixels between x0 and x1}}
\DoxyCodeLine{2822                      scanline[i] = scanline[i] + (stbtt\_uint8) max\_weight;}
\DoxyCodeLine{2823                \}}
\DoxyCodeLine{2824             \}}
\DoxyCodeLine{2825          \}}
\DoxyCodeLine{2826       \}}
\DoxyCodeLine{2827       }
\DoxyCodeLine{2828       e = e-\/>next;}
\DoxyCodeLine{2829    \}}
\DoxyCodeLine{2830 \}}
\DoxyCodeLine{2831 }
\DoxyCodeLine{2832 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_rasterize\_sorted\_edges(\mbox{\hyperlink{structstbtt____bitmap}{stbtt\_\_bitmap}} *result, stbtt\_\_edge *e, \textcolor{keywordtype}{int} n, \textcolor{keywordtype}{int} vsubsample, \textcolor{keywordtype}{int} off\_x, \textcolor{keywordtype}{int} off\_y, \textcolor{keywordtype}{void} *userdata)}
\DoxyCodeLine{2833 \{}
\DoxyCodeLine{2834    stbtt\_\_hheap hh = \{ 0, 0, 0 \};}
\DoxyCodeLine{2835    stbtt\_\_active\_edge *active = NULL;}
\DoxyCodeLine{2836    \textcolor{keywordtype}{int} y,j=0;}
\DoxyCodeLine{2837    \textcolor{keywordtype}{int} max\_weight = (255 / vsubsample);  \textcolor{comment}{// weight per vertical scanline}}
\DoxyCodeLine{2838    \textcolor{keywordtype}{int} s; \textcolor{comment}{// vertical subsample index}}
\DoxyCodeLine{2839    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} scanline\_data[512], *scanline;}
\DoxyCodeLine{2840 }
\DoxyCodeLine{2841    \textcolor{keywordflow}{if} (result-\/>w > 512)}
\DoxyCodeLine{2842       scanline = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) STBTT\_malloc(result-\/>w, userdata);}
\DoxyCodeLine{2843    \textcolor{keywordflow}{else}}
\DoxyCodeLine{2844       scanline = scanline\_data;}
\DoxyCodeLine{2845 }
\DoxyCodeLine{2846    y = off\_y * vsubsample;}
\DoxyCodeLine{2847    e[n].y0 = (off\_y + result-\/>h) * (\textcolor{keywordtype}{float}) vsubsample + 1;}
\DoxyCodeLine{2848 }
\DoxyCodeLine{2849    \textcolor{keywordflow}{while} (j < result-\/>h) \{}
\DoxyCodeLine{2850       STBTT\_memset(scanline, 0, result-\/>w);}
\DoxyCodeLine{2851       \textcolor{keywordflow}{for} (s=0; s < vsubsample; ++s) \{}
\DoxyCodeLine{2852          \textcolor{comment}{// find center of pixel for this scanline}}
\DoxyCodeLine{2853          \textcolor{keywordtype}{float} scan\_y = y + 0.5f;}
\DoxyCodeLine{2854          stbtt\_\_active\_edge **step = \&active;}
\DoxyCodeLine{2855 }
\DoxyCodeLine{2856          \textcolor{comment}{// update all active edges;}}
\DoxyCodeLine{2857          \textcolor{comment}{// remove all active edges that terminate before the center of this scanline}}
\DoxyCodeLine{2858          \textcolor{keywordflow}{while} (*step) \{}
\DoxyCodeLine{2859             stbtt\_\_active\_edge * z = *step;}
\DoxyCodeLine{2860             \textcolor{keywordflow}{if} (z-\/>ey <= scan\_y) \{}
\DoxyCodeLine{2861                *step = z-\/>next; \textcolor{comment}{// delete from list}}
\DoxyCodeLine{2862                STBTT\_assert(z-\/>direction);}
\DoxyCodeLine{2863                z-\/>direction = 0;}
\DoxyCodeLine{2864                stbtt\_\_hheap\_free(\&hh, z);}
\DoxyCodeLine{2865             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2866                z-\/>x += z-\/>dx; \textcolor{comment}{// advance to position for current scanline}}
\DoxyCodeLine{2867                step = \&((*step)-\/>next); \textcolor{comment}{// advance through list}}
\DoxyCodeLine{2868             \}}
\DoxyCodeLine{2869          \}}
\DoxyCodeLine{2870 }
\DoxyCodeLine{2871          \textcolor{comment}{// resort the list if needed}}
\DoxyCodeLine{2872          \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{2873             \textcolor{keywordtype}{int} changed=0;}
\DoxyCodeLine{2874             step = \&active;}
\DoxyCodeLine{2875             \textcolor{keywordflow}{while} (*step \&\& (*step)-\/>next) \{}
\DoxyCodeLine{2876                \textcolor{keywordflow}{if} ((*step)-\/>x > (*step)-\/>next-\/>x) \{}
\DoxyCodeLine{2877                   stbtt\_\_active\_edge *t = *step;}
\DoxyCodeLine{2878                   stbtt\_\_active\_edge *q = t-\/>next;}
\DoxyCodeLine{2879 }
\DoxyCodeLine{2880                   t-\/>next = q-\/>next;}
\DoxyCodeLine{2881                   q-\/>next = t;}
\DoxyCodeLine{2882                   *step = q;}
\DoxyCodeLine{2883                   changed = 1;}
\DoxyCodeLine{2884                \}}
\DoxyCodeLine{2885                step = \&(*step)-\/>next;}
\DoxyCodeLine{2886             \}}
\DoxyCodeLine{2887             \textcolor{keywordflow}{if} (!changed) \textcolor{keywordflow}{break};}
\DoxyCodeLine{2888          \}}
\DoxyCodeLine{2889 }
\DoxyCodeLine{2890          \textcolor{comment}{// insert all edges that start before the center of this scanline -\/-\/ omit ones that also end on this scanline}}
\DoxyCodeLine{2891          \textcolor{keywordflow}{while} (e-\/>y0 <= scan\_y) \{}
\DoxyCodeLine{2892             \textcolor{keywordflow}{if} (e-\/>y1 > scan\_y) \{}
\DoxyCodeLine{2893                stbtt\_\_active\_edge *z = stbtt\_\_new\_active(\&hh, e, off\_x, scan\_y, userdata);}
\DoxyCodeLine{2894                \textcolor{keywordflow}{if} (z != NULL) \{}
\DoxyCodeLine{2895                   \textcolor{comment}{// find insertion point}}
\DoxyCodeLine{2896                   \textcolor{keywordflow}{if} (active == NULL)}
\DoxyCodeLine{2897                      active = z;}
\DoxyCodeLine{2898                   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (z-\/>x < active-\/>x) \{}
\DoxyCodeLine{2899                      \textcolor{comment}{// insert at front}}
\DoxyCodeLine{2900                      z-\/>next = active;}
\DoxyCodeLine{2901                      active = z;}
\DoxyCodeLine{2902                   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2903                      \textcolor{comment}{// find thing to insert AFTER}}
\DoxyCodeLine{2904                      stbtt\_\_active\_edge *p = active;}
\DoxyCodeLine{2905                      \textcolor{keywordflow}{while} (p-\/>next \&\& p-\/>next-\/>x < z-\/>x)}
\DoxyCodeLine{2906                         p = p-\/>next;}
\DoxyCodeLine{2907                      \textcolor{comment}{// at this point, p-\/>next-\/>x is NOT < z-\/>x}}
\DoxyCodeLine{2908                      z-\/>next = p-\/>next;}
\DoxyCodeLine{2909                      p-\/>next = z;}
\DoxyCodeLine{2910                   \}}
\DoxyCodeLine{2911                \}}
\DoxyCodeLine{2912             \}}
\DoxyCodeLine{2913             ++e;}
\DoxyCodeLine{2914          \}}
\DoxyCodeLine{2915 }
\DoxyCodeLine{2916          \textcolor{comment}{// now process all active edges in XOR fashion}}
\DoxyCodeLine{2917          \textcolor{keywordflow}{if} (active)}
\DoxyCodeLine{2918             stbtt\_\_fill\_active\_edges(scanline, result-\/>w, active, max\_weight);}
\DoxyCodeLine{2919 }
\DoxyCodeLine{2920          ++y;}
\DoxyCodeLine{2921       \}}
\DoxyCodeLine{2922       STBTT\_memcpy(result-\/>pixels + j * result-\/>stride, scanline, result-\/>w);}
\DoxyCodeLine{2923       ++j;}
\DoxyCodeLine{2924    \}}
\DoxyCodeLine{2925 }
\DoxyCodeLine{2926    stbtt\_\_hheap\_cleanup(\&hh, userdata);}
\DoxyCodeLine{2927 }
\DoxyCodeLine{2928    \textcolor{keywordflow}{if} (scanline != scanline\_data)}
\DoxyCodeLine{2929       STBTT\_free(scanline, userdata);}
\DoxyCodeLine{2930 \}}
\DoxyCodeLine{2931 }
\DoxyCodeLine{2932 \textcolor{preprocessor}{\#elif STBTT\_RASTERIZER\_VERSION == 2}}
\DoxyCodeLine{2933 }
\DoxyCodeLine{2934 \textcolor{comment}{// the edge passed in here does not cross the vertical line at x or the vertical line at x+1}}
\DoxyCodeLine{2935 \textcolor{comment}{// (i.e. it has already been clipped to those)}}
\DoxyCodeLine{2936 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_handle\_clipped\_edge(\textcolor{keywordtype}{float} *scanline, \textcolor{keywordtype}{int} x, stbtt\_\_active\_edge *e, \textcolor{keywordtype}{float} x0, \textcolor{keywordtype}{float} y0, \textcolor{keywordtype}{float} x1, \textcolor{keywordtype}{float} y1)}
\DoxyCodeLine{2937 \{}
\DoxyCodeLine{2938    \textcolor{keywordflow}{if} (y0 == y1) \textcolor{keywordflow}{return};}
\DoxyCodeLine{2939    STBTT\_assert(y0 < y1);}
\DoxyCodeLine{2940    STBTT\_assert(e-\/>sy <= e-\/>ey);}
\DoxyCodeLine{2941    \textcolor{keywordflow}{if} (y0 > e-\/>ey) \textcolor{keywordflow}{return};}
\DoxyCodeLine{2942    \textcolor{keywordflow}{if} (y1 < e-\/>sy) \textcolor{keywordflow}{return};}
\DoxyCodeLine{2943    \textcolor{keywordflow}{if} (y0 < e-\/>sy) \{}
\DoxyCodeLine{2944       x0 += (x1-\/x0) * (e-\/>sy -\/ y0) / (y1-\/y0);}
\DoxyCodeLine{2945       y0 = e-\/>sy;}
\DoxyCodeLine{2946    \}}
\DoxyCodeLine{2947    \textcolor{keywordflow}{if} (y1 > e-\/>ey) \{}
\DoxyCodeLine{2948       x1 += (x1-\/x0) * (e-\/>ey -\/ y1) / (y1-\/y0);}
\DoxyCodeLine{2949       y1 = e-\/>ey;}
\DoxyCodeLine{2950    \}}
\DoxyCodeLine{2951 }
\DoxyCodeLine{2952    \textcolor{keywordflow}{if} (x0 == x)}
\DoxyCodeLine{2953       STBTT\_assert(x1 <= x+1);}
\DoxyCodeLine{2954    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x0 == x+1)}
\DoxyCodeLine{2955       STBTT\_assert(x1 >= x);}
\DoxyCodeLine{2956    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x0 <= x)}
\DoxyCodeLine{2957       STBTT\_assert(x1 <= x);}
\DoxyCodeLine{2958    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x0 >= x+1)}
\DoxyCodeLine{2959       STBTT\_assert(x1 >= x+1);}
\DoxyCodeLine{2960    \textcolor{keywordflow}{else}}
\DoxyCodeLine{2961       STBTT\_assert(x1 >= x \&\& x1 <= x+1);}
\DoxyCodeLine{2962 }
\DoxyCodeLine{2963    \textcolor{keywordflow}{if} (x0 <= x \&\& x1 <= x)}
\DoxyCodeLine{2964       scanline[x] += e-\/>direction * (y1-\/y0);}
\DoxyCodeLine{2965    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x0 >= x+1 \&\& x1 >= x+1)}
\DoxyCodeLine{2966       ;}
\DoxyCodeLine{2967    \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2968       STBTT\_assert(x0 >= x \&\& x0 <= x+1 \&\& x1 >= x \&\& x1 <= x+1);}
\DoxyCodeLine{2969       scanline[x] += e-\/>direction * (y1-\/y0) * (1-\/((x0-\/x)+(x1-\/x))/2); \textcolor{comment}{// coverage = 1 -\/ average x position}}
\DoxyCodeLine{2970    \}}
\DoxyCodeLine{2971 \}}
\DoxyCodeLine{2972 }
\DoxyCodeLine{2973 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_fill\_active\_edges\_new(\textcolor{keywordtype}{float} *scanline, \textcolor{keywordtype}{float} *scanline\_fill, \textcolor{keywordtype}{int} len, stbtt\_\_active\_edge *e, \textcolor{keywordtype}{float} y\_top)}
\DoxyCodeLine{2974 \{}
\DoxyCodeLine{2975    \textcolor{keywordtype}{float} y\_bottom = y\_top+1;}
\DoxyCodeLine{2976 }
\DoxyCodeLine{2977    \textcolor{keywordflow}{while} (e) \{}
\DoxyCodeLine{2978       \textcolor{comment}{// brute force every pixel}}
\DoxyCodeLine{2979 }
\DoxyCodeLine{2980       \textcolor{comment}{// compute intersection points with top \& bottom}}
\DoxyCodeLine{2981       STBTT\_assert(e-\/>ey >= y\_top);}
\DoxyCodeLine{2982 }
\DoxyCodeLine{2983       \textcolor{keywordflow}{if} (e-\/>fdx == 0) \{}
\DoxyCodeLine{2984          \textcolor{keywordtype}{float} x0 = e-\/>fx;}
\DoxyCodeLine{2985          \textcolor{keywordflow}{if} (x0 < len) \{}
\DoxyCodeLine{2986             \textcolor{keywordflow}{if} (x0 >= 0) \{}
\DoxyCodeLine{2987                stbtt\_\_handle\_clipped\_edge(scanline,(\textcolor{keywordtype}{int}) x0,e, x0,y\_top, x0,y\_bottom);}
\DoxyCodeLine{2988                stbtt\_\_handle\_clipped\_edge(scanline\_fill-\/1,(\textcolor{keywordtype}{int}) x0+1,e, x0,y\_top, x0,y\_bottom);}
\DoxyCodeLine{2989             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2990                stbtt\_\_handle\_clipped\_edge(scanline\_fill-\/1,0,e, x0,y\_top, x0,y\_bottom);}
\DoxyCodeLine{2991             \}}
\DoxyCodeLine{2992          \}}
\DoxyCodeLine{2993       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{2994          \textcolor{keywordtype}{float} x0 = e-\/>fx;}
\DoxyCodeLine{2995          \textcolor{keywordtype}{float} dx = e-\/>fdx;}
\DoxyCodeLine{2996          \textcolor{keywordtype}{float} xb = x0 + dx;}
\DoxyCodeLine{2997          \textcolor{keywordtype}{float} x\_top, x\_bottom;}
\DoxyCodeLine{2998          \textcolor{keywordtype}{float} sy0,sy1;}
\DoxyCodeLine{2999          \textcolor{keywordtype}{float} dy = e-\/>fdy;}
\DoxyCodeLine{3000          STBTT\_assert(e-\/>sy <= y\_bottom \&\& e-\/>ey >= y\_top);}
\DoxyCodeLine{3001 }
\DoxyCodeLine{3002          \textcolor{comment}{// compute endpoints of line segment clipped to this scanline (if the}}
\DoxyCodeLine{3003          \textcolor{comment}{// line segment starts on this scanline. x0 is the intersection of the}}
\DoxyCodeLine{3004          \textcolor{comment}{// line with y\_top, but that may be off the line segment.}}
\DoxyCodeLine{3005          \textcolor{keywordflow}{if} (e-\/>sy > y\_top) \{}
\DoxyCodeLine{3006             x\_top = x0 + dx * (e-\/>sy -\/ y\_top);}
\DoxyCodeLine{3007             sy0 = e-\/>sy;}
\DoxyCodeLine{3008          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3009             x\_top = x0;}
\DoxyCodeLine{3010             sy0 = y\_top;}
\DoxyCodeLine{3011          \}}
\DoxyCodeLine{3012          \textcolor{keywordflow}{if} (e-\/>ey < y\_bottom) \{}
\DoxyCodeLine{3013             x\_bottom = x0 + dx * (e-\/>ey -\/ y\_top);}
\DoxyCodeLine{3014             sy1 = e-\/>ey;}
\DoxyCodeLine{3015          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3016             x\_bottom = xb;}
\DoxyCodeLine{3017             sy1 = y\_bottom;}
\DoxyCodeLine{3018          \}}
\DoxyCodeLine{3019 }
\DoxyCodeLine{3020          \textcolor{keywordflow}{if} (x\_top >= 0 \&\& x\_bottom >= 0 \&\& x\_top < len \&\& x\_bottom < len) \{}
\DoxyCodeLine{3021             \textcolor{comment}{// from here on, we don't have to range check x values}}
\DoxyCodeLine{3022 }
\DoxyCodeLine{3023             \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{int}) x\_top == (int) x\_bottom) \{}
\DoxyCodeLine{3024                \textcolor{keywordtype}{float} height;}
\DoxyCodeLine{3025                \textcolor{comment}{// simple case, only spans one pixel}}
\DoxyCodeLine{3026                \textcolor{keywordtype}{int} x = (int) x\_top;}
\DoxyCodeLine{3027                height = sy1 -\/ sy0;}
\DoxyCodeLine{3028                STBTT\_assert(x >= 0 \&\& x < len);}
\DoxyCodeLine{3029                scanline[x] += e-\/>direction * (1-\/((x\_top -\/ x) + (x\_bottom-\/x))/2)  * height;}
\DoxyCodeLine{3030                scanline\_fill[x] += e-\/>direction * height; \textcolor{comment}{// everything right of this pixel is filled}}
\DoxyCodeLine{3031             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3032                \textcolor{keywordtype}{int} x,x1,x2;}
\DoxyCodeLine{3033                \textcolor{keywordtype}{float} y\_crossing, step, sign, area;}
\DoxyCodeLine{3034                \textcolor{comment}{// covers 2+ pixels}}
\DoxyCodeLine{3035                \textcolor{keywordflow}{if} (x\_top > x\_bottom) \{}
\DoxyCodeLine{3036                   \textcolor{comment}{// flip scanline vertically; signed area is the same}}
\DoxyCodeLine{3037                   \textcolor{keywordtype}{float} t;}
\DoxyCodeLine{3038                   sy0 = y\_bottom -\/ (sy0 -\/ y\_top);}
\DoxyCodeLine{3039                   sy1 = y\_bottom -\/ (sy1 -\/ y\_top);}
\DoxyCodeLine{3040                   t = sy0, sy0 = sy1, sy1 = t;}
\DoxyCodeLine{3041                   t = x\_bottom, x\_bottom = x\_top, x\_top = t;}
\DoxyCodeLine{3042                   dx = -\/dx;}
\DoxyCodeLine{3043                   dy = -\/dy;}
\DoxyCodeLine{3044                   t = x0, x0 = xb, xb = t;}
\DoxyCodeLine{3045                   \textcolor{comment}{// [DEAR IMGUI] Fix static analyzer warning}}
\DoxyCodeLine{3046                   (void)dx; \textcolor{comment}{// [ImGui: fix static analyzer warning]}}
\DoxyCodeLine{3047                \}}
\DoxyCodeLine{3048 }
\DoxyCodeLine{3049                x1 = (int) x\_top;}
\DoxyCodeLine{3050                x2 = (int) x\_bottom;}
\DoxyCodeLine{3051                \textcolor{comment}{// compute intersection with y axis at x1+1}}
\DoxyCodeLine{3052                y\_crossing = (x1+1 -\/ x0) * dy + y\_top;}
\DoxyCodeLine{3053 }
\DoxyCodeLine{3054                sign = e-\/>direction;}
\DoxyCodeLine{3055                \textcolor{comment}{// area of the rectangle covered from y0..y\_crossing}}
\DoxyCodeLine{3056                area = sign * (y\_crossing-\/sy0);}
\DoxyCodeLine{3057                \textcolor{comment}{// area of the triangle (x\_top,y0), (x+1,y0), (x+1,y\_crossing)}}
\DoxyCodeLine{3058                scanline[x1] += area * (1-\/((x\_top -\/ x1)+(x1+1-\/x1))/2);}
\DoxyCodeLine{3059 }
\DoxyCodeLine{3060                step = sign * dy;}
\DoxyCodeLine{3061                \textcolor{keywordflow}{for} (x = x1+1; x < x2; ++x) \{}
\DoxyCodeLine{3062                   scanline[x] += area + step/2;}
\DoxyCodeLine{3063                   area += step;}
\DoxyCodeLine{3064                \}}
\DoxyCodeLine{3065                y\_crossing += dy * (x2 -\/ (x1+1));}
\DoxyCodeLine{3066 }
\DoxyCodeLine{3067                STBTT\_assert(STBTT\_fabs(area) <= 1.01f);}
\DoxyCodeLine{3068 }
\DoxyCodeLine{3069                scanline[x2] += area + sign * (1-\/((x2-\/x2)+(x\_bottom-\/x2))/2) * (sy1-\/y\_crossing);}
\DoxyCodeLine{3070 }
\DoxyCodeLine{3071                scanline\_fill[x2] += sign * (sy1-\/sy0);}
\DoxyCodeLine{3072             \}}
\DoxyCodeLine{3073          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3074             \textcolor{comment}{// if edge goes outside of box we're drawing, we require}}
\DoxyCodeLine{3075             \textcolor{comment}{// clipping logic. since this does not match the intended use}}
\DoxyCodeLine{3076             \textcolor{comment}{// of this library, we use a different, very slow brute}}
\DoxyCodeLine{3077             \textcolor{comment}{// force implementation}}
\DoxyCodeLine{3078             \textcolor{keywordtype}{int} x;}
\DoxyCodeLine{3079             \textcolor{keywordflow}{for} (x=0; x < len; ++x) \{}
\DoxyCodeLine{3080                \textcolor{comment}{// cases:}}
\DoxyCodeLine{3081                \textcolor{comment}{//}}
\DoxyCodeLine{3082                \textcolor{comment}{// there can be up to two intersections with the pixel. any intersection}}
\DoxyCodeLine{3083                \textcolor{comment}{// with left or right edges can be handled by splitting into two (or three)}}
\DoxyCodeLine{3084                \textcolor{comment}{// regions. intersections with top \& bottom do not necessitate case-\/wise logic.}}
\DoxyCodeLine{3085                \textcolor{comment}{//}}
\DoxyCodeLine{3086                \textcolor{comment}{// the old way of doing this found the intersections with the left \& right edges,}}
\DoxyCodeLine{3087                \textcolor{comment}{// then used some simple logic to produce up to three segments in sorted order}}
\DoxyCodeLine{3088                \textcolor{comment}{// from top-\/to-\/bottom. however, this had a problem: if an x edge was epsilon}}
\DoxyCodeLine{3089                \textcolor{comment}{// across the x border, then the corresponding y position might not be distinct}}
\DoxyCodeLine{3090                \textcolor{comment}{// from the other y segment, and it might ignored as an empty segment. to avoid}}
\DoxyCodeLine{3091                \textcolor{comment}{// that, we need to explicitly produce segments based on x positions.}}
\DoxyCodeLine{3092 }
\DoxyCodeLine{3093                \textcolor{comment}{// rename variables to clearly-\/defined pairs}}
\DoxyCodeLine{3094                \textcolor{keywordtype}{float} y0 = y\_top;}
\DoxyCodeLine{3095                \textcolor{keywordtype}{float} x1 = (float) (x);}
\DoxyCodeLine{3096                \textcolor{keywordtype}{float} x2 = (float) (x+1);}
\DoxyCodeLine{3097                \textcolor{keywordtype}{float} x3 = xb;}
\DoxyCodeLine{3098                \textcolor{keywordtype}{float} y3 = y\_bottom;}
\DoxyCodeLine{3099 }
\DoxyCodeLine{3100                \textcolor{comment}{// x = e-\/>x + e-\/>dx * (y-\/y\_top)}}
\DoxyCodeLine{3101                \textcolor{comment}{// (y-\/y\_top) = (x -\/ e-\/>x) / e-\/>dx}}
\DoxyCodeLine{3102                \textcolor{comment}{// y = (x -\/ e-\/>x) / e-\/>dx + y\_top}}
\DoxyCodeLine{3103                \textcolor{keywordtype}{float} y1 = (x -\/ x0) / dx + y\_top;}
\DoxyCodeLine{3104                \textcolor{keywordtype}{float} y2 = (x+1 -\/ x0) / dx + y\_top;}
\DoxyCodeLine{3105 }
\DoxyCodeLine{3106                \textcolor{keywordflow}{if} (x0 < x1 \&\& x3 > x2) \{         \textcolor{comment}{// three segments descending down-\/right}}
\DoxyCodeLine{3107                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x0,y0, x1,y1);}
\DoxyCodeLine{3108                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x1,y1, x2,y2);}
\DoxyCodeLine{3109                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x2,y2, x3,y3);}
\DoxyCodeLine{3110                \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x3 < x1 \&\& x0 > x2) \{  \textcolor{comment}{// three segments descending down-\/left}}
\DoxyCodeLine{3111                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x0,y0, x2,y2);}
\DoxyCodeLine{3112                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x2,y2, x1,y1);}
\DoxyCodeLine{3113                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x1,y1, x3,y3);}
\DoxyCodeLine{3114                \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x0 < x1 \&\& x3 > x1) \{  \textcolor{comment}{// two segments across x, down-\/right}}
\DoxyCodeLine{3115                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x0,y0, x1,y1);}
\DoxyCodeLine{3116                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x1,y1, x3,y3);}
\DoxyCodeLine{3117                \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x3 < x1 \&\& x0 > x1) \{  \textcolor{comment}{// two segments across x, down-\/left}}
\DoxyCodeLine{3118                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x0,y0, x1,y1);}
\DoxyCodeLine{3119                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x1,y1, x3,y3);}
\DoxyCodeLine{3120                \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x0 < x2 \&\& x3 > x2) \{  \textcolor{comment}{// two segments across x+1, down-\/right}}
\DoxyCodeLine{3121                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x0,y0, x2,y2);}
\DoxyCodeLine{3122                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x2,y2, x3,y3);}
\DoxyCodeLine{3123                \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (x3 < x2 \&\& x0 > x2) \{  \textcolor{comment}{// two segments across x+1, down-\/left}}
\DoxyCodeLine{3124                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x0,y0, x2,y2);}
\DoxyCodeLine{3125                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x2,y2, x3,y3);}
\DoxyCodeLine{3126                \} \textcolor{keywordflow}{else} \{  \textcolor{comment}{// one segment}}
\DoxyCodeLine{3127                   stbtt\_\_handle\_clipped\_edge(scanline,x,e, x0,y0, x3,y3);}
\DoxyCodeLine{3128                \}}
\DoxyCodeLine{3129             \}}
\DoxyCodeLine{3130          \}}
\DoxyCodeLine{3131       \}}
\DoxyCodeLine{3132       e = e-\/>next;}
\DoxyCodeLine{3133    \}}
\DoxyCodeLine{3134 \}}
\DoxyCodeLine{3135 }
\DoxyCodeLine{3136 \textcolor{comment}{// directly AA rasterize edges w/o supersampling}}
\DoxyCodeLine{3137 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_rasterize\_sorted\_edges(\mbox{\hyperlink{structstbtt____bitmap}{stbtt\_\_bitmap}} *result, stbtt\_\_edge *e, \textcolor{keywordtype}{int} n, \textcolor{keywordtype}{int} vsubsample, \textcolor{keywordtype}{int} off\_x, \textcolor{keywordtype}{int} off\_y, \textcolor{keywordtype}{void} *userdata)}
\DoxyCodeLine{3138 \{}
\DoxyCodeLine{3139    stbtt\_\_hheap hh = \{ 0, 0, 0 \};}
\DoxyCodeLine{3140    stbtt\_\_active\_edge *active = NULL;}
\DoxyCodeLine{3141    \textcolor{keywordtype}{int} y,j=0, i;}
\DoxyCodeLine{3142    \textcolor{keywordtype}{float} scanline\_data[129], *scanline, *scanline2;}
\DoxyCodeLine{3143 }
\DoxyCodeLine{3144    STBTT\_\_NOTUSED(vsubsample);}
\DoxyCodeLine{3145 }
\DoxyCodeLine{3146    \textcolor{keywordflow}{if} (result-\/>w > 64)}
\DoxyCodeLine{3147       scanline = (\textcolor{keywordtype}{float} *) STBTT\_malloc((result-\/>w*2+1) * \textcolor{keyword}{sizeof}(float), userdata);}
\DoxyCodeLine{3148    \textcolor{keywordflow}{else}}
\DoxyCodeLine{3149       scanline = scanline\_data;}
\DoxyCodeLine{3150 }
\DoxyCodeLine{3151    scanline2 = scanline + result-\/>w;}
\DoxyCodeLine{3152 }
\DoxyCodeLine{3153    y = off\_y;}
\DoxyCodeLine{3154    e[n].y0 = (float) (off\_y + result-\/>h) + 1;}
\DoxyCodeLine{3155 }
\DoxyCodeLine{3156    \textcolor{keywordflow}{while} (j < result-\/>h) \{}
\DoxyCodeLine{3157       \textcolor{comment}{// find center of pixel for this scanline}}
\DoxyCodeLine{3158       \textcolor{keywordtype}{float} scan\_y\_top    = y + 0.0f;}
\DoxyCodeLine{3159       \textcolor{keywordtype}{float} scan\_y\_bottom = y + 1.0f;}
\DoxyCodeLine{3160       stbtt\_\_active\_edge **step = \&active;}
\DoxyCodeLine{3161 }
\DoxyCodeLine{3162       STBTT\_memset(scanline , 0, result-\/>w*\textcolor{keyword}{sizeof}(scanline[0]));}
\DoxyCodeLine{3163       STBTT\_memset(scanline2, 0, (result-\/>w+1)*\textcolor{keyword}{sizeof}(scanline[0]));}
\DoxyCodeLine{3164 }
\DoxyCodeLine{3165       \textcolor{comment}{// update all active edges;}}
\DoxyCodeLine{3166       \textcolor{comment}{// remove all active edges that terminate before the top of this scanline}}
\DoxyCodeLine{3167       \textcolor{keywordflow}{while} (*step) \{}
\DoxyCodeLine{3168          stbtt\_\_active\_edge * z = *step;}
\DoxyCodeLine{3169          \textcolor{keywordflow}{if} (z-\/>ey <= scan\_y\_top) \{}
\DoxyCodeLine{3170             *step = z-\/>next; \textcolor{comment}{// delete from list}}
\DoxyCodeLine{3171             STBTT\_assert(z-\/>direction);}
\DoxyCodeLine{3172             z-\/>direction = 0;}
\DoxyCodeLine{3173             stbtt\_\_hheap\_free(\&hh, z);}
\DoxyCodeLine{3174          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3175             step = \&((*step)-\/>next); \textcolor{comment}{// advance through list}}
\DoxyCodeLine{3176          \}}
\DoxyCodeLine{3177       \}}
\DoxyCodeLine{3178 }
\DoxyCodeLine{3179       \textcolor{comment}{// insert all edges that start before the bottom of this scanline}}
\DoxyCodeLine{3180       \textcolor{keywordflow}{while} (e-\/>y0 <= scan\_y\_bottom) \{}
\DoxyCodeLine{3181          \textcolor{keywordflow}{if} (e-\/>y0 != e-\/>y1) \{}
\DoxyCodeLine{3182             stbtt\_\_active\_edge *z = stbtt\_\_new\_active(\&hh, e, off\_x, scan\_y\_top, userdata);}
\DoxyCodeLine{3183             \textcolor{keywordflow}{if} (z != NULL) \{}
\DoxyCodeLine{3184                \textcolor{keywordflow}{if} (j == 0 \&\& off\_y != 0) \{}
\DoxyCodeLine{3185                   \textcolor{keywordflow}{if} (z-\/>ey < scan\_y\_top) \{}
\DoxyCodeLine{3186                      \textcolor{comment}{// this can happen due to subpixel positioning and some kind of fp rounding error i think}}
\DoxyCodeLine{3187                      z-\/>ey = scan\_y\_top;}
\DoxyCodeLine{3188                   \}}
\DoxyCodeLine{3189                \}}
\DoxyCodeLine{3190                STBTT\_assert(z-\/>ey >= scan\_y\_top); \textcolor{comment}{// if we get really unlucky a tiny bit of an edge can be out of bounds}}
\DoxyCodeLine{3191                \textcolor{comment}{// insert at front}}
\DoxyCodeLine{3192                z-\/>next = active;}
\DoxyCodeLine{3193                active = z;}
\DoxyCodeLine{3194             \}}
\DoxyCodeLine{3195          \}}
\DoxyCodeLine{3196          ++e;}
\DoxyCodeLine{3197       \}}
\DoxyCodeLine{3198 }
\DoxyCodeLine{3199       \textcolor{comment}{// now process all active edges}}
\DoxyCodeLine{3200       \textcolor{keywordflow}{if} (active)}
\DoxyCodeLine{3201          stbtt\_\_fill\_active\_edges\_new(scanline, scanline2+1, result-\/>w, active, scan\_y\_top);}
\DoxyCodeLine{3202 }
\DoxyCodeLine{3203       \{}
\DoxyCodeLine{3204          \textcolor{keywordtype}{float} sum = 0;}
\DoxyCodeLine{3205          \textcolor{keywordflow}{for} (i=0; i < result-\/>w; ++i) \{}
\DoxyCodeLine{3206             \textcolor{keywordtype}{float} k;}
\DoxyCodeLine{3207             \textcolor{keywordtype}{int} m;}
\DoxyCodeLine{3208             sum += scanline2[i];}
\DoxyCodeLine{3209             k = scanline[i] + sum;}
\DoxyCodeLine{3210             k = (float) STBTT\_fabs(k)*255 + 0.5f;}
\DoxyCodeLine{3211             m = (int) k;}
\DoxyCodeLine{3212             \textcolor{keywordflow}{if} (m > 255) m = 255;}
\DoxyCodeLine{3213             result-\/>pixels[j*result-\/>stride + i] = (\textcolor{keywordtype}{unsigned} char) m;}
\DoxyCodeLine{3214          \}}
\DoxyCodeLine{3215       \}}
\DoxyCodeLine{3216       \textcolor{comment}{// advance all the edges}}
\DoxyCodeLine{3217       step = \&active;}
\DoxyCodeLine{3218       \textcolor{keywordflow}{while} (*step) \{}
\DoxyCodeLine{3219          stbtt\_\_active\_edge *z = *step;}
\DoxyCodeLine{3220          z-\/>fx += z-\/>fdx; \textcolor{comment}{// advance to position for current scanline}}
\DoxyCodeLine{3221          step = \&((*step)-\/>next); \textcolor{comment}{// advance through list}}
\DoxyCodeLine{3222       \}}
\DoxyCodeLine{3223 }
\DoxyCodeLine{3224       ++y;}
\DoxyCodeLine{3225       ++j;}
\DoxyCodeLine{3226    \}}
\DoxyCodeLine{3227 }
\DoxyCodeLine{3228    stbtt\_\_hheap\_cleanup(\&hh, userdata);}
\DoxyCodeLine{3229 }
\DoxyCodeLine{3230    \textcolor{keywordflow}{if} (scanline != scanline\_data)}
\DoxyCodeLine{3231       STBTT\_free(scanline, userdata);}
\DoxyCodeLine{3232 \}}
\DoxyCodeLine{3233 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{3234 \textcolor{preprocessor}{\#error "{}Unrecognized value of STBTT\_RASTERIZER\_VERSION"{}}}
\DoxyCodeLine{3235 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3236 }
\DoxyCodeLine{3237 \textcolor{preprocessor}{\#define STBTT\_\_COMPARE(a,b)  ((a)-\/>y0 < (b)-\/>y0)}}
\DoxyCodeLine{3238 }
\DoxyCodeLine{3239 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_sort\_edges\_ins\_sort(stbtt\_\_edge *p, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{3240 \{}
\DoxyCodeLine{3241    \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{3242    \textcolor{keywordflow}{for} (i=1; i < n; ++i) \{}
\DoxyCodeLine{3243       stbtt\_\_edge t = p[i], *a = \&t;}
\DoxyCodeLine{3244       j = i;}
\DoxyCodeLine{3245       \textcolor{keywordflow}{while} (j > 0) \{}
\DoxyCodeLine{3246          stbtt\_\_edge *b = \&p[j-\/1];}
\DoxyCodeLine{3247          \textcolor{keywordtype}{int} c = STBTT\_\_COMPARE(a,b);}
\DoxyCodeLine{3248          \textcolor{keywordflow}{if} (!c) \textcolor{keywordflow}{break};}
\DoxyCodeLine{3249          p[j] = p[j-\/1];}
\DoxyCodeLine{3250          -\/-\/j;}
\DoxyCodeLine{3251       \}}
\DoxyCodeLine{3252       \textcolor{keywordflow}{if} (i != j)}
\DoxyCodeLine{3253          p[j] = t;}
\DoxyCodeLine{3254    \}}
\DoxyCodeLine{3255 \}}
\DoxyCodeLine{3256 }
\DoxyCodeLine{3257 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_sort\_edges\_quicksort(stbtt\_\_edge *p, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{3258 \{}
\DoxyCodeLine{3259    \textcolor{comment}{/* threshold for transitioning to insertion sort */}}
\DoxyCodeLine{3260    \textcolor{keywordflow}{while} (n > 12) \{}
\DoxyCodeLine{3261       stbtt\_\_edge t;}
\DoxyCodeLine{3262       \textcolor{keywordtype}{int} c01,c12,c,m,i,j;}
\DoxyCodeLine{3263 }
\DoxyCodeLine{3264       \textcolor{comment}{/* compute median of three */}}
\DoxyCodeLine{3265       m = n >> 1;}
\DoxyCodeLine{3266       c01 = STBTT\_\_COMPARE(\&p[0],\&p[m]);}
\DoxyCodeLine{3267       c12 = STBTT\_\_COMPARE(\&p[m],\&p[n-\/1]);}
\DoxyCodeLine{3268       \textcolor{comment}{/* if 0 >= mid >= end, or 0 < mid < end, then use mid */}}
\DoxyCodeLine{3269       \textcolor{keywordflow}{if} (c01 != c12) \{}
\DoxyCodeLine{3270          \textcolor{comment}{/* otherwise, we'll need to swap something else to middle */}}
\DoxyCodeLine{3271          \textcolor{keywordtype}{int} z;}
\DoxyCodeLine{3272          c = STBTT\_\_COMPARE(\&p[0],\&p[n-\/1]);}
\DoxyCodeLine{3273          \textcolor{comment}{/* 0>mid \&\& mid<n:  0>n => n; 0<n => 0 */}}
\DoxyCodeLine{3274          \textcolor{comment}{/* 0<mid \&\& mid>n:  0>n => 0; 0<n => n */}}
\DoxyCodeLine{3275          z = (c == c12) ? 0 : n-\/1;}
\DoxyCodeLine{3276          t = p[z];}
\DoxyCodeLine{3277          p[z] = p[m];}
\DoxyCodeLine{3278          p[m] = t;}
\DoxyCodeLine{3279       \}}
\DoxyCodeLine{3280       \textcolor{comment}{/* now p[m] is the median-\/of-\/three */}}
\DoxyCodeLine{3281       \textcolor{comment}{/* swap it to the beginning so it won't move around */}}
\DoxyCodeLine{3282       t = p[0];}
\DoxyCodeLine{3283       p[0] = p[m];}
\DoxyCodeLine{3284       p[m] = t;}
\DoxyCodeLine{3285 }
\DoxyCodeLine{3286       \textcolor{comment}{/* partition loop */}}
\DoxyCodeLine{3287       i=1;}
\DoxyCodeLine{3288       j=n-\/1;}
\DoxyCodeLine{3289       \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{3290          \textcolor{comment}{/* handling of equality is crucial here */}}
\DoxyCodeLine{3291          \textcolor{comment}{/* for sentinels \& efficiency with duplicates */}}
\DoxyCodeLine{3292          \textcolor{keywordflow}{for} (;;++i) \{}
\DoxyCodeLine{3293             \textcolor{keywordflow}{if} (!STBTT\_\_COMPARE(\&p[i], \&p[0])) \textcolor{keywordflow}{break};}
\DoxyCodeLine{3294          \}}
\DoxyCodeLine{3295          \textcolor{keywordflow}{for} (;;-\/-\/j) \{}
\DoxyCodeLine{3296             \textcolor{keywordflow}{if} (!STBTT\_\_COMPARE(\&p[0], \&p[j])) \textcolor{keywordflow}{break};}
\DoxyCodeLine{3297          \}}
\DoxyCodeLine{3298          \textcolor{comment}{/* make sure we haven't crossed */}}
\DoxyCodeLine{3299          \textcolor{keywordflow}{if} (i >= j) \textcolor{keywordflow}{break};}
\DoxyCodeLine{3300          t = p[i];}
\DoxyCodeLine{3301          p[i] = p[j];}
\DoxyCodeLine{3302          p[j] = t;}
\DoxyCodeLine{3303 }
\DoxyCodeLine{3304          ++i;}
\DoxyCodeLine{3305          -\/-\/j;}
\DoxyCodeLine{3306       \}}
\DoxyCodeLine{3307       \textcolor{comment}{/* recurse on smaller side, iterate on larger */}}
\DoxyCodeLine{3308       \textcolor{keywordflow}{if} (j < (n-\/i)) \{}
\DoxyCodeLine{3309          stbtt\_\_sort\_edges\_quicksort(p,j);}
\DoxyCodeLine{3310          p = p+i;}
\DoxyCodeLine{3311          n = n-\/i;}
\DoxyCodeLine{3312       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3313          stbtt\_\_sort\_edges\_quicksort(p+i, n-\/i);}
\DoxyCodeLine{3314          n = j;}
\DoxyCodeLine{3315       \}}
\DoxyCodeLine{3316    \}}
\DoxyCodeLine{3317 \}}
\DoxyCodeLine{3318 }
\DoxyCodeLine{3319 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_sort\_edges(stbtt\_\_edge *p, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{3320 \{}
\DoxyCodeLine{3321    stbtt\_\_sort\_edges\_quicksort(p, n);}
\DoxyCodeLine{3322    stbtt\_\_sort\_edges\_ins\_sort(p, n);}
\DoxyCodeLine{3323 \}}
\DoxyCodeLine{3324 }
\DoxyCodeLine{3325 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{3326 \{}
\DoxyCodeLine{3327    \textcolor{keywordtype}{float} x,y;}
\DoxyCodeLine{3328 \} stbtt\_\_point;}
\DoxyCodeLine{3329 }
\DoxyCodeLine{3330 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_rasterize(\mbox{\hyperlink{structstbtt____bitmap}{stbtt\_\_bitmap}} *result, stbtt\_\_point *pts, \textcolor{keywordtype}{int} *wcount, \textcolor{keywordtype}{int} windings, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} off\_x, \textcolor{keywordtype}{int} off\_y, \textcolor{keywordtype}{int} invert, \textcolor{keywordtype}{void} *userdata)}
\DoxyCodeLine{3331 \{}
\DoxyCodeLine{3332    \textcolor{keywordtype}{float} y\_scale\_inv = invert ? -\/scale\_y : scale\_y;}
\DoxyCodeLine{3333    stbtt\_\_edge *e;}
\DoxyCodeLine{3334    \textcolor{keywordtype}{int} n,i,j,k,m;}
\DoxyCodeLine{3335 \textcolor{preprocessor}{\#if STBTT\_RASTERIZER\_VERSION == 1}}
\DoxyCodeLine{3336    \textcolor{keywordtype}{int} vsubsample = result-\/>h < 8 ? 15 : 5;}
\DoxyCodeLine{3337 \textcolor{preprocessor}{\#elif STBTT\_RASTERIZER\_VERSION == 2}}
\DoxyCodeLine{3338    \textcolor{keywordtype}{int} vsubsample = 1;}
\DoxyCodeLine{3339 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{3340 \textcolor{preprocessor}{   \#error "{}Unrecognized value of STBTT\_RASTERIZER\_VERSION"{}}}
\DoxyCodeLine{3341 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3342    \textcolor{comment}{// vsubsample should divide 255 evenly; otherwise we won't reach full opacity}}
\DoxyCodeLine{3343 }
\DoxyCodeLine{3344    \textcolor{comment}{// now we have to blow out the windings into explicit edge lists}}
\DoxyCodeLine{3345    n = 0;}
\DoxyCodeLine{3346    \textcolor{keywordflow}{for} (i=0; i < windings; ++i)}
\DoxyCodeLine{3347       n += wcount[i];}
\DoxyCodeLine{3348 }
\DoxyCodeLine{3349    e = (stbtt\_\_edge *) STBTT\_malloc(\textcolor{keyword}{sizeof}(*e) * (n+1), userdata); \textcolor{comment}{// add an extra one as a sentinel}}
\DoxyCodeLine{3350    \textcolor{keywordflow}{if} (e == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{3351    n = 0;}
\DoxyCodeLine{3352 }
\DoxyCodeLine{3353    m=0;}
\DoxyCodeLine{3354    \textcolor{keywordflow}{for} (i=0; i < windings; ++i) \{}
\DoxyCodeLine{3355       stbtt\_\_point *p = pts + m;}
\DoxyCodeLine{3356       m += wcount[i];}
\DoxyCodeLine{3357       j = wcount[i]-\/1;}
\DoxyCodeLine{3358       \textcolor{keywordflow}{for} (k=0; k < wcount[i]; j=k++) \{}
\DoxyCodeLine{3359          \textcolor{keywordtype}{int} a=k,b=j;}
\DoxyCodeLine{3360          \textcolor{comment}{// skip the edge if horizontal}}
\DoxyCodeLine{3361          \textcolor{keywordflow}{if} (p[j].y == p[k].y)}
\DoxyCodeLine{3362             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{3363          \textcolor{comment}{// add edge from j to k to the list}}
\DoxyCodeLine{3364          e[n].invert = 0;}
\DoxyCodeLine{3365          \textcolor{keywordflow}{if} (invert ? p[j].y > p[k].y : p[j].y < p[k].y) \{}
\DoxyCodeLine{3366             e[n].invert = 1;}
\DoxyCodeLine{3367             a=j,b=k;}
\DoxyCodeLine{3368          \}}
\DoxyCodeLine{3369          e[n].x0 = p[a].x * scale\_x + shift\_x;}
\DoxyCodeLine{3370          e[n].y0 = (p[a].y * y\_scale\_inv + shift\_y) * vsubsample;}
\DoxyCodeLine{3371          e[n].x1 = p[b].x * scale\_x + shift\_x;}
\DoxyCodeLine{3372          e[n].y1 = (p[b].y * y\_scale\_inv + shift\_y) * vsubsample;}
\DoxyCodeLine{3373          ++n;}
\DoxyCodeLine{3374       \}}
\DoxyCodeLine{3375    \}}
\DoxyCodeLine{3376 }
\DoxyCodeLine{3377    \textcolor{comment}{// now sort the edges by their highest point (should snap to integer, and then by x)}}
\DoxyCodeLine{3378    \textcolor{comment}{//STBTT\_sort(e, n, sizeof(e[0]), stbtt\_\_edge\_compare);}}
\DoxyCodeLine{3379    stbtt\_\_sort\_edges(e, n);}
\DoxyCodeLine{3380 }
\DoxyCodeLine{3381    \textcolor{comment}{// now, traverse the scanlines and find the intersections on each scanline, use xor winding rule}}
\DoxyCodeLine{3382    stbtt\_\_rasterize\_sorted\_edges(result, e, n, vsubsample, off\_x, off\_y, userdata);}
\DoxyCodeLine{3383 }
\DoxyCodeLine{3384    STBTT\_free(e, userdata);}
\DoxyCodeLine{3385 \}}
\DoxyCodeLine{3386 }
\DoxyCodeLine{3387 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_add\_point(stbtt\_\_point *points, \textcolor{keywordtype}{int} n, \textcolor{keywordtype}{float} x, \textcolor{keywordtype}{float} y)}
\DoxyCodeLine{3388 \{}
\DoxyCodeLine{3389    \textcolor{keywordflow}{if} (!points) \textcolor{keywordflow}{return}; \textcolor{comment}{// during first pass, it's unallocated}}
\DoxyCodeLine{3390    points[n].x = x;}
\DoxyCodeLine{3391    points[n].y = y;}
\DoxyCodeLine{3392 \}}
\DoxyCodeLine{3393 }
\DoxyCodeLine{3394 \textcolor{comment}{// tessellate until threshold p is happy... @TODO warped to compensate for non-\/linear stretching}}
\DoxyCodeLine{3395 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_tesselate\_curve(stbtt\_\_point *points, \textcolor{keywordtype}{int} *num\_points, \textcolor{keywordtype}{float} x0, \textcolor{keywordtype}{float} y0, \textcolor{keywordtype}{float} x1, \textcolor{keywordtype}{float} y1, \textcolor{keywordtype}{float} x2, \textcolor{keywordtype}{float} y2, \textcolor{keywordtype}{float} objspace\_flatness\_squared, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{3396 \{}
\DoxyCodeLine{3397    \textcolor{comment}{// midpoint}}
\DoxyCodeLine{3398    \textcolor{keywordtype}{float} mx = (x0 + 2*x1 + x2)/4;}
\DoxyCodeLine{3399    \textcolor{keywordtype}{float} my = (y0 + 2*y1 + y2)/4;}
\DoxyCodeLine{3400    \textcolor{comment}{// versus directly drawn line}}
\DoxyCodeLine{3401    \textcolor{keywordtype}{float} dx = (x0+x2)/2 -\/ mx;}
\DoxyCodeLine{3402    \textcolor{keywordtype}{float} dy = (y0+y2)/2 -\/ my;}
\DoxyCodeLine{3403    \textcolor{keywordflow}{if} (n > 16) \textcolor{comment}{// 65536 segments on one curve better be enough!}}
\DoxyCodeLine{3404       \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3405    \textcolor{keywordflow}{if} (dx*dx+dy*dy > objspace\_flatness\_squared) \{ \textcolor{comment}{// half-\/pixel error allowed... need to be smaller if AA}}
\DoxyCodeLine{3406       stbtt\_\_tesselate\_curve(points, num\_points, x0,y0, (x0+x1)/2.0f,(y0+y1)/2.0f, mx,my, objspace\_flatness\_squared,n+1);}
\DoxyCodeLine{3407       stbtt\_\_tesselate\_curve(points, num\_points, mx,my, (x1+x2)/2.0f,(y1+y2)/2.0f, x2,y2, objspace\_flatness\_squared,n+1);}
\DoxyCodeLine{3408    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3409       stbtt\_\_add\_point(points, *num\_points,x2,y2);}
\DoxyCodeLine{3410       *num\_points = *num\_points+1;}
\DoxyCodeLine{3411    \}}
\DoxyCodeLine{3412    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3413 \}}
\DoxyCodeLine{3414 }
\DoxyCodeLine{3415 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_tesselate\_cubic(stbtt\_\_point *points, \textcolor{keywordtype}{int} *num\_points, \textcolor{keywordtype}{float} x0, \textcolor{keywordtype}{float} y0, \textcolor{keywordtype}{float} x1, \textcolor{keywordtype}{float} y1, \textcolor{keywordtype}{float} x2, \textcolor{keywordtype}{float} y2, \textcolor{keywordtype}{float} x3, \textcolor{keywordtype}{float} y3, \textcolor{keywordtype}{float} objspace\_flatness\_squared, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{3416 \{}
\DoxyCodeLine{3417    \textcolor{comment}{// @TODO this "{}flatness"{} calculation is just made-\/up nonsense that seems to work well enough}}
\DoxyCodeLine{3418    \textcolor{keywordtype}{float} dx0 = x1-\/x0;}
\DoxyCodeLine{3419    \textcolor{keywordtype}{float} dy0 = y1-\/y0;}
\DoxyCodeLine{3420    \textcolor{keywordtype}{float} dx1 = x2-\/x1;}
\DoxyCodeLine{3421    \textcolor{keywordtype}{float} dy1 = y2-\/y1;}
\DoxyCodeLine{3422    \textcolor{keywordtype}{float} dx2 = x3-\/x2;}
\DoxyCodeLine{3423    \textcolor{keywordtype}{float} dy2 = y3-\/y2;}
\DoxyCodeLine{3424    \textcolor{keywordtype}{float} dx = x3-\/x0;}
\DoxyCodeLine{3425    \textcolor{keywordtype}{float} dy = y3-\/y0;}
\DoxyCodeLine{3426    \textcolor{keywordtype}{float} longlen = (float) (STBTT\_sqrt(dx0*dx0+dy0*dy0)+STBTT\_sqrt(dx1*dx1+dy1*dy1)+STBTT\_sqrt(dx2*dx2+dy2*dy2));}
\DoxyCodeLine{3427    \textcolor{keywordtype}{float} shortlen = (float) STBTT\_sqrt(dx*dx+dy*dy);}
\DoxyCodeLine{3428    \textcolor{keywordtype}{float} flatness\_squared = longlen*longlen-\/shortlen*shortlen;}
\DoxyCodeLine{3429 }
\DoxyCodeLine{3430    \textcolor{keywordflow}{if} (n > 16) \textcolor{comment}{// 65536 segments on one curve better be enough!}}
\DoxyCodeLine{3431       \textcolor{keywordflow}{return};}
\DoxyCodeLine{3432 }
\DoxyCodeLine{3433    \textcolor{keywordflow}{if} (flatness\_squared > objspace\_flatness\_squared) \{}
\DoxyCodeLine{3434       \textcolor{keywordtype}{float} x01 = (x0+x1)/2;}
\DoxyCodeLine{3435       \textcolor{keywordtype}{float} y01 = (y0+y1)/2;}
\DoxyCodeLine{3436       \textcolor{keywordtype}{float} x12 = (x1+x2)/2;}
\DoxyCodeLine{3437       \textcolor{keywordtype}{float} y12 = (y1+y2)/2;}
\DoxyCodeLine{3438       \textcolor{keywordtype}{float} x23 = (x2+x3)/2;}
\DoxyCodeLine{3439       \textcolor{keywordtype}{float} y23 = (y2+y3)/2;}
\DoxyCodeLine{3440 }
\DoxyCodeLine{3441       \textcolor{keywordtype}{float} xa = (x01+x12)/2;}
\DoxyCodeLine{3442       \textcolor{keywordtype}{float} ya = (y01+y12)/2;}
\DoxyCodeLine{3443       \textcolor{keywordtype}{float} xb = (x12+x23)/2;}
\DoxyCodeLine{3444       \textcolor{keywordtype}{float} yb = (y12+y23)/2;}
\DoxyCodeLine{3445 }
\DoxyCodeLine{3446       \textcolor{keywordtype}{float} mx = (xa+xb)/2;}
\DoxyCodeLine{3447       \textcolor{keywordtype}{float} my = (ya+yb)/2;}
\DoxyCodeLine{3448 }
\DoxyCodeLine{3449       stbtt\_\_tesselate\_cubic(points, num\_points, x0,y0, x01,y01, xa,ya, mx,my, objspace\_flatness\_squared,n+1);}
\DoxyCodeLine{3450       stbtt\_\_tesselate\_cubic(points, num\_points, mx,my, xb,yb, x23,y23, x3,y3, objspace\_flatness\_squared,n+1);}
\DoxyCodeLine{3451    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{3452       stbtt\_\_add\_point(points, *num\_points,x3,y3);}
\DoxyCodeLine{3453       *num\_points = *num\_points+1;}
\DoxyCodeLine{3454    \}}
\DoxyCodeLine{3455 \}}
\DoxyCodeLine{3456 }
\DoxyCodeLine{3457 \textcolor{comment}{// returns number of contours}}
\DoxyCodeLine{3458 \textcolor{keyword}{static} stbtt\_\_point *stbtt\_FlattenCurves(\mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *vertices, \textcolor{keywordtype}{int} num\_verts, \textcolor{keywordtype}{float} objspace\_flatness, \textcolor{keywordtype}{int} **contour\_lengths, \textcolor{keywordtype}{int} *num\_contours, \textcolor{keywordtype}{void} *userdata)}
\DoxyCodeLine{3459 \{}
\DoxyCodeLine{3460    stbtt\_\_point *points=0;}
\DoxyCodeLine{3461    \textcolor{keywordtype}{int} num\_points=0;}
\DoxyCodeLine{3462 }
\DoxyCodeLine{3463    \textcolor{keywordtype}{float} objspace\_flatness\_squared = objspace\_flatness * objspace\_flatness;}
\DoxyCodeLine{3464    \textcolor{keywordtype}{int} i,n=0,start=0, pass;}
\DoxyCodeLine{3465 }
\DoxyCodeLine{3466    \textcolor{comment}{// count how many "{}moves"{} there are to get the contour count}}
\DoxyCodeLine{3467    \textcolor{keywordflow}{for} (i=0; i < num\_verts; ++i)}
\DoxyCodeLine{3468       \textcolor{keywordflow}{if} (vertices[i].type == STBTT\_vmove)}
\DoxyCodeLine{3469          ++n;}
\DoxyCodeLine{3470 }
\DoxyCodeLine{3471    *num\_contours = n;}
\DoxyCodeLine{3472    \textcolor{keywordflow}{if} (n == 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3473 }
\DoxyCodeLine{3474    *contour\_lengths = (\textcolor{keywordtype}{int} *) STBTT\_malloc(\textcolor{keyword}{sizeof}(**contour\_lengths) * n, userdata);}
\DoxyCodeLine{3475 }
\DoxyCodeLine{3476    \textcolor{keywordflow}{if} (*contour\_lengths == 0) \{}
\DoxyCodeLine{3477       *num\_contours = 0;}
\DoxyCodeLine{3478       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3479    \}}
\DoxyCodeLine{3480 }
\DoxyCodeLine{3481    \textcolor{comment}{// make two passes through the points so we don't need to realloc}}
\DoxyCodeLine{3482    \textcolor{keywordflow}{for} (pass=0; pass < 2; ++pass) \{}
\DoxyCodeLine{3483       \textcolor{keywordtype}{float} x=0,y=0;}
\DoxyCodeLine{3484       \textcolor{keywordflow}{if} (pass == 1) \{}
\DoxyCodeLine{3485          points = (stbtt\_\_point *) STBTT\_malloc(num\_points * \textcolor{keyword}{sizeof}(points[0]), userdata);}
\DoxyCodeLine{3486          \textcolor{keywordflow}{if} (points == NULL) \textcolor{keywordflow}{goto} \mbox{\hyperlink{group___log_ggaf620be757be465af66aa69d08a4f5c8ead564300fbfad44fd5b83f8ba9441ba5d}{error}};}
\DoxyCodeLine{3487       \}}
\DoxyCodeLine{3488       num\_points = 0;}
\DoxyCodeLine{3489       n= -\/1;}
\DoxyCodeLine{3490       \textcolor{keywordflow}{for} (i=0; i < num\_verts; ++i) \{}
\DoxyCodeLine{3491          \textcolor{keywordflow}{switch} (vertices[i].type) \{}
\DoxyCodeLine{3492             \textcolor{keywordflow}{case} STBTT\_vmove:}
\DoxyCodeLine{3493                \textcolor{comment}{// start the next contour}}
\DoxyCodeLine{3494                \textcolor{keywordflow}{if} (n >= 0)}
\DoxyCodeLine{3495                   (*contour\_lengths)[n] = num\_points -\/ start;}
\DoxyCodeLine{3496                ++n;}
\DoxyCodeLine{3497                start = num\_points;}
\DoxyCodeLine{3498 }
\DoxyCodeLine{3499                x = vertices[i].x, y = vertices[i].y;}
\DoxyCodeLine{3500                stbtt\_\_add\_point(points, num\_points++, x,y);}
\DoxyCodeLine{3501                \textcolor{keywordflow}{break};}
\DoxyCodeLine{3502             \textcolor{keywordflow}{case} STBTT\_vline:}
\DoxyCodeLine{3503                x = vertices[i].x, y = vertices[i].y;}
\DoxyCodeLine{3504                stbtt\_\_add\_point(points, num\_points++, x, y);}
\DoxyCodeLine{3505                \textcolor{keywordflow}{break};}
\DoxyCodeLine{3506             \textcolor{keywordflow}{case} STBTT\_vcurve:}
\DoxyCodeLine{3507                stbtt\_\_tesselate\_curve(points, \&num\_points, x,y,}
\DoxyCodeLine{3508                                         vertices[i].cx, vertices[i].cy,}
\DoxyCodeLine{3509                                         vertices[i].x,  vertices[i].y,}
\DoxyCodeLine{3510                                         objspace\_flatness\_squared, 0);}
\DoxyCodeLine{3511                x = vertices[i].x, y = vertices[i].y;}
\DoxyCodeLine{3512                \textcolor{keywordflow}{break};}
\DoxyCodeLine{3513             \textcolor{keywordflow}{case} STBTT\_vcubic:}
\DoxyCodeLine{3514                stbtt\_\_tesselate\_cubic(points, \&num\_points, x,y,}
\DoxyCodeLine{3515                                         vertices[i].cx, vertices[i].cy,}
\DoxyCodeLine{3516                                         vertices[i].cx1, vertices[i].cy1,}
\DoxyCodeLine{3517                                         vertices[i].x,  vertices[i].y,}
\DoxyCodeLine{3518                                         objspace\_flatness\_squared, 0);}
\DoxyCodeLine{3519                x = vertices[i].x, y = vertices[i].y;}
\DoxyCodeLine{3520                \textcolor{keywordflow}{break};}
\DoxyCodeLine{3521          \}}
\DoxyCodeLine{3522       \}}
\DoxyCodeLine{3523       (*contour\_lengths)[n] = num\_points -\/ start;}
\DoxyCodeLine{3524    \}}
\DoxyCodeLine{3525 }
\DoxyCodeLine{3526    \textcolor{keywordflow}{return} points;}
\DoxyCodeLine{3527 \mbox{\hyperlink{group___log_ggaf620be757be465af66aa69d08a4f5c8ead564300fbfad44fd5b83f8ba9441ba5d}{error}}:}
\DoxyCodeLine{3528    STBTT\_free(points, userdata);}
\DoxyCodeLine{3529    STBTT\_free(*contour\_lengths, userdata);}
\DoxyCodeLine{3530    *contour\_lengths = 0;}
\DoxyCodeLine{3531    *num\_contours = 0;}
\DoxyCodeLine{3532    \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{3533 \}}
\DoxyCodeLine{3534 }
\DoxyCodeLine{3535 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_Rasterize(\mbox{\hyperlink{structstbtt____bitmap}{stbtt\_\_bitmap}} *result, \textcolor{keywordtype}{float} flatness\_in\_pixels, \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *vertices, \textcolor{keywordtype}{int} num\_verts, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} x\_off, \textcolor{keywordtype}{int} y\_off, \textcolor{keywordtype}{int} invert, \textcolor{keywordtype}{void} *userdata)}
\DoxyCodeLine{3536 \{}
\DoxyCodeLine{3537    \textcolor{keywordtype}{float} scale            = scale\_x > scale\_y ? scale\_y : scale\_x;}
\DoxyCodeLine{3538    \textcolor{keywordtype}{int} winding\_count      = 0;}
\DoxyCodeLine{3539    \textcolor{keywordtype}{int} *winding\_lengths   = NULL;}
\DoxyCodeLine{3540    stbtt\_\_point *windings = stbtt\_FlattenCurves(vertices, num\_verts, flatness\_in\_pixels / scale, \&winding\_lengths, \&winding\_count, userdata);}
\DoxyCodeLine{3541    \textcolor{keywordflow}{if} (windings) \{}
\DoxyCodeLine{3542       stbtt\_\_rasterize(result, windings, winding\_lengths, winding\_count, scale\_x, scale\_y, shift\_x, shift\_y, x\_off, y\_off, invert, userdata);}
\DoxyCodeLine{3543       STBTT\_free(winding\_lengths, userdata);}
\DoxyCodeLine{3544       STBTT\_free(windings, userdata);}
\DoxyCodeLine{3545    \}}
\DoxyCodeLine{3546 \}}
\DoxyCodeLine{3547 }
\DoxyCodeLine{3548 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_FreeBitmap(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *bitmap, \textcolor{keywordtype}{void} *userdata)}
\DoxyCodeLine{3549 \{}
\DoxyCodeLine{3550    STBTT\_free(bitmap, userdata);}
\DoxyCodeLine{3551 \}}
\DoxyCodeLine{3552 }
\DoxyCodeLine{3553 STBTT\_DEF \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbtt\_GetGlyphBitmapSubpixel(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} glyph, \textcolor{keywordtype}{int} *width, \textcolor{keywordtype}{int} *height, \textcolor{keywordtype}{int} *xoff, \textcolor{keywordtype}{int} *yoff)}
\DoxyCodeLine{3554 \{}
\DoxyCodeLine{3555    \textcolor{keywordtype}{int} ix0,iy0,ix1,iy1;}
\DoxyCodeLine{3556    \mbox{\hyperlink{structstbtt____bitmap}{stbtt\_\_bitmap}} gbm;}
\DoxyCodeLine{3557    \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *vertices;   }
\DoxyCodeLine{3558    \textcolor{keywordtype}{int} num\_verts = stbtt\_GetGlyphShape(info, glyph, \&vertices);}
\DoxyCodeLine{3559 }
\DoxyCodeLine{3560    \textcolor{keywordflow}{if} (scale\_x == 0) scale\_x = scale\_y;}
\DoxyCodeLine{3561    \textcolor{keywordflow}{if} (scale\_y == 0) \{}
\DoxyCodeLine{3562       \textcolor{keywordflow}{if} (scale\_x == 0) \{}
\DoxyCodeLine{3563          STBTT\_free(vertices, info-\/>userdata);}
\DoxyCodeLine{3564          \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{3565       \}}
\DoxyCodeLine{3566       scale\_y = scale\_x;}
\DoxyCodeLine{3567    \}}
\DoxyCodeLine{3568 }
\DoxyCodeLine{3569    stbtt\_GetGlyphBitmapBoxSubpixel(info, glyph, scale\_x, scale\_y, shift\_x, shift\_y, \&ix0,\&iy0,\&ix1,\&iy1);}
\DoxyCodeLine{3570 }
\DoxyCodeLine{3571    \textcolor{comment}{// now we get the size}}
\DoxyCodeLine{3572    gbm.w = (ix1 -\/ ix0);}
\DoxyCodeLine{3573    gbm.h = (iy1 -\/ iy0);}
\DoxyCodeLine{3574    gbm.pixels = NULL; \textcolor{comment}{// in case we error}}
\DoxyCodeLine{3575 }
\DoxyCodeLine{3576    \textcolor{keywordflow}{if} (width ) *width  = gbm.w;}
\DoxyCodeLine{3577    \textcolor{keywordflow}{if} (height) *height = gbm.h;}
\DoxyCodeLine{3578    \textcolor{keywordflow}{if} (xoff  ) *xoff   = ix0;}
\DoxyCodeLine{3579    \textcolor{keywordflow}{if} (yoff  ) *yoff   = iy0;}
\DoxyCodeLine{3580    }
\DoxyCodeLine{3581    \textcolor{keywordflow}{if} (gbm.w \&\& gbm.h) \{}
\DoxyCodeLine{3582       gbm.pixels = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) STBTT\_malloc(gbm.w * gbm.h, info-\/>userdata);}
\DoxyCodeLine{3583       \textcolor{keywordflow}{if} (gbm.pixels) \{}
\DoxyCodeLine{3584          gbm.stride = gbm.w;}
\DoxyCodeLine{3585 }
\DoxyCodeLine{3586          stbtt\_Rasterize(\&gbm, 0.35f, vertices, num\_verts, scale\_x, scale\_y, shift\_x, shift\_y, ix0, iy0, 1, info-\/>userdata);}
\DoxyCodeLine{3587       \}}
\DoxyCodeLine{3588    \}}
\DoxyCodeLine{3589    STBTT\_free(vertices, info-\/>userdata);}
\DoxyCodeLine{3590    \textcolor{keywordflow}{return} gbm.pixels;}
\DoxyCodeLine{3591 \}   }
\DoxyCodeLine{3592 }
\DoxyCodeLine{3593 STBTT\_DEF \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbtt\_GetGlyphBitmap(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{int} glyph, \textcolor{keywordtype}{int} *width, \textcolor{keywordtype}{int} *height, \textcolor{keywordtype}{int} *xoff, \textcolor{keywordtype}{int} *yoff)}
\DoxyCodeLine{3594 \{}
\DoxyCodeLine{3595    \textcolor{keywordflow}{return} stbtt\_GetGlyphBitmapSubpixel(info, scale\_x, scale\_y, 0.0f, 0.0f, glyph, width, height, xoff, yoff);}
\DoxyCodeLine{3596 \}}
\DoxyCodeLine{3597 }
\DoxyCodeLine{3598 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_MakeGlyphBitmapSubpixel(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *output, \textcolor{keywordtype}{int} out\_w, \textcolor{keywordtype}{int} out\_h, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} glyph)}
\DoxyCodeLine{3599 \{}
\DoxyCodeLine{3600    \textcolor{keywordtype}{int} ix0,iy0;}
\DoxyCodeLine{3601    \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *vertices;}
\DoxyCodeLine{3602    \textcolor{keywordtype}{int} num\_verts = stbtt\_GetGlyphShape(info, glyph, \&vertices);}
\DoxyCodeLine{3603    \mbox{\hyperlink{structstbtt____bitmap}{stbtt\_\_bitmap}} gbm;   }
\DoxyCodeLine{3604 }
\DoxyCodeLine{3605    stbtt\_GetGlyphBitmapBoxSubpixel(info, glyph, scale\_x, scale\_y, shift\_x, shift\_y, \&ix0,\&iy0,0,0);}
\DoxyCodeLine{3606    gbm.pixels = output;}
\DoxyCodeLine{3607    gbm.w = out\_w;}
\DoxyCodeLine{3608    gbm.h = out\_h;}
\DoxyCodeLine{3609    gbm.stride = out\_stride;}
\DoxyCodeLine{3610 }
\DoxyCodeLine{3611    \textcolor{keywordflow}{if} (gbm.w \&\& gbm.h)}
\DoxyCodeLine{3612       stbtt\_Rasterize(\&gbm, 0.35f, vertices, num\_verts, scale\_x, scale\_y, shift\_x, shift\_y, ix0,iy0, 1, info-\/>userdata);}
\DoxyCodeLine{3613 }
\DoxyCodeLine{3614    STBTT\_free(vertices, info-\/>userdata);}
\DoxyCodeLine{3615 \}}
\DoxyCodeLine{3616 }
\DoxyCodeLine{3617 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_MakeGlyphBitmap(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *output, \textcolor{keywordtype}{int} out\_w, \textcolor{keywordtype}{int} out\_h, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{int} glyph)}
\DoxyCodeLine{3618 \{}
\DoxyCodeLine{3619    stbtt\_MakeGlyphBitmapSubpixel(info, output, out\_w, out\_h, out\_stride, scale\_x, scale\_y, 0.0f,0.0f, glyph);}
\DoxyCodeLine{3620 \}}
\DoxyCodeLine{3621 }
\DoxyCodeLine{3622 STBTT\_DEF \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbtt\_GetCodepointBitmapSubpixel(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{int} *width, \textcolor{keywordtype}{int} *height, \textcolor{keywordtype}{int} *xoff, \textcolor{keywordtype}{int} *yoff)}
\DoxyCodeLine{3623 \{}
\DoxyCodeLine{3624    \textcolor{keywordflow}{return} stbtt\_GetGlyphBitmapSubpixel(info, scale\_x, scale\_y,shift\_x,shift\_y, stbtt\_FindGlyphIndex(info,codepoint), width,height,xoff,yoff);}
\DoxyCodeLine{3625 \}   }
\DoxyCodeLine{3626 }
\DoxyCodeLine{3627 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_MakeCodepointBitmapSubpixelPrefilter(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *output, \textcolor{keywordtype}{int} out\_w, \textcolor{keywordtype}{int} out\_h, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} oversample\_x, \textcolor{keywordtype}{int} oversample\_y, \textcolor{keywordtype}{float} *sub\_x, \textcolor{keywordtype}{float} *sub\_y, \textcolor{keywordtype}{int} codepoint)}
\DoxyCodeLine{3628 \{}
\DoxyCodeLine{3629    stbtt\_MakeGlyphBitmapSubpixelPrefilter(info, output, out\_w, out\_h, out\_stride, scale\_x, scale\_y, shift\_x, shift\_y, oversample\_x, oversample\_y, sub\_x, sub\_y, stbtt\_FindGlyphIndex(info,codepoint));}
\DoxyCodeLine{3630 \}}
\DoxyCodeLine{3631 }
\DoxyCodeLine{3632 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_MakeCodepointBitmapSubpixel(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *output, \textcolor{keywordtype}{int} out\_w, \textcolor{keywordtype}{int} out\_h, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} codepoint)}
\DoxyCodeLine{3633 \{}
\DoxyCodeLine{3634    stbtt\_MakeGlyphBitmapSubpixel(info, output, out\_w, out\_h, out\_stride, scale\_x, scale\_y, shift\_x, shift\_y, stbtt\_FindGlyphIndex(info,codepoint));}
\DoxyCodeLine{3635 \}}
\DoxyCodeLine{3636 }
\DoxyCodeLine{3637 STBTT\_DEF \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stbtt\_GetCodepointBitmap(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{int} *width, \textcolor{keywordtype}{int} *height, \textcolor{keywordtype}{int} *xoff, \textcolor{keywordtype}{int} *yoff)}
\DoxyCodeLine{3638 \{}
\DoxyCodeLine{3639    \textcolor{keywordflow}{return} stbtt\_GetCodepointBitmapSubpixel(info, scale\_x, scale\_y, 0.0f,0.0f, codepoint, width,height,xoff,yoff);}
\DoxyCodeLine{3640 \}   }
\DoxyCodeLine{3641 }
\DoxyCodeLine{3642 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_MakeCodepointBitmap(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *output, \textcolor{keywordtype}{int} out\_w, \textcolor{keywordtype}{int} out\_h, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{int} codepoint)}
\DoxyCodeLine{3643 \{}
\DoxyCodeLine{3644    stbtt\_MakeCodepointBitmapSubpixel(info, output, out\_w, out\_h, out\_stride, scale\_x, scale\_y, 0.0f,0.0f, codepoint);}
\DoxyCodeLine{3645 \}}
\DoxyCodeLine{3646 }
\DoxyCodeLine{3648 \textcolor{comment}{//}}
\DoxyCodeLine{3649 \textcolor{comment}{// bitmap baking}}
\DoxyCodeLine{3650 \textcolor{comment}{//}}
\DoxyCodeLine{3651 \textcolor{comment}{// This is SUPER-\/CRAPPY packing to keep source code small}}
\DoxyCodeLine{3652 }
\DoxyCodeLine{3653 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_BakeFontBitmap\_internal(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} offset,  \textcolor{comment}{// font location (use offset=0 for plain .ttf)}}
\DoxyCodeLine{3654                                 \textcolor{keywordtype}{float} pixel\_height,                     \textcolor{comment}{// height of font in pixels}}
\DoxyCodeLine{3655                                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *pixels, \textcolor{keywordtype}{int} pw, \textcolor{keywordtype}{int} ph,  \textcolor{comment}{// bitmap to be filled in}}
\DoxyCodeLine{3656                                 \textcolor{keywordtype}{int} first\_char, \textcolor{keywordtype}{int} num\_chars,          \textcolor{comment}{// characters to bake}}
\DoxyCodeLine{3657                                 \mbox{\hyperlink{structstbtt__bakedchar}{stbtt\_bakedchar}} *chardata)}
\DoxyCodeLine{3658 \{}
\DoxyCodeLine{3659    \textcolor{keywordtype}{float} scale;}
\DoxyCodeLine{3660    \textcolor{keywordtype}{int} x,y,bottom\_y, i;}
\DoxyCodeLine{3661    \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} f;}
\DoxyCodeLine{3662    f.userdata = NULL;}
\DoxyCodeLine{3663    \textcolor{keywordflow}{if} (!stbtt\_InitFont(\&f, data, offset))}
\DoxyCodeLine{3664       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{3665    STBTT\_memset(pixels, 0, pw*ph); \textcolor{comment}{// background of 0 around pixels}}
\DoxyCodeLine{3666    x=y=1;}
\DoxyCodeLine{3667    bottom\_y = 1;}
\DoxyCodeLine{3668 }
\DoxyCodeLine{3669    scale = stbtt\_ScaleForPixelHeight(\&f, pixel\_height);}
\DoxyCodeLine{3670 }
\DoxyCodeLine{3671    \textcolor{keywordflow}{for} (i=0; i < num\_chars; ++i) \{}
\DoxyCodeLine{3672       \textcolor{keywordtype}{int} advance, lsb, x0,y0,x1,y1,gw,gh;}
\DoxyCodeLine{3673       \textcolor{keywordtype}{int} g = stbtt\_FindGlyphIndex(\&f, first\_char + i);}
\DoxyCodeLine{3674       stbtt\_GetGlyphHMetrics(\&f, g, \&advance, \&lsb);}
\DoxyCodeLine{3675       stbtt\_GetGlyphBitmapBox(\&f, g, scale,scale, \&x0,\&y0,\&x1,\&y1);}
\DoxyCodeLine{3676       gw = x1-\/x0;}
\DoxyCodeLine{3677       gh = y1-\/y0;}
\DoxyCodeLine{3678       \textcolor{keywordflow}{if} (x + gw + 1 >= pw)}
\DoxyCodeLine{3679          y = bottom\_y, x = 1; \textcolor{comment}{// advance to next row}}
\DoxyCodeLine{3680       \textcolor{keywordflow}{if} (y + gh + 1 >= ph) \textcolor{comment}{// check if it fits vertically AFTER potentially moving to next row}}
\DoxyCodeLine{3681          \textcolor{keywordflow}{return} -\/i;}
\DoxyCodeLine{3682       STBTT\_assert(x+gw < pw);}
\DoxyCodeLine{3683       STBTT\_assert(y+gh < ph);}
\DoxyCodeLine{3684       stbtt\_MakeGlyphBitmap(\&f, pixels+x+y*pw, gw,gh,pw, scale,scale, g);}
\DoxyCodeLine{3685       chardata[i].x0 = (stbtt\_int16) x;}
\DoxyCodeLine{3686       chardata[i].y0 = (stbtt\_int16) y;}
\DoxyCodeLine{3687       chardata[i].x1 = (stbtt\_int16) (x + gw);}
\DoxyCodeLine{3688       chardata[i].y1 = (stbtt\_int16) (y + gh);}
\DoxyCodeLine{3689       chardata[i].xadvance = scale * advance;}
\DoxyCodeLine{3690       chardata[i].xoff     = (float) x0;}
\DoxyCodeLine{3691       chardata[i].yoff     = (float) y0;}
\DoxyCodeLine{3692       x = x + gw + 1;}
\DoxyCodeLine{3693       \textcolor{keywordflow}{if} (y+gh+1 > bottom\_y)}
\DoxyCodeLine{3694          bottom\_y = y+gh+1;}
\DoxyCodeLine{3695    \}}
\DoxyCodeLine{3696    \textcolor{keywordflow}{return} bottom\_y;}
\DoxyCodeLine{3697 \}}
\DoxyCodeLine{3698 }
\DoxyCodeLine{3699 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetBakedQuad(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__bakedchar}{stbtt\_bakedchar}} *chardata, \textcolor{keywordtype}{int} pw, \textcolor{keywordtype}{int} ph, \textcolor{keywordtype}{int} char\_index, \textcolor{keywordtype}{float} *xpos, \textcolor{keywordtype}{float} *ypos, \mbox{\hyperlink{structstbtt__aligned__quad}{stbtt\_aligned\_quad}} *q, \textcolor{keywordtype}{int} opengl\_fillrule)}
\DoxyCodeLine{3700 \{}
\DoxyCodeLine{3701    \textcolor{keywordtype}{float} d3d\_bias = opengl\_fillrule ? 0 : -\/0.5f;}
\DoxyCodeLine{3702    \textcolor{keywordtype}{float} ipw = 1.0f / pw, iph = 1.0f / ph;}
\DoxyCodeLine{3703    \textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__bakedchar}{stbtt\_bakedchar}} *b = chardata + char\_index;}
\DoxyCodeLine{3704    \textcolor{keywordtype}{int} round\_x = STBTT\_ifloor((*xpos + b-\/>xoff) + 0.5f);}
\DoxyCodeLine{3705    \textcolor{keywordtype}{int} round\_y = STBTT\_ifloor((*ypos + b-\/>yoff) + 0.5f);}
\DoxyCodeLine{3706 }
\DoxyCodeLine{3707    q-\/>x0 = round\_x + d3d\_bias;}
\DoxyCodeLine{3708    q-\/>y0 = round\_y + d3d\_bias;}
\DoxyCodeLine{3709    q-\/>x1 = round\_x + b-\/>x1 -\/ b-\/>x0 + d3d\_bias;}
\DoxyCodeLine{3710    q-\/>y1 = round\_y + b-\/>y1 -\/ b-\/>y0 + d3d\_bias;}
\DoxyCodeLine{3711 }
\DoxyCodeLine{3712    q-\/>s0 = b-\/>x0 * ipw;}
\DoxyCodeLine{3713    q-\/>t0 = b-\/>y0 * iph;}
\DoxyCodeLine{3714    q-\/>s1 = b-\/>x1 * ipw;}
\DoxyCodeLine{3715    q-\/>t1 = b-\/>y1 * iph;}
\DoxyCodeLine{3716 }
\DoxyCodeLine{3717    *xpos += b-\/>xadvance;}
\DoxyCodeLine{3718 \}}
\DoxyCodeLine{3719 }
\DoxyCodeLine{3721 \textcolor{comment}{//}}
\DoxyCodeLine{3722 \textcolor{comment}{// rectangle packing replacement routines if you don't have stb\_rect\_pack.h}}
\DoxyCodeLine{3723 \textcolor{comment}{//}}
\DoxyCodeLine{3724 }
\DoxyCodeLine{3725 \textcolor{preprocessor}{\#ifndef STB\_RECT\_PACK\_VERSION}}
\DoxyCodeLine{3726 }
\DoxyCodeLine{3727 \textcolor{keyword}{typedef} \textcolor{keywordtype}{int} stbrp\_coord;}
\DoxyCodeLine{3728 }
\DoxyCodeLine{3730 \textcolor{comment}{//                                                                                //}}
\DoxyCodeLine{3731 \textcolor{comment}{//                                                                                //}}
\DoxyCodeLine{3732 \textcolor{comment}{// COMPILER WARNING ?!?!?                                                         //}}
\DoxyCodeLine{3733 \textcolor{comment}{//                                                                                //}}
\DoxyCodeLine{3734 \textcolor{comment}{//                                                                                //}}
\DoxyCodeLine{3735 \textcolor{comment}{// if you get a compile warning due to these symbols being defined more than      //}}
\DoxyCodeLine{3736 \textcolor{comment}{// once, move \#include "{}stb\_rect\_pack.h"{} before \#include "{}stb\_truetype.h"{}         //}}
\DoxyCodeLine{3737 \textcolor{comment}{//                                                                                //}}
\DoxyCodeLine{3739 \textcolor{comment}{}}
\DoxyCodeLine{3740 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{3741 \{}
\DoxyCodeLine{3742    \textcolor{keywordtype}{int} width,height;}
\DoxyCodeLine{3743    \textcolor{keywordtype}{int} x,y,bottom\_y;}
\DoxyCodeLine{3744 \} \mbox{\hyperlink{structstbrp__context}{stbrp\_context}};}
\DoxyCodeLine{3745 }
\DoxyCodeLine{3746 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{3747 \{}
\DoxyCodeLine{3748    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} x;}
\DoxyCodeLine{3749 \} \mbox{\hyperlink{structstbrp__node}{stbrp\_node}};}
\DoxyCodeLine{3750 }
\DoxyCodeLine{3751 \textcolor{keyword}{struct }\mbox{\hyperlink{structstbrp__rect}{stbrp\_rect}}}
\DoxyCodeLine{3752 \{}
\DoxyCodeLine{3753    stbrp\_coord x,y;}
\DoxyCodeLine{3754    \textcolor{keywordtype}{int} id,w,h,was\_packed;}
\DoxyCodeLine{3755 \};}
\DoxyCodeLine{3756 }
\DoxyCodeLine{3757 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbrp\_init\_target(\mbox{\hyperlink{structstbrp__context}{stbrp\_context}} *con, \textcolor{keywordtype}{int} pw, \textcolor{keywordtype}{int} ph, \mbox{\hyperlink{structstbrp__node}{stbrp\_node}} *nodes, \textcolor{keywordtype}{int} num\_nodes)}
\DoxyCodeLine{3758 \{}
\DoxyCodeLine{3759    con-\/>width  = pw;}
\DoxyCodeLine{3760    con-\/>height = ph;}
\DoxyCodeLine{3761    con-\/>x = 0;}
\DoxyCodeLine{3762    con-\/>y = 0;}
\DoxyCodeLine{3763    con-\/>bottom\_y = 0;}
\DoxyCodeLine{3764    STBTT\_\_NOTUSED(nodes);}
\DoxyCodeLine{3765    STBTT\_\_NOTUSED(num\_nodes);   }
\DoxyCodeLine{3766 \}}
\DoxyCodeLine{3767 }
\DoxyCodeLine{3768 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbrp\_pack\_rects(\mbox{\hyperlink{structstbrp__context}{stbrp\_context}} *con, \mbox{\hyperlink{structstbrp__rect}{stbrp\_rect}} *rects, \textcolor{keywordtype}{int} num\_rects)}
\DoxyCodeLine{3769 \{}
\DoxyCodeLine{3770    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{3771    \textcolor{keywordflow}{for} (i=0; i < num\_rects; ++i) \{}
\DoxyCodeLine{3772       \textcolor{keywordflow}{if} (con-\/>x + rects[i].w > con-\/>width) \{}
\DoxyCodeLine{3773          con-\/>x = 0;}
\DoxyCodeLine{3774          con-\/>y = con-\/>bottom\_y;}
\DoxyCodeLine{3775       \}}
\DoxyCodeLine{3776       \textcolor{keywordflow}{if} (con-\/>y + rects[i].h > con-\/>height)}
\DoxyCodeLine{3777          \textcolor{keywordflow}{break};}
\DoxyCodeLine{3778       rects[i].x = con-\/>x;}
\DoxyCodeLine{3779       rects[i].y = con-\/>y;}
\DoxyCodeLine{3780       rects[i].was\_packed = 1;}
\DoxyCodeLine{3781       con-\/>x += rects[i].w;}
\DoxyCodeLine{3782       \textcolor{keywordflow}{if} (con-\/>y + rects[i].h > con-\/>bottom\_y)}
\DoxyCodeLine{3783          con-\/>bottom\_y = con-\/>y + rects[i].h;}
\DoxyCodeLine{3784    \}}
\DoxyCodeLine{3785    \textcolor{keywordflow}{for} (   ; i < num\_rects; ++i)}
\DoxyCodeLine{3786       rects[i].was\_packed = 0;}
\DoxyCodeLine{3787 \}}
\DoxyCodeLine{3788 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{3789 }
\DoxyCodeLine{3791 \textcolor{comment}{//}}
\DoxyCodeLine{3792 \textcolor{comment}{// bitmap baking}}
\DoxyCodeLine{3793 \textcolor{comment}{//}}
\DoxyCodeLine{3794 \textcolor{comment}{// This is SUPER-\/AWESOME (tm Ryan Gordon) packing using stb\_rect\_pack.h. If}}
\DoxyCodeLine{3795 \textcolor{comment}{// stb\_rect\_pack.h isn't available, it uses the BakeFontBitmap strategy.}}
\DoxyCodeLine{3796 }
\DoxyCodeLine{3797 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_PackBegin(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *pixels, \textcolor{keywordtype}{int} pw, \textcolor{keywordtype}{int} ph, \textcolor{keywordtype}{int} stride\_in\_bytes, \textcolor{keywordtype}{int} padding, \textcolor{keywordtype}{void} *alloc\_context)}
\DoxyCodeLine{3798 \{}
\DoxyCodeLine{3799    \mbox{\hyperlink{structstbrp__context}{stbrp\_context}} *context = (\mbox{\hyperlink{structstbrp__context}{stbrp\_context}} *) STBTT\_malloc(\textcolor{keyword}{sizeof}(*context)            ,alloc\_context);}
\DoxyCodeLine{3800    \textcolor{keywordtype}{int}            num\_nodes = pw -\/ padding;}
\DoxyCodeLine{3801    \mbox{\hyperlink{structstbrp__node}{stbrp\_node}}    *nodes   = (\mbox{\hyperlink{structstbrp__node}{stbrp\_node}}    *) STBTT\_malloc(\textcolor{keyword}{sizeof}(*nodes  ) * num\_nodes,alloc\_context);}
\DoxyCodeLine{3802 }
\DoxyCodeLine{3803    \textcolor{keywordflow}{if} (context == NULL || nodes == NULL) \{}
\DoxyCodeLine{3804       \textcolor{keywordflow}{if} (context != NULL) STBTT\_free(context, alloc\_context);}
\DoxyCodeLine{3805       \textcolor{keywordflow}{if} (nodes   != NULL) STBTT\_free(nodes  , alloc\_context);}
\DoxyCodeLine{3806       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{3807    \}}
\DoxyCodeLine{3808 }
\DoxyCodeLine{3809    spc-\/>user\_allocator\_context = alloc\_context;}
\DoxyCodeLine{3810    spc-\/>width = pw;}
\DoxyCodeLine{3811    spc-\/>height = ph;}
\DoxyCodeLine{3812    spc-\/>pixels = pixels;}
\DoxyCodeLine{3813    spc-\/>pack\_info = context;}
\DoxyCodeLine{3814    spc-\/>nodes = nodes;}
\DoxyCodeLine{3815    spc-\/>padding = padding;}
\DoxyCodeLine{3816    spc-\/>stride\_in\_bytes = stride\_in\_bytes != 0 ? stride\_in\_bytes : pw;}
\DoxyCodeLine{3817    spc-\/>h\_oversample = 1;}
\DoxyCodeLine{3818    spc-\/>v\_oversample = 1;}
\DoxyCodeLine{3819    spc-\/>skip\_missing = 0;}
\DoxyCodeLine{3820 }
\DoxyCodeLine{3821    stbrp\_init\_target(context, pw-\/padding, ph-\/padding, nodes, num\_nodes);}
\DoxyCodeLine{3822 }
\DoxyCodeLine{3823    \textcolor{keywordflow}{if} (pixels)}
\DoxyCodeLine{3824       STBTT\_memset(pixels, 0, pw*ph); \textcolor{comment}{// background of 0 around pixels}}
\DoxyCodeLine{3825 }
\DoxyCodeLine{3826    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{3827 \}}
\DoxyCodeLine{3828 }
\DoxyCodeLine{3829 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_PackEnd  (\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc)}
\DoxyCodeLine{3830 \{}
\DoxyCodeLine{3831    STBTT\_free(spc-\/>nodes    , spc-\/>user\_allocator\_context);}
\DoxyCodeLine{3832    STBTT\_free(spc-\/>pack\_info, spc-\/>user\_allocator\_context);}
\DoxyCodeLine{3833 \}}
\DoxyCodeLine{3834 }
\DoxyCodeLine{3835 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_PackSetOversampling(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} h\_oversample, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} v\_oversample)}
\DoxyCodeLine{3836 \{}
\DoxyCodeLine{3837    STBTT\_assert(h\_oversample <= STBTT\_MAX\_OVERSAMPLE);}
\DoxyCodeLine{3838    STBTT\_assert(v\_oversample <= STBTT\_MAX\_OVERSAMPLE);}
\DoxyCodeLine{3839    \textcolor{keywordflow}{if} (h\_oversample <= STBTT\_MAX\_OVERSAMPLE)}
\DoxyCodeLine{3840       spc-\/>h\_oversample = h\_oversample;}
\DoxyCodeLine{3841    \textcolor{keywordflow}{if} (v\_oversample <= STBTT\_MAX\_OVERSAMPLE)}
\DoxyCodeLine{3842       spc-\/>v\_oversample = v\_oversample;}
\DoxyCodeLine{3843 \}}
\DoxyCodeLine{3844 }
\DoxyCodeLine{3845 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_PackSetSkipMissingCodepoints(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keywordtype}{int} skip)}
\DoxyCodeLine{3846 \{}
\DoxyCodeLine{3847    spc-\/>skip\_missing = skip;}
\DoxyCodeLine{3848 \}}
\DoxyCodeLine{3849 }
\DoxyCodeLine{3850 \textcolor{preprocessor}{\#define STBTT\_\_OVER\_MASK  (STBTT\_MAX\_OVERSAMPLE-\/1)}}
\DoxyCodeLine{3851 }
\DoxyCodeLine{3852 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_h\_prefilter(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *pixels, \textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} h, \textcolor{keywordtype}{int} stride\_in\_bytes, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} kernel\_width)}
\DoxyCodeLine{3853 \{}
\DoxyCodeLine{3854    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} buffer[STBTT\_MAX\_OVERSAMPLE];}
\DoxyCodeLine{3855    \textcolor{keywordtype}{int} safe\_w = w -\/ kernel\_width;}
\DoxyCodeLine{3856    \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{3857    STBTT\_memset(buffer, 0, STBTT\_MAX\_OVERSAMPLE); \textcolor{comment}{// suppress bogus warning from VS2013 -\/analyze}}
\DoxyCodeLine{3858    \textcolor{keywordflow}{for} (j=0; j < h; ++j) \{}
\DoxyCodeLine{3859       \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{3860       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} total;}
\DoxyCodeLine{3861       STBTT\_memset(buffer, 0, kernel\_width);}
\DoxyCodeLine{3862 }
\DoxyCodeLine{3863       total = 0;}
\DoxyCodeLine{3864 }
\DoxyCodeLine{3865       \textcolor{comment}{// make kernel\_width a constant in common cases so compiler can optimize out the divide}}
\DoxyCodeLine{3866       \textcolor{keywordflow}{switch} (kernel\_width) \{}
\DoxyCodeLine{3867          \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{3868             \textcolor{keywordflow}{for} (i=0; i <= safe\_w; ++i) \{}
\DoxyCodeLine{3869                total += pixels[i] -\/ buffer[i \& STBTT\_\_OVER\_MASK];}
\DoxyCodeLine{3870                buffer[(i+kernel\_width) \& STBTT\_\_OVER\_MASK] = pixels[i];}
\DoxyCodeLine{3871                pixels[i] = (\textcolor{keywordtype}{unsigned} char) (total / 2);}
\DoxyCodeLine{3872             \}}
\DoxyCodeLine{3873             \textcolor{keywordflow}{break};}
\DoxyCodeLine{3874          \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{3875             \textcolor{keywordflow}{for} (i=0; i <= safe\_w; ++i) \{}
\DoxyCodeLine{3876                total += pixels[i] -\/ buffer[i \& STBTT\_\_OVER\_MASK];}
\DoxyCodeLine{3877                buffer[(i+kernel\_width) \& STBTT\_\_OVER\_MASK] = pixels[i];}
\DoxyCodeLine{3878                pixels[i] = (\textcolor{keywordtype}{unsigned} char) (total / 3);}
\DoxyCodeLine{3879             \}}
\DoxyCodeLine{3880             \textcolor{keywordflow}{break};}
\DoxyCodeLine{3881          \textcolor{keywordflow}{case} 4:}
\DoxyCodeLine{3882             \textcolor{keywordflow}{for} (i=0; i <= safe\_w; ++i) \{}
\DoxyCodeLine{3883                total += pixels[i] -\/ buffer[i \& STBTT\_\_OVER\_MASK];}
\DoxyCodeLine{3884                buffer[(i+kernel\_width) \& STBTT\_\_OVER\_MASK] = pixels[i];}
\DoxyCodeLine{3885                pixels[i] = (\textcolor{keywordtype}{unsigned} char) (total / 4);}
\DoxyCodeLine{3886             \}}
\DoxyCodeLine{3887             \textcolor{keywordflow}{break};}
\DoxyCodeLine{3888          \textcolor{keywordflow}{case} 5:}
\DoxyCodeLine{3889             \textcolor{keywordflow}{for} (i=0; i <= safe\_w; ++i) \{}
\DoxyCodeLine{3890                total += pixels[i] -\/ buffer[i \& STBTT\_\_OVER\_MASK];}
\DoxyCodeLine{3891                buffer[(i+kernel\_width) \& STBTT\_\_OVER\_MASK] = pixels[i];}
\DoxyCodeLine{3892                pixels[i] = (\textcolor{keywordtype}{unsigned} char) (total / 5);}
\DoxyCodeLine{3893             \}}
\DoxyCodeLine{3894             \textcolor{keywordflow}{break};}
\DoxyCodeLine{3895          \textcolor{keywordflow}{default}:}
\DoxyCodeLine{3896             \textcolor{keywordflow}{for} (i=0; i <= safe\_w; ++i) \{}
\DoxyCodeLine{3897                total += pixels[i] -\/ buffer[i \& STBTT\_\_OVER\_MASK];}
\DoxyCodeLine{3898                buffer[(i+kernel\_width) \& STBTT\_\_OVER\_MASK] = pixels[i];}
\DoxyCodeLine{3899                pixels[i] = (\textcolor{keywordtype}{unsigned} char) (total / kernel\_width);}
\DoxyCodeLine{3900             \}}
\DoxyCodeLine{3901             \textcolor{keywordflow}{break};}
\DoxyCodeLine{3902       \}}
\DoxyCodeLine{3903 }
\DoxyCodeLine{3904       \textcolor{keywordflow}{for} (; i < w; ++i) \{}
\DoxyCodeLine{3905          STBTT\_assert(pixels[i] == 0);}
\DoxyCodeLine{3906          total -\/= buffer[i \& STBTT\_\_OVER\_MASK];}
\DoxyCodeLine{3907          pixels[i] = (\textcolor{keywordtype}{unsigned} char) (total / kernel\_width);}
\DoxyCodeLine{3908       \}}
\DoxyCodeLine{3909 }
\DoxyCodeLine{3910       pixels += stride\_in\_bytes;}
\DoxyCodeLine{3911    \}}
\DoxyCodeLine{3912 \}}
\DoxyCodeLine{3913 }
\DoxyCodeLine{3914 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stbtt\_\_v\_prefilter(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *pixels, \textcolor{keywordtype}{int} w, \textcolor{keywordtype}{int} h, \textcolor{keywordtype}{int} stride\_in\_bytes, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} kernel\_width)}
\DoxyCodeLine{3915 \{}
\DoxyCodeLine{3916    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} buffer[STBTT\_MAX\_OVERSAMPLE];}
\DoxyCodeLine{3917    \textcolor{keywordtype}{int} safe\_h = h -\/ kernel\_width;}
\DoxyCodeLine{3918    \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{3919    STBTT\_memset(buffer, 0, STBTT\_MAX\_OVERSAMPLE); \textcolor{comment}{// suppress bogus warning from VS2013 -\/analyze}}
\DoxyCodeLine{3920    \textcolor{keywordflow}{for} (j=0; j < w; ++j) \{}
\DoxyCodeLine{3921       \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{3922       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} total;}
\DoxyCodeLine{3923       STBTT\_memset(buffer, 0, kernel\_width);}
\DoxyCodeLine{3924 }
\DoxyCodeLine{3925       total = 0;}
\DoxyCodeLine{3926 }
\DoxyCodeLine{3927       \textcolor{comment}{// make kernel\_width a constant in common cases so compiler can optimize out the divide}}
\DoxyCodeLine{3928       \textcolor{keywordflow}{switch} (kernel\_width) \{}
\DoxyCodeLine{3929          \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{3930             \textcolor{keywordflow}{for} (i=0; i <= safe\_h; ++i) \{}
\DoxyCodeLine{3931                total += pixels[i*stride\_in\_bytes] -\/ buffer[i \& STBTT\_\_OVER\_MASK];}
\DoxyCodeLine{3932                buffer[(i+kernel\_width) \& STBTT\_\_OVER\_MASK] = pixels[i*stride\_in\_bytes];}
\DoxyCodeLine{3933                pixels[i*stride\_in\_bytes] = (\textcolor{keywordtype}{unsigned} char) (total / 2);}
\DoxyCodeLine{3934             \}}
\DoxyCodeLine{3935             \textcolor{keywordflow}{break};}
\DoxyCodeLine{3936          \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{3937             \textcolor{keywordflow}{for} (i=0; i <= safe\_h; ++i) \{}
\DoxyCodeLine{3938                total += pixels[i*stride\_in\_bytes] -\/ buffer[i \& STBTT\_\_OVER\_MASK];}
\DoxyCodeLine{3939                buffer[(i+kernel\_width) \& STBTT\_\_OVER\_MASK] = pixels[i*stride\_in\_bytes];}
\DoxyCodeLine{3940                pixels[i*stride\_in\_bytes] = (\textcolor{keywordtype}{unsigned} char) (total / 3);}
\DoxyCodeLine{3941             \}}
\DoxyCodeLine{3942             \textcolor{keywordflow}{break};}
\DoxyCodeLine{3943          \textcolor{keywordflow}{case} 4:}
\DoxyCodeLine{3944             \textcolor{keywordflow}{for} (i=0; i <= safe\_h; ++i) \{}
\DoxyCodeLine{3945                total += pixels[i*stride\_in\_bytes] -\/ buffer[i \& STBTT\_\_OVER\_MASK];}
\DoxyCodeLine{3946                buffer[(i+kernel\_width) \& STBTT\_\_OVER\_MASK] = pixels[i*stride\_in\_bytes];}
\DoxyCodeLine{3947                pixels[i*stride\_in\_bytes] = (\textcolor{keywordtype}{unsigned} char) (total / 4);}
\DoxyCodeLine{3948             \}}
\DoxyCodeLine{3949             \textcolor{keywordflow}{break};}
\DoxyCodeLine{3950          \textcolor{keywordflow}{case} 5:}
\DoxyCodeLine{3951             \textcolor{keywordflow}{for} (i=0; i <= safe\_h; ++i) \{}
\DoxyCodeLine{3952                total += pixels[i*stride\_in\_bytes] -\/ buffer[i \& STBTT\_\_OVER\_MASK];}
\DoxyCodeLine{3953                buffer[(i+kernel\_width) \& STBTT\_\_OVER\_MASK] = pixels[i*stride\_in\_bytes];}
\DoxyCodeLine{3954                pixels[i*stride\_in\_bytes] = (\textcolor{keywordtype}{unsigned} char) (total / 5);}
\DoxyCodeLine{3955             \}}
\DoxyCodeLine{3956             \textcolor{keywordflow}{break};}
\DoxyCodeLine{3957          \textcolor{keywordflow}{default}:}
\DoxyCodeLine{3958             \textcolor{keywordflow}{for} (i=0; i <= safe\_h; ++i) \{}
\DoxyCodeLine{3959                total += pixels[i*stride\_in\_bytes] -\/ buffer[i \& STBTT\_\_OVER\_MASK];}
\DoxyCodeLine{3960                buffer[(i+kernel\_width) \& STBTT\_\_OVER\_MASK] = pixels[i*stride\_in\_bytes];}
\DoxyCodeLine{3961                pixels[i*stride\_in\_bytes] = (\textcolor{keywordtype}{unsigned} char) (total / kernel\_width);}
\DoxyCodeLine{3962             \}}
\DoxyCodeLine{3963             \textcolor{keywordflow}{break};}
\DoxyCodeLine{3964       \}}
\DoxyCodeLine{3965 }
\DoxyCodeLine{3966       \textcolor{keywordflow}{for} (; i < h; ++i) \{}
\DoxyCodeLine{3967          STBTT\_assert(pixels[i*stride\_in\_bytes] == 0);}
\DoxyCodeLine{3968          total -\/= buffer[i \& STBTT\_\_OVER\_MASK];}
\DoxyCodeLine{3969          pixels[i*stride\_in\_bytes] = (\textcolor{keywordtype}{unsigned} char) (total / kernel\_width);}
\DoxyCodeLine{3970       \}}
\DoxyCodeLine{3971 }
\DoxyCodeLine{3972       pixels += 1;}
\DoxyCodeLine{3973    \}}
\DoxyCodeLine{3974 \}}
\DoxyCodeLine{3975 }
\DoxyCodeLine{3976 \textcolor{keyword}{static} \textcolor{keywordtype}{float} stbtt\_\_oversample\_shift(\textcolor{keywordtype}{int} oversample)}
\DoxyCodeLine{3977 \{}
\DoxyCodeLine{3978    \textcolor{keywordflow}{if} (!oversample)}
\DoxyCodeLine{3979       \textcolor{keywordflow}{return} 0.0f;}
\DoxyCodeLine{3980 }
\DoxyCodeLine{3981    \textcolor{comment}{// The prefilter is a box filter of width "{}oversample"{},}}
\DoxyCodeLine{3982    \textcolor{comment}{// which shifts phase by (oversample -\/ 1)/2 pixels in}}
\DoxyCodeLine{3983    \textcolor{comment}{// oversampled space. We want to shift in the opposite}}
\DoxyCodeLine{3984    \textcolor{comment}{// direction to counter this.}}
\DoxyCodeLine{3985    \textcolor{keywordflow}{return} (\textcolor{keywordtype}{float})-\/(oversample -\/ 1) / (2.0f * (\textcolor{keywordtype}{float})oversample);}
\DoxyCodeLine{3986 \}}
\DoxyCodeLine{3987 }
\DoxyCodeLine{3988 \textcolor{comment}{// rects array must be big enough to accommodate all characters in the given ranges}}
\DoxyCodeLine{3989 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_PackFontRangesGatherRects(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \mbox{\hyperlink{structstbtt__pack__range}{stbtt\_pack\_range}} *ranges, \textcolor{keywordtype}{int} num\_ranges, \mbox{\hyperlink{structstbrp__rect}{stbrp\_rect}} *rects)}
\DoxyCodeLine{3990 \{}
\DoxyCodeLine{3991    \textcolor{keywordtype}{int} i,j,k;}
\DoxyCodeLine{3992 }
\DoxyCodeLine{3993    k=0;}
\DoxyCodeLine{3994    \textcolor{keywordflow}{for} (i=0; i < num\_ranges; ++i) \{}
\DoxyCodeLine{3995       \textcolor{keywordtype}{float} fh = ranges[i].font\_size;}
\DoxyCodeLine{3996       \textcolor{keywordtype}{float} scale = fh > 0 ? stbtt\_ScaleForPixelHeight(info, fh) : stbtt\_ScaleForMappingEmToPixels(info, -\/fh);}
\DoxyCodeLine{3997       ranges[i].h\_oversample = (\textcolor{keywordtype}{unsigned} char) spc-\/>h\_oversample;}
\DoxyCodeLine{3998       ranges[i].v\_oversample = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}) spc-\/>v\_oversample;}
\DoxyCodeLine{3999       \textcolor{keywordflow}{for} (j=0; j < ranges[i].num\_chars; ++j) \{}
\DoxyCodeLine{4000          \textcolor{keywordtype}{int} x0,y0,x1,y1;}
\DoxyCodeLine{4001          \textcolor{keywordtype}{int} codepoint = ranges[i].array\_of\_unicode\_codepoints == NULL ? ranges[i].first\_unicode\_codepoint\_in\_range + j : ranges[i].array\_of\_unicode\_codepoints[j];}
\DoxyCodeLine{4002          \textcolor{keywordtype}{int} glyph = stbtt\_FindGlyphIndex(info, codepoint);}
\DoxyCodeLine{4003          \textcolor{keywordflow}{if} (glyph == 0 \&\& spc-\/>skip\_missing) \{}
\DoxyCodeLine{4004             rects[k].w = rects[k].h = 0;}
\DoxyCodeLine{4005          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4006             stbtt\_GetGlyphBitmapBoxSubpixel(info,glyph,}
\DoxyCodeLine{4007                                             scale * spc-\/>h\_oversample,}
\DoxyCodeLine{4008                                             scale * spc-\/>v\_oversample,}
\DoxyCodeLine{4009                                             0,0,}
\DoxyCodeLine{4010                                             \&x0,\&y0,\&x1,\&y1);}
\DoxyCodeLine{4011             rects[k].w = (stbrp\_coord) (x1-\/x0 + spc-\/>padding + spc-\/>h\_oversample-\/1);}
\DoxyCodeLine{4012             rects[k].h = (stbrp\_coord) (y1-\/y0 + spc-\/>padding + spc-\/>v\_oversample-\/1);}
\DoxyCodeLine{4013          \}}
\DoxyCodeLine{4014          ++k;}
\DoxyCodeLine{4015       \}}
\DoxyCodeLine{4016    \}}
\DoxyCodeLine{4017 }
\DoxyCodeLine{4018    \textcolor{keywordflow}{return} k;}
\DoxyCodeLine{4019 \}}
\DoxyCodeLine{4020 }
\DoxyCodeLine{4021 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_MakeGlyphBitmapSubpixelPrefilter(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *output, \textcolor{keywordtype}{int} out\_w, \textcolor{keywordtype}{int} out\_h, \textcolor{keywordtype}{int} out\_stride, \textcolor{keywordtype}{float} scale\_x, \textcolor{keywordtype}{float} scale\_y, \textcolor{keywordtype}{float} shift\_x, \textcolor{keywordtype}{float} shift\_y, \textcolor{keywordtype}{int} prefilter\_x, \textcolor{keywordtype}{int} prefilter\_y, \textcolor{keywordtype}{float} *sub\_x, \textcolor{keywordtype}{float} *sub\_y, \textcolor{keywordtype}{int} glyph)}
\DoxyCodeLine{4022 \{}
\DoxyCodeLine{4023    stbtt\_MakeGlyphBitmapSubpixel(info,}
\DoxyCodeLine{4024                                  output,}
\DoxyCodeLine{4025                                  out\_w -\/ (prefilter\_x -\/ 1),}
\DoxyCodeLine{4026                                  out\_h -\/ (prefilter\_y -\/ 1),}
\DoxyCodeLine{4027                                  out\_stride,}
\DoxyCodeLine{4028                                  scale\_x,}
\DoxyCodeLine{4029                                  scale\_y,}
\DoxyCodeLine{4030                                  shift\_x,}
\DoxyCodeLine{4031                                  shift\_y,}
\DoxyCodeLine{4032                                  glyph);}
\DoxyCodeLine{4033 }
\DoxyCodeLine{4034    \textcolor{keywordflow}{if} (prefilter\_x > 1)}
\DoxyCodeLine{4035       stbtt\_\_h\_prefilter(output, out\_w, out\_h, out\_stride, prefilter\_x);}
\DoxyCodeLine{4036 }
\DoxyCodeLine{4037    \textcolor{keywordflow}{if} (prefilter\_y > 1)}
\DoxyCodeLine{4038       stbtt\_\_v\_prefilter(output, out\_w, out\_h, out\_stride, prefilter\_y);}
\DoxyCodeLine{4039 }
\DoxyCodeLine{4040    *sub\_x = stbtt\_\_oversample\_shift(prefilter\_x);}
\DoxyCodeLine{4041    *sub\_y = stbtt\_\_oversample\_shift(prefilter\_y);}
\DoxyCodeLine{4042 \}}
\DoxyCodeLine{4043 }
\DoxyCodeLine{4044 \textcolor{comment}{// rects array must be big enough to accommodate all characters in the given ranges}}
\DoxyCodeLine{4045 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_PackFontRangesRenderIntoRects(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \mbox{\hyperlink{structstbtt__pack__range}{stbtt\_pack\_range}} *ranges, \textcolor{keywordtype}{int} num\_ranges, \mbox{\hyperlink{structstbrp__rect}{stbrp\_rect}} *rects)}
\DoxyCodeLine{4046 \{}
\DoxyCodeLine{4047    \textcolor{keywordtype}{int} i,j,k, return\_value = 1;}
\DoxyCodeLine{4048 }
\DoxyCodeLine{4049    \textcolor{comment}{// save current values}}
\DoxyCodeLine{4050    \textcolor{keywordtype}{int} old\_h\_over = spc-\/>h\_oversample;}
\DoxyCodeLine{4051    \textcolor{keywordtype}{int} old\_v\_over = spc-\/>v\_oversample;}
\DoxyCodeLine{4052 }
\DoxyCodeLine{4053    k = 0;}
\DoxyCodeLine{4054    \textcolor{keywordflow}{for} (i=0; i < num\_ranges; ++i) \{}
\DoxyCodeLine{4055       \textcolor{keywordtype}{float} fh = ranges[i].font\_size;}
\DoxyCodeLine{4056       \textcolor{keywordtype}{float} scale = fh > 0 ? stbtt\_ScaleForPixelHeight(info, fh) : stbtt\_ScaleForMappingEmToPixels(info, -\/fh);}
\DoxyCodeLine{4057       \textcolor{keywordtype}{float} recip\_h,recip\_v,sub\_x,sub\_y;}
\DoxyCodeLine{4058       spc-\/>h\_oversample = ranges[i].h\_oversample;}
\DoxyCodeLine{4059       spc-\/>v\_oversample = ranges[i].v\_oversample;}
\DoxyCodeLine{4060       recip\_h = 1.0f / spc-\/>h\_oversample;}
\DoxyCodeLine{4061       recip\_v = 1.0f / spc-\/>v\_oversample;}
\DoxyCodeLine{4062       sub\_x = stbtt\_\_oversample\_shift(spc-\/>h\_oversample);}
\DoxyCodeLine{4063       sub\_y = stbtt\_\_oversample\_shift(spc-\/>v\_oversample);}
\DoxyCodeLine{4064       \textcolor{keywordflow}{for} (j=0; j < ranges[i].num\_chars; ++j) \{}
\DoxyCodeLine{4065          \mbox{\hyperlink{structstbrp__rect}{stbrp\_rect}} *r = \&rects[k];}
\DoxyCodeLine{4066          \textcolor{keywordflow}{if} (r-\/>was\_packed \&\& r-\/>w != 0 \&\& r-\/>h != 0) \{}
\DoxyCodeLine{4067             \mbox{\hyperlink{structstbtt__packedchar}{stbtt\_packedchar}} *bc = \&ranges[i].chardata\_for\_range[j];}
\DoxyCodeLine{4068             \textcolor{keywordtype}{int} advance, lsb, x0,y0,x1,y1;}
\DoxyCodeLine{4069             \textcolor{keywordtype}{int} codepoint = ranges[i].array\_of\_unicode\_codepoints == NULL ? ranges[i].first\_unicode\_codepoint\_in\_range + j : ranges[i].array\_of\_unicode\_codepoints[j];}
\DoxyCodeLine{4070             \textcolor{keywordtype}{int} glyph = stbtt\_FindGlyphIndex(info, codepoint);}
\DoxyCodeLine{4071             stbrp\_coord pad = (stbrp\_coord) spc-\/>padding;}
\DoxyCodeLine{4072 }
\DoxyCodeLine{4073             \textcolor{comment}{// pad on left and top}}
\DoxyCodeLine{4074             r-\/>x += pad;}
\DoxyCodeLine{4075             r-\/>y += pad;}
\DoxyCodeLine{4076             r-\/>w -\/= pad;}
\DoxyCodeLine{4077             r-\/>h -\/= pad;}
\DoxyCodeLine{4078             stbtt\_GetGlyphHMetrics(info, glyph, \&advance, \&lsb);}
\DoxyCodeLine{4079             stbtt\_GetGlyphBitmapBox(info, glyph,}
\DoxyCodeLine{4080                                     scale * spc-\/>h\_oversample,}
\DoxyCodeLine{4081                                     scale * spc-\/>v\_oversample,}
\DoxyCodeLine{4082                                     \&x0,\&y0,\&x1,\&y1);}
\DoxyCodeLine{4083             stbtt\_MakeGlyphBitmapSubpixel(info,}
\DoxyCodeLine{4084                                           spc-\/>pixels + r-\/>x + r-\/>y*spc-\/>stride\_in\_bytes,}
\DoxyCodeLine{4085                                           r-\/>w -\/ spc-\/>h\_oversample+1,}
\DoxyCodeLine{4086                                           r-\/>h -\/ spc-\/>v\_oversample+1,}
\DoxyCodeLine{4087                                           spc-\/>stride\_in\_bytes,}
\DoxyCodeLine{4088                                           scale * spc-\/>h\_oversample,}
\DoxyCodeLine{4089                                           scale * spc-\/>v\_oversample,}
\DoxyCodeLine{4090                                           0,0,}
\DoxyCodeLine{4091                                           glyph);}
\DoxyCodeLine{4092 }
\DoxyCodeLine{4093             \textcolor{keywordflow}{if} (spc-\/>h\_oversample > 1)}
\DoxyCodeLine{4094                stbtt\_\_h\_prefilter(spc-\/>pixels + r-\/>x + r-\/>y*spc-\/>stride\_in\_bytes,}
\DoxyCodeLine{4095                                   r-\/>w, r-\/>h, spc-\/>stride\_in\_bytes,}
\DoxyCodeLine{4096                                   spc-\/>h\_oversample);}
\DoxyCodeLine{4097 }
\DoxyCodeLine{4098             \textcolor{keywordflow}{if} (spc-\/>v\_oversample > 1)}
\DoxyCodeLine{4099                stbtt\_\_v\_prefilter(spc-\/>pixels + r-\/>x + r-\/>y*spc-\/>stride\_in\_bytes,}
\DoxyCodeLine{4100                                   r-\/>w, r-\/>h, spc-\/>stride\_in\_bytes,}
\DoxyCodeLine{4101                                   spc-\/>v\_oversample);}
\DoxyCodeLine{4102 }
\DoxyCodeLine{4103             bc-\/>x0       = (stbtt\_int16)  r-\/>x;}
\DoxyCodeLine{4104             bc-\/>y0       = (stbtt\_int16)  r-\/>y;}
\DoxyCodeLine{4105             bc-\/>x1       = (stbtt\_int16) (r-\/>x + r-\/>w);}
\DoxyCodeLine{4106             bc-\/>y1       = (stbtt\_int16) (r-\/>y + r-\/>h);}
\DoxyCodeLine{4107             bc-\/>xadvance =                scale * advance;}
\DoxyCodeLine{4108             bc-\/>xoff     =       (float)  x0 * recip\_h + sub\_x;}
\DoxyCodeLine{4109             bc-\/>yoff     =       (float)  y0 * recip\_v + sub\_y;}
\DoxyCodeLine{4110             bc-\/>xoff2    =                (x0 + r-\/>w) * recip\_h + sub\_x;}
\DoxyCodeLine{4111             bc-\/>yoff2    =                (y0 + r-\/>h) * recip\_v + sub\_y;}
\DoxyCodeLine{4112          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4113             return\_value = 0; \textcolor{comment}{// if any fail, report failure}}
\DoxyCodeLine{4114          \}}
\DoxyCodeLine{4115 }
\DoxyCodeLine{4116          ++k;}
\DoxyCodeLine{4117       \}}
\DoxyCodeLine{4118    \}}
\DoxyCodeLine{4119 }
\DoxyCodeLine{4120    \textcolor{comment}{// restore original values}}
\DoxyCodeLine{4121    spc-\/>h\_oversample = old\_h\_over;}
\DoxyCodeLine{4122    spc-\/>v\_oversample = old\_v\_over;}
\DoxyCodeLine{4123 }
\DoxyCodeLine{4124    \textcolor{keywordflow}{return} return\_value;}
\DoxyCodeLine{4125 \}}
\DoxyCodeLine{4126 }
\DoxyCodeLine{4127 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_PackFontRangesPackRects(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \mbox{\hyperlink{structstbrp__rect}{stbrp\_rect}} *rects, \textcolor{keywordtype}{int} num\_rects)}
\DoxyCodeLine{4128 \{}
\DoxyCodeLine{4129    stbrp\_pack\_rects((\mbox{\hyperlink{structstbrp__context}{stbrp\_context}} *) spc-\/>pack\_info, rects, num\_rects);}
\DoxyCodeLine{4130 \}}
\DoxyCodeLine{4131 }
\DoxyCodeLine{4132 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_PackFontRanges(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *fontdata, \textcolor{keywordtype}{int} font\_index, \mbox{\hyperlink{structstbtt__pack__range}{stbtt\_pack\_range}} *ranges, \textcolor{keywordtype}{int} num\_ranges)}
\DoxyCodeLine{4133 \{}
\DoxyCodeLine{4134    \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} info;}
\DoxyCodeLine{4135    \textcolor{keywordtype}{int} i,j,n, return\_value; \textcolor{comment}{// [DEAR IMGUI] removed = 1}}
\DoxyCodeLine{4136    \textcolor{comment}{//stbrp\_context *context = (stbrp\_context *) spc-\/>pack\_info;}}
\DoxyCodeLine{4137    \mbox{\hyperlink{structstbrp__rect}{stbrp\_rect}}    *rects;}
\DoxyCodeLine{4138 }
\DoxyCodeLine{4139    \textcolor{comment}{// flag all characters as NOT packed}}
\DoxyCodeLine{4140    \textcolor{keywordflow}{for} (i=0; i < num\_ranges; ++i)}
\DoxyCodeLine{4141       \textcolor{keywordflow}{for} (j=0; j < ranges[i].num\_chars; ++j)}
\DoxyCodeLine{4142          ranges[i].chardata\_for\_range[j].x0 =}
\DoxyCodeLine{4143          ranges[i].chardata\_for\_range[j].y0 =}
\DoxyCodeLine{4144          ranges[i].chardata\_for\_range[j].x1 =}
\DoxyCodeLine{4145          ranges[i].chardata\_for\_range[j].y1 = 0;}
\DoxyCodeLine{4146 }
\DoxyCodeLine{4147    n = 0;}
\DoxyCodeLine{4148    \textcolor{keywordflow}{for} (i=0; i < num\_ranges; ++i)}
\DoxyCodeLine{4149       n += ranges[i].num\_chars;}
\DoxyCodeLine{4150          }
\DoxyCodeLine{4151    rects = (\mbox{\hyperlink{structstbrp__rect}{stbrp\_rect}} *) STBTT\_malloc(\textcolor{keyword}{sizeof}(*rects) * n, spc-\/>user\_allocator\_context);}
\DoxyCodeLine{4152    \textcolor{keywordflow}{if} (rects == NULL)}
\DoxyCodeLine{4153       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4154 }
\DoxyCodeLine{4155    info.userdata = spc-\/>user\_allocator\_context;}
\DoxyCodeLine{4156    stbtt\_InitFont(\&info, fontdata, stbtt\_GetFontOffsetForIndex(fontdata,font\_index));}
\DoxyCodeLine{4157 }
\DoxyCodeLine{4158    n = stbtt\_PackFontRangesGatherRects(spc, \&info, ranges, num\_ranges, rects);}
\DoxyCodeLine{4159 }
\DoxyCodeLine{4160    stbtt\_PackFontRangesPackRects(spc, rects, n);}
\DoxyCodeLine{4161   }
\DoxyCodeLine{4162    return\_value = stbtt\_PackFontRangesRenderIntoRects(spc, \&info, ranges, num\_ranges, rects);}
\DoxyCodeLine{4163 }
\DoxyCodeLine{4164    STBTT\_free(rects, spc-\/>user\_allocator\_context);}
\DoxyCodeLine{4165    \textcolor{keywordflow}{return} return\_value;}
\DoxyCodeLine{4166 \}}
\DoxyCodeLine{4167 }
\DoxyCodeLine{4168 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_PackFontRange(\mbox{\hyperlink{structstbtt__pack__context}{stbtt\_pack\_context}} *spc, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *fontdata, \textcolor{keywordtype}{int} font\_index, \textcolor{keywordtype}{float} font\_size,}
\DoxyCodeLine{4169             \textcolor{keywordtype}{int} first\_unicode\_codepoint\_in\_range, \textcolor{keywordtype}{int} num\_chars\_in\_range, \mbox{\hyperlink{structstbtt__packedchar}{stbtt\_packedchar}} *chardata\_for\_range)}
\DoxyCodeLine{4170 \{}
\DoxyCodeLine{4171    \mbox{\hyperlink{structstbtt__pack__range}{stbtt\_pack\_range}} range;}
\DoxyCodeLine{4172    range.first\_unicode\_codepoint\_in\_range = first\_unicode\_codepoint\_in\_range;}
\DoxyCodeLine{4173    range.array\_of\_unicode\_codepoints = NULL;}
\DoxyCodeLine{4174    range.num\_chars                   = num\_chars\_in\_range;}
\DoxyCodeLine{4175    range.chardata\_for\_range          = chardata\_for\_range;}
\DoxyCodeLine{4176    range.font\_size                   = font\_size;}
\DoxyCodeLine{4177    \textcolor{keywordflow}{return} stbtt\_PackFontRanges(spc, fontdata, font\_index, \&range, 1);}
\DoxyCodeLine{4178 \}}
\DoxyCodeLine{4179 }
\DoxyCodeLine{4180 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetScaledFontVMetrics(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *fontdata, \textcolor{keywordtype}{int} index, \textcolor{keywordtype}{float} size, \textcolor{keywordtype}{float} *ascent, \textcolor{keywordtype}{float} *descent, \textcolor{keywordtype}{float} *lineGap)}
\DoxyCodeLine{4181 \{}
\DoxyCodeLine{4182    \textcolor{keywordtype}{int} i\_ascent, i\_descent, i\_lineGap;}
\DoxyCodeLine{4183    \textcolor{keywordtype}{float} scale;}
\DoxyCodeLine{4184    \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} info;}
\DoxyCodeLine{4185    stbtt\_InitFont(\&info, fontdata, stbtt\_GetFontOffsetForIndex(fontdata, index));}
\DoxyCodeLine{4186    scale = size > 0 ? stbtt\_ScaleForPixelHeight(\&info, size) : stbtt\_ScaleForMappingEmToPixels(\&info, -\/size);}
\DoxyCodeLine{4187    stbtt\_GetFontVMetrics(\&info, \&i\_ascent, \&i\_descent, \&i\_lineGap);}
\DoxyCodeLine{4188    *ascent  = (float) i\_ascent  * scale;}
\DoxyCodeLine{4189    *descent = (float) i\_descent * scale;}
\DoxyCodeLine{4190    *lineGap = (float) i\_lineGap * scale;}
\DoxyCodeLine{4191 \}}
\DoxyCodeLine{4192 }
\DoxyCodeLine{4193 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_GetPackedQuad(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__packedchar}{stbtt\_packedchar}} *chardata, \textcolor{keywordtype}{int} pw, \textcolor{keywordtype}{int} ph, \textcolor{keywordtype}{int} char\_index, \textcolor{keywordtype}{float} *xpos, \textcolor{keywordtype}{float} *ypos, \mbox{\hyperlink{structstbtt__aligned__quad}{stbtt\_aligned\_quad}} *q, \textcolor{keywordtype}{int} align\_to\_integer)}
\DoxyCodeLine{4194 \{}
\DoxyCodeLine{4195    \textcolor{keywordtype}{float} ipw = 1.0f / pw, iph = 1.0f / ph;}
\DoxyCodeLine{4196    \textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__packedchar}{stbtt\_packedchar}} *b = chardata + char\_index;}
\DoxyCodeLine{4197 }
\DoxyCodeLine{4198    \textcolor{keywordflow}{if} (align\_to\_integer) \{}
\DoxyCodeLine{4199       \textcolor{keywordtype}{float} x = (float) STBTT\_ifloor((*xpos + b-\/>xoff) + 0.5f);}
\DoxyCodeLine{4200       \textcolor{keywordtype}{float} y = (float) STBTT\_ifloor((*ypos + b-\/>yoff) + 0.5f);}
\DoxyCodeLine{4201       q-\/>x0 = x;}
\DoxyCodeLine{4202       q-\/>y0 = y;}
\DoxyCodeLine{4203       q-\/>x1 = x + b-\/>xoff2 -\/ b-\/>xoff;}
\DoxyCodeLine{4204       q-\/>y1 = y + b-\/>yoff2 -\/ b-\/>yoff;}
\DoxyCodeLine{4205    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4206       q-\/>x0 = *xpos + b-\/>xoff;}
\DoxyCodeLine{4207       q-\/>y0 = *ypos + b-\/>yoff;}
\DoxyCodeLine{4208       q-\/>x1 = *xpos + b-\/>xoff2;}
\DoxyCodeLine{4209       q-\/>y1 = *ypos + b-\/>yoff2;}
\DoxyCodeLine{4210    \}}
\DoxyCodeLine{4211 }
\DoxyCodeLine{4212    q-\/>s0 = b-\/>x0 * ipw;}
\DoxyCodeLine{4213    q-\/>t0 = b-\/>y0 * iph;}
\DoxyCodeLine{4214    q-\/>s1 = b-\/>x1 * ipw;}
\DoxyCodeLine{4215    q-\/>t1 = b-\/>y1 * iph;}
\DoxyCodeLine{4216 }
\DoxyCodeLine{4217    *xpos += b-\/>xadvance;}
\DoxyCodeLine{4218 \}}
\DoxyCodeLine{4219 }
\DoxyCodeLine{4221 \textcolor{comment}{//}}
\DoxyCodeLine{4222 \textcolor{comment}{// sdf computation}}
\DoxyCodeLine{4223 \textcolor{comment}{//}}
\DoxyCodeLine{4224 }
\DoxyCodeLine{4225 \textcolor{preprocessor}{\#define STBTT\_min(a,b)  ((a) < (b) ? (a) : (b))}}
\DoxyCodeLine{4226 \textcolor{preprocessor}{\#define STBTT\_max(a,b)  ((a) < (b) ? (b) : (a))}}
\DoxyCodeLine{4227 }
\DoxyCodeLine{4228 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_ray\_intersect\_bezier(\textcolor{keywordtype}{float} orig[2], \textcolor{keywordtype}{float} ray[2], \textcolor{keywordtype}{float} q0[2], \textcolor{keywordtype}{float} q1[2], \textcolor{keywordtype}{float} q2[2], \textcolor{keywordtype}{float} hits[2][2])}
\DoxyCodeLine{4229 \{}
\DoxyCodeLine{4230    \textcolor{keywordtype}{float} q0perp = q0[1]*ray[0] -\/ q0[0]*ray[1];}
\DoxyCodeLine{4231    \textcolor{keywordtype}{float} q1perp = q1[1]*ray[0] -\/ q1[0]*ray[1];}
\DoxyCodeLine{4232    \textcolor{keywordtype}{float} q2perp = q2[1]*ray[0] -\/ q2[0]*ray[1];}
\DoxyCodeLine{4233    \textcolor{keywordtype}{float} roperp = orig[1]*ray[0] -\/ orig[0]*ray[1];}
\DoxyCodeLine{4234 }
\DoxyCodeLine{4235    \textcolor{keywordtype}{float} a = q0perp -\/ 2*q1perp + q2perp;}
\DoxyCodeLine{4236    \textcolor{keywordtype}{float} b = q1perp -\/ q0perp;}
\DoxyCodeLine{4237    \textcolor{keywordtype}{float} c = q0perp -\/ roperp;}
\DoxyCodeLine{4238 }
\DoxyCodeLine{4239    \textcolor{keywordtype}{float} s0 = 0., s1 = 0.;}
\DoxyCodeLine{4240    \textcolor{keywordtype}{int} num\_s = 0;}
\DoxyCodeLine{4241 }
\DoxyCodeLine{4242    \textcolor{keywordflow}{if} (a != 0.0) \{}
\DoxyCodeLine{4243       \textcolor{keywordtype}{float} discr = b*b -\/ a*c;}
\DoxyCodeLine{4244       \textcolor{keywordflow}{if} (discr > 0.0) \{}
\DoxyCodeLine{4245          \textcolor{keywordtype}{float} rcpna = -\/1 / a;}
\DoxyCodeLine{4246          \textcolor{keywordtype}{float} d = (float) STBTT\_sqrt(discr);}
\DoxyCodeLine{4247          s0 = (b+d) * rcpna;}
\DoxyCodeLine{4248          s1 = (b-\/d) * rcpna;}
\DoxyCodeLine{4249          \textcolor{keywordflow}{if} (s0 >= 0.0 \&\& s0 <= 1.0)}
\DoxyCodeLine{4250             num\_s = 1;}
\DoxyCodeLine{4251          \textcolor{keywordflow}{if} (d > 0.0 \&\& s1 >= 0.0 \&\& s1 <= 1.0) \{}
\DoxyCodeLine{4252             \textcolor{keywordflow}{if} (num\_s == 0) s0 = s1;}
\DoxyCodeLine{4253             ++num\_s;}
\DoxyCodeLine{4254          \}}
\DoxyCodeLine{4255       \}}
\DoxyCodeLine{4256    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4257       \textcolor{comment}{// 2*b*s + c = 0}}
\DoxyCodeLine{4258       \textcolor{comment}{// s = -\/c / (2*b)}}
\DoxyCodeLine{4259       s0 = c / (-\/2 * b);}
\DoxyCodeLine{4260       \textcolor{keywordflow}{if} (s0 >= 0.0 \&\& s0 <= 1.0)}
\DoxyCodeLine{4261          num\_s = 1;}
\DoxyCodeLine{4262    \}}
\DoxyCodeLine{4263 }
\DoxyCodeLine{4264    \textcolor{keywordflow}{if} (num\_s == 0)}
\DoxyCodeLine{4265       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4266    \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4267       \textcolor{keywordtype}{float} rcp\_len2 = 1 / (ray[0]*ray[0] + ray[1]*ray[1]);}
\DoxyCodeLine{4268       \textcolor{keywordtype}{float} rayn\_x = ray[0] * rcp\_len2, rayn\_y = ray[1] * rcp\_len2;}
\DoxyCodeLine{4269 }
\DoxyCodeLine{4270       \textcolor{keywordtype}{float} q0d =   q0[0]*rayn\_x +   q0[1]*rayn\_y;}
\DoxyCodeLine{4271       \textcolor{keywordtype}{float} q1d =   q1[0]*rayn\_x +   q1[1]*rayn\_y;}
\DoxyCodeLine{4272       \textcolor{keywordtype}{float} q2d =   q2[0]*rayn\_x +   q2[1]*rayn\_y;}
\DoxyCodeLine{4273       \textcolor{keywordtype}{float} rod = orig[0]*rayn\_x + orig[1]*rayn\_y;}
\DoxyCodeLine{4274 }
\DoxyCodeLine{4275       \textcolor{keywordtype}{float} q10d = q1d -\/ q0d;}
\DoxyCodeLine{4276       \textcolor{keywordtype}{float} q20d = q2d -\/ q0d;}
\DoxyCodeLine{4277       \textcolor{keywordtype}{float} q0rd = q0d -\/ rod;}
\DoxyCodeLine{4278 }
\DoxyCodeLine{4279       hits[0][0] = q0rd + s0*(2.0f -\/ 2.0f*s0)*q10d + s0*s0*q20d;}
\DoxyCodeLine{4280       hits[0][1] = a*s0+b;}
\DoxyCodeLine{4281 }
\DoxyCodeLine{4282       \textcolor{keywordflow}{if} (num\_s > 1) \{}
\DoxyCodeLine{4283          hits[1][0] = q0rd + s1*(2.0f -\/ 2.0f*s1)*q10d + s1*s1*q20d;}
\DoxyCodeLine{4284          hits[1][1] = a*s1+b;}
\DoxyCodeLine{4285          \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{4286       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4287          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4288       \}}
\DoxyCodeLine{4289    \}}
\DoxyCodeLine{4290 \}}
\DoxyCodeLine{4291 }
\DoxyCodeLine{4292 \textcolor{keyword}{static} \textcolor{keywordtype}{int} equal(\textcolor{keywordtype}{float} *a, \textcolor{keywordtype}{float} *b)}
\DoxyCodeLine{4293 \{}
\DoxyCodeLine{4294    \textcolor{keywordflow}{return} (a[0] == b[0] \&\& a[1] == b[1]);}
\DoxyCodeLine{4295 \}}
\DoxyCodeLine{4296 }
\DoxyCodeLine{4297 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_compute\_crossings\_x(\textcolor{keywordtype}{float} x, \textcolor{keywordtype}{float} y, \textcolor{keywordtype}{int} nverts, \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *verts)}
\DoxyCodeLine{4298 \{}
\DoxyCodeLine{4299    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{4300    \textcolor{keywordtype}{float} orig[2], ray[2] = \{ 1, 0 \};}
\DoxyCodeLine{4301    \textcolor{keywordtype}{float} y\_frac;}
\DoxyCodeLine{4302    \textcolor{keywordtype}{int} winding = 0;}
\DoxyCodeLine{4303 }
\DoxyCodeLine{4304    orig[0] = x;}
\DoxyCodeLine{4305    \textcolor{comment}{//orig[1] = y; // [DEAR IMGUI] commented double assignment}}
\DoxyCodeLine{4306 }
\DoxyCodeLine{4307    \textcolor{comment}{// make sure y never passes through a vertex of the shape}}
\DoxyCodeLine{4308    y\_frac = (float) STBTT\_fmod(y, 1.0f);}
\DoxyCodeLine{4309    \textcolor{keywordflow}{if} (y\_frac < 0.01f)}
\DoxyCodeLine{4310       y += 0.01f;}
\DoxyCodeLine{4311    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (y\_frac > 0.99f)}
\DoxyCodeLine{4312       y -\/= 0.01f;}
\DoxyCodeLine{4313    orig[1] = y;}
\DoxyCodeLine{4314 }
\DoxyCodeLine{4315    \textcolor{comment}{// test a ray from (-\/infinity,y) to (x,y)}}
\DoxyCodeLine{4316    \textcolor{keywordflow}{for} (i=0; i < nverts; ++i) \{}
\DoxyCodeLine{4317       \textcolor{keywordflow}{if} (verts[i].type == STBTT\_vline) \{}
\DoxyCodeLine{4318          \textcolor{keywordtype}{int} x0 = (int) verts[i-\/1].x, y0 = (\textcolor{keywordtype}{int}) verts[i-\/1].y;}
\DoxyCodeLine{4319          \textcolor{keywordtype}{int} x1 = (int) verts[i  ].x, y1 = (\textcolor{keywordtype}{int}) verts[i  ].y;}
\DoxyCodeLine{4320          \textcolor{keywordflow}{if} (y > STBTT\_min(y0,y1) \&\& y < STBTT\_max(y0,y1) \&\& x > STBTT\_min(x0,x1)) \{}
\DoxyCodeLine{4321             \textcolor{keywordtype}{float} x\_inter = (y -\/ y0) / (y1 -\/ y0) * (x1-\/x0) + x0;}
\DoxyCodeLine{4322             \textcolor{keywordflow}{if} (x\_inter < x)  }
\DoxyCodeLine{4323                winding += (y0 < y1) ? 1 : -\/1;}
\DoxyCodeLine{4324          \}}
\DoxyCodeLine{4325       \}}
\DoxyCodeLine{4326       \textcolor{keywordflow}{if} (verts[i].type == STBTT\_vcurve) \{}
\DoxyCodeLine{4327          \textcolor{keywordtype}{int} x0 = (int) verts[i-\/1].x , y0 = (\textcolor{keywordtype}{int}) verts[i-\/1].y ;}
\DoxyCodeLine{4328          \textcolor{keywordtype}{int} x1 = (int) verts[i  ].cx, y1 = (\textcolor{keywordtype}{int}) verts[i  ].cy;}
\DoxyCodeLine{4329          \textcolor{keywordtype}{int} x2 = (int) verts[i  ].x , y2 = (\textcolor{keywordtype}{int}) verts[i  ].y ;}
\DoxyCodeLine{4330          \textcolor{keywordtype}{int} ax = STBTT\_min(x0,STBTT\_min(x1,x2)), ay = STBTT\_min(y0,STBTT\_min(y1,y2));}
\DoxyCodeLine{4331          \textcolor{keywordtype}{int} by = STBTT\_max(y0,STBTT\_max(y1,y2));}
\DoxyCodeLine{4332          \textcolor{keywordflow}{if} (y > ay \&\& y < by \&\& x > ax) \{}
\DoxyCodeLine{4333             \textcolor{keywordtype}{float} q0[2],q1[2],q2[2];}
\DoxyCodeLine{4334             \textcolor{keywordtype}{float} hits[2][2];}
\DoxyCodeLine{4335             q0[0] = (float)x0;}
\DoxyCodeLine{4336             q0[1] = (float)y0;}
\DoxyCodeLine{4337             q1[0] = (float)x1;}
\DoxyCodeLine{4338             q1[1] = (float)y1;}
\DoxyCodeLine{4339             q2[0] = (float)x2;}
\DoxyCodeLine{4340             q2[1] = (float)y2;}
\DoxyCodeLine{4341             \textcolor{keywordflow}{if} (equal(q0,q1) || equal(q1,q2)) \{}
\DoxyCodeLine{4342                x0 = (int)verts[i-\/1].x;}
\DoxyCodeLine{4343                y0 = (int)verts[i-\/1].y;}
\DoxyCodeLine{4344                x1 = (int)verts[i  ].x;}
\DoxyCodeLine{4345                y1 = (int)verts[i  ].y;}
\DoxyCodeLine{4346                \textcolor{keywordflow}{if} (y > STBTT\_min(y0,y1) \&\& y < STBTT\_max(y0,y1) \&\& x > STBTT\_min(x0,x1)) \{}
\DoxyCodeLine{4347                   \textcolor{keywordtype}{float} x\_inter = (y -\/ y0) / (y1 -\/ y0) * (x1-\/x0) + x0;}
\DoxyCodeLine{4348                   \textcolor{keywordflow}{if} (x\_inter < x)  }
\DoxyCodeLine{4349                      winding += (y0 < y1) ? 1 : -\/1;}
\DoxyCodeLine{4350                \}}
\DoxyCodeLine{4351             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4352                \textcolor{keywordtype}{int} num\_hits = stbtt\_\_ray\_intersect\_bezier(orig, ray, q0, q1, q2, hits);}
\DoxyCodeLine{4353                \textcolor{keywordflow}{if} (num\_hits >= 1)}
\DoxyCodeLine{4354                   \textcolor{keywordflow}{if} (hits[0][0] < 0)}
\DoxyCodeLine{4355                      winding += (hits[0][1] < 0 ? -\/1 : 1);}
\DoxyCodeLine{4356                \textcolor{keywordflow}{if} (num\_hits >= 2)}
\DoxyCodeLine{4357                   \textcolor{keywordflow}{if} (hits[1][0] < 0)}
\DoxyCodeLine{4358                      winding += (hits[1][1] < 0 ? -\/1 : 1);}
\DoxyCodeLine{4359             \}}
\DoxyCodeLine{4360          \} }
\DoxyCodeLine{4361       \}}
\DoxyCodeLine{4362    \}}
\DoxyCodeLine{4363    \textcolor{keywordflow}{return} winding;}
\DoxyCodeLine{4364 \}}
\DoxyCodeLine{4365 }
\DoxyCodeLine{4366 \textcolor{keyword}{static} \textcolor{keywordtype}{float} stbtt\_\_cuberoot( \textcolor{keywordtype}{float} x )}
\DoxyCodeLine{4367 \{}
\DoxyCodeLine{4368    \textcolor{keywordflow}{if} (x<0)}
\DoxyCodeLine{4369       \textcolor{keywordflow}{return} -\/(float) STBTT\_pow(-\/x,1.0f/3.0f);}
\DoxyCodeLine{4370    \textcolor{keywordflow}{else}}
\DoxyCodeLine{4371       \textcolor{keywordflow}{return}  (\textcolor{keywordtype}{float}) STBTT\_pow( x,1.0f/3.0f);}
\DoxyCodeLine{4372 \}}
\DoxyCodeLine{4373 }
\DoxyCodeLine{4374 \textcolor{comment}{// x\string^3 + c*x\string^2 + b*x + a = 0}}
\DoxyCodeLine{4375 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_solve\_cubic(\textcolor{keywordtype}{float} a, \textcolor{keywordtype}{float} b, \textcolor{keywordtype}{float} c, \textcolor{keywordtype}{float}* r)}
\DoxyCodeLine{4376 \{}
\DoxyCodeLine{4377     \textcolor{keywordtype}{float} s = -\/a / 3;}
\DoxyCodeLine{4378     \textcolor{keywordtype}{float} p = b -\/ a*a / 3;}
\DoxyCodeLine{4379     \textcolor{keywordtype}{float} q = a * (2*a*a -\/ 9*b) / 27 + c;}
\DoxyCodeLine{4380    \textcolor{keywordtype}{float} p3 = p*p*p;}
\DoxyCodeLine{4381     \textcolor{keywordtype}{float} d = q*q + 4*p3 / 27;}
\DoxyCodeLine{4382     \textcolor{keywordflow}{if} (d >= 0) \{}
\DoxyCodeLine{4383         \textcolor{keywordtype}{float} z = (float) STBTT\_sqrt(d);}
\DoxyCodeLine{4384         \textcolor{keywordtype}{float} u = (-\/q + z) / 2;}
\DoxyCodeLine{4385         \textcolor{keywordtype}{float} v = (-\/q -\/ z) / 2;}
\DoxyCodeLine{4386         u = stbtt\_\_cuberoot(u);}
\DoxyCodeLine{4387         v = stbtt\_\_cuberoot(v);}
\DoxyCodeLine{4388         r[0] = s + u + v;}
\DoxyCodeLine{4389         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4390     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4391        \textcolor{keywordtype}{float} u = (float) STBTT\_sqrt(-\/p/3);}
\DoxyCodeLine{4392        \textcolor{keywordtype}{float} v = (float) STBTT\_acos(-\/STBTT\_sqrt(-\/27/p3) * q / 2) / 3; \textcolor{comment}{// p3 must be negative, since d is negative}}
\DoxyCodeLine{4393        \textcolor{keywordtype}{float} m = (float) STBTT\_cos(v);}
\DoxyCodeLine{4394       \textcolor{keywordtype}{float} n = (float) STBTT\_cos(v-\/3.141592/2)*1.732050808f;}
\DoxyCodeLine{4395        r[0] = s + u * 2 * m;}
\DoxyCodeLine{4396        r[1] = s -\/ u * (m + n);}
\DoxyCodeLine{4397        r[2] = s -\/ u * (m -\/ n);}
\DoxyCodeLine{4398 }
\DoxyCodeLine{4399       \textcolor{comment}{//STBTT\_assert( STBTT\_fabs(((r[0]+a)*r[0]+b)*r[0]+c) < 0.05f);  // these asserts may not be safe at all scales, though they're in bezier t parameter units so maybe?}}
\DoxyCodeLine{4400       \textcolor{comment}{//STBTT\_assert( STBTT\_fabs(((r[1]+a)*r[1]+b)*r[1]+c) < 0.05f);}}
\DoxyCodeLine{4401       \textcolor{comment}{//STBTT\_assert( STBTT\_fabs(((r[2]+a)*r[2]+b)*r[2]+c) < 0.05f);}}
\DoxyCodeLine{4402     \textcolor{keywordflow}{return} 3;}
\DoxyCodeLine{4403    \}}
\DoxyCodeLine{4404 \}}
\DoxyCodeLine{4405 }
\DoxyCodeLine{4406 STBTT\_DEF \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} * stbtt\_GetGlyphSDF(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} scale, \textcolor{keywordtype}{int} glyph, \textcolor{keywordtype}{int} padding, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} onedge\_value, \textcolor{keywordtype}{float} pixel\_dist\_scale, \textcolor{keywordtype}{int} *width, \textcolor{keywordtype}{int} *height, \textcolor{keywordtype}{int} *xoff, \textcolor{keywordtype}{int} *yoff)}
\DoxyCodeLine{4407 \{}
\DoxyCodeLine{4408    \textcolor{keywordtype}{float} scale\_x = scale, scale\_y = scale;}
\DoxyCodeLine{4409    \textcolor{keywordtype}{int} ix0,iy0,ix1,iy1;}
\DoxyCodeLine{4410    \textcolor{keywordtype}{int} w,h;}
\DoxyCodeLine{4411    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data;}
\DoxyCodeLine{4412 }
\DoxyCodeLine{4413    \textcolor{comment}{// if one scale is 0, use same scale for both}}
\DoxyCodeLine{4414    \textcolor{keywordflow}{if} (scale\_x == 0) scale\_x = scale\_y;}
\DoxyCodeLine{4415    \textcolor{keywordflow}{if} (scale\_y == 0) \{}
\DoxyCodeLine{4416       \textcolor{keywordflow}{if} (scale\_x == 0) \textcolor{keywordflow}{return} NULL;  \textcolor{comment}{// if both scales are 0, return NULL}}
\DoxyCodeLine{4417       scale\_y = scale\_x;}
\DoxyCodeLine{4418    \}}
\DoxyCodeLine{4419 }
\DoxyCodeLine{4420    stbtt\_GetGlyphBitmapBoxSubpixel(info, glyph, scale, scale, 0.0f,0.0f, \&ix0,\&iy0,\&ix1,\&iy1);}
\DoxyCodeLine{4421 }
\DoxyCodeLine{4422    \textcolor{comment}{// if empty, return NULL}}
\DoxyCodeLine{4423    \textcolor{keywordflow}{if} (ix0 == ix1 || iy0 == iy1)}
\DoxyCodeLine{4424       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{4425 }
\DoxyCodeLine{4426    ix0 -\/= padding;}
\DoxyCodeLine{4427    iy0 -\/= padding;}
\DoxyCodeLine{4428    ix1 += padding;}
\DoxyCodeLine{4429    iy1 += padding;}
\DoxyCodeLine{4430 }
\DoxyCodeLine{4431    w = (ix1 -\/ ix0);}
\DoxyCodeLine{4432    h = (iy1 -\/ iy0);}
\DoxyCodeLine{4433 }
\DoxyCodeLine{4434    \textcolor{keywordflow}{if} (width ) *width  = w;}
\DoxyCodeLine{4435    \textcolor{keywordflow}{if} (height) *height = h;}
\DoxyCodeLine{4436    \textcolor{keywordflow}{if} (xoff  ) *xoff   = ix0;}
\DoxyCodeLine{4437    \textcolor{keywordflow}{if} (yoff  ) *yoff   = iy0;}
\DoxyCodeLine{4438 }
\DoxyCodeLine{4439    \textcolor{comment}{// invert for y-\/downwards bitmaps}}
\DoxyCodeLine{4440    scale\_y = -\/scale\_y;}
\DoxyCodeLine{4441       }
\DoxyCodeLine{4442    \{}
\DoxyCodeLine{4443       \textcolor{keywordtype}{int} x,y,i,j;}
\DoxyCodeLine{4444       \textcolor{keywordtype}{float} *precompute;}
\DoxyCodeLine{4445       \mbox{\hyperlink{structstbtt__vertex}{stbtt\_vertex}} *verts;}
\DoxyCodeLine{4446       \textcolor{keywordtype}{int} num\_verts = stbtt\_GetGlyphShape(info, glyph, \&verts);}
\DoxyCodeLine{4447       data = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) STBTT\_malloc(w * h, info-\/>userdata);}
\DoxyCodeLine{4448       precompute = (\textcolor{keywordtype}{float} *) STBTT\_malloc(num\_verts * \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}), info-\/>userdata);}
\DoxyCodeLine{4449 }
\DoxyCodeLine{4450       \textcolor{keywordflow}{for} (i=0,j=num\_verts-\/1; i < num\_verts; j=i++) \{}
\DoxyCodeLine{4451          \textcolor{keywordflow}{if} (verts[i].type == STBTT\_vline) \{}
\DoxyCodeLine{4452             \textcolor{keywordtype}{float} x0 = verts[i].x*scale\_x, y0 = verts[i].y*scale\_y;}
\DoxyCodeLine{4453             \textcolor{keywordtype}{float} x1 = verts[j].x*scale\_x, y1 = verts[j].y*scale\_y;}
\DoxyCodeLine{4454             \textcolor{keywordtype}{float} dist = (float) STBTT\_sqrt((x1-\/x0)*(x1-\/x0) + (y1-\/y0)*(y1-\/y0));}
\DoxyCodeLine{4455             precompute[i] = (dist == 0) ? 0.0f : 1.0f / dist;}
\DoxyCodeLine{4456          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (verts[i].type == STBTT\_vcurve) \{}
\DoxyCodeLine{4457             \textcolor{keywordtype}{float} x2 = verts[j].x *scale\_x, y2 = verts[j].y *scale\_y;}
\DoxyCodeLine{4458             \textcolor{keywordtype}{float} x1 = verts[i].cx*scale\_x, y1 = verts[i].cy*scale\_y;}
\DoxyCodeLine{4459             \textcolor{keywordtype}{float} x0 = verts[i].x *scale\_x, y0 = verts[i].y *scale\_y;}
\DoxyCodeLine{4460             \textcolor{keywordtype}{float} bx = x0 -\/ 2*x1 + x2, by = y0 -\/ 2*y1 + y2;}
\DoxyCodeLine{4461             \textcolor{keywordtype}{float} len2 = bx*bx + by*by;}
\DoxyCodeLine{4462             \textcolor{keywordflow}{if} (len2 != 0.0f)}
\DoxyCodeLine{4463                precompute[i] = 1.0f / (bx*bx + by*by);}
\DoxyCodeLine{4464             \textcolor{keywordflow}{else}}
\DoxyCodeLine{4465                precompute[i] = 0.0f;}
\DoxyCodeLine{4466          \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{4467             precompute[i] = 0.0f;}
\DoxyCodeLine{4468       \}}
\DoxyCodeLine{4469 }
\DoxyCodeLine{4470       \textcolor{keywordflow}{for} (y=iy0; y < iy1; ++y) \{}
\DoxyCodeLine{4471          \textcolor{keywordflow}{for} (x=ix0; x < ix1; ++x) \{}
\DoxyCodeLine{4472             \textcolor{keywordtype}{float} val;}
\DoxyCodeLine{4473             \textcolor{keywordtype}{float} min\_dist = 999999.0f;}
\DoxyCodeLine{4474             \textcolor{keywordtype}{float} sx = (float) x + 0.5f;}
\DoxyCodeLine{4475             \textcolor{keywordtype}{float} sy = (float) y + 0.5f;}
\DoxyCodeLine{4476             \textcolor{keywordtype}{float} x\_gspace = (sx / scale\_x);}
\DoxyCodeLine{4477             \textcolor{keywordtype}{float} y\_gspace = (sy / scale\_y);}
\DoxyCodeLine{4478 }
\DoxyCodeLine{4479             \textcolor{keywordtype}{int} winding = stbtt\_\_compute\_crossings\_x(x\_gspace, y\_gspace, num\_verts, verts); \textcolor{comment}{// @OPTIMIZE: this could just be a rasterization, but needs to be line vs. non-\/tesselated curves so a new path}}
\DoxyCodeLine{4480 }
\DoxyCodeLine{4481             \textcolor{keywordflow}{for} (i=0; i < num\_verts; ++i) \{}
\DoxyCodeLine{4482                \textcolor{keywordtype}{float} x0 = verts[i].x*scale\_x, y0 = verts[i].y*scale\_y;}
\DoxyCodeLine{4483 }
\DoxyCodeLine{4484                \textcolor{comment}{// check against every point here rather than inside line/curve primitives -\/-\/ @TODO: wrong if multiple 'moves' in a row produce a garbage point, and given culling, probably more efficient to do within line/curve}}
\DoxyCodeLine{4485                \textcolor{keywordtype}{float} dist2 = (x0-\/sx)*(x0-\/sx) + (y0-\/sy)*(y0-\/sy);}
\DoxyCodeLine{4486                \textcolor{keywordflow}{if} (dist2 < min\_dist*min\_dist)}
\DoxyCodeLine{4487                   min\_dist = (float) STBTT\_sqrt(dist2);}
\DoxyCodeLine{4488 }
\DoxyCodeLine{4489                \textcolor{keywordflow}{if} (verts[i].type == STBTT\_vline) \{}
\DoxyCodeLine{4490                   \textcolor{keywordtype}{float} x1 = verts[i-\/1].x*scale\_x, y1 = verts[i-\/1].y*scale\_y;}
\DoxyCodeLine{4491 }
\DoxyCodeLine{4492                   \textcolor{comment}{// coarse culling against bbox}}
\DoxyCodeLine{4493                   \textcolor{comment}{//if (sx > STBTT\_min(x0,x1)-\/min\_dist \&\& sx < STBTT\_max(x0,x1)+min\_dist \&\&}}
\DoxyCodeLine{4494                   \textcolor{comment}{//    sy > STBTT\_min(y0,y1)-\/min\_dist \&\& sy < STBTT\_max(y0,y1)+min\_dist)}}
\DoxyCodeLine{4495                   \textcolor{keywordtype}{float} dist = (float) STBTT\_fabs((x1-\/x0)*(y0-\/sy) -\/ (y1-\/y0)*(x0-\/sx)) * precompute[i];}
\DoxyCodeLine{4496                   STBTT\_assert(i != 0);}
\DoxyCodeLine{4497                   \textcolor{keywordflow}{if} (dist < min\_dist) \{}
\DoxyCodeLine{4498                      \textcolor{comment}{// check position along line}}
\DoxyCodeLine{4499                      \textcolor{comment}{// x' = x0 + t*(x1-\/x0), y' = y0 + t*(y1-\/y0)}}
\DoxyCodeLine{4500                      \textcolor{comment}{// minimize (x'-\/sx)*(x'-\/sx)+(y'-\/sy)*(y'-\/sy)}}
\DoxyCodeLine{4501                      \textcolor{keywordtype}{float} dx = x1-\/x0, dy = y1-\/y0;}
\DoxyCodeLine{4502                      \textcolor{keywordtype}{float} px = x0-\/sx, py = y0-\/sy;}
\DoxyCodeLine{4503                      \textcolor{comment}{// minimize (px+t*dx)\string^2 + (py+t*dy)\string^2 = px*px + 2*px*dx*t + t\string^2*dx*dx + py*py + 2*py*dy*t + t\string^2*dy*dy}}
\DoxyCodeLine{4504                      \textcolor{comment}{// derivative: 2*px*dx + 2*py*dy + (2*dx*dx+2*dy*dy)*t, set to 0 and solve}}
\DoxyCodeLine{4505                      \textcolor{keywordtype}{float} t = -\/(px*dx + py*dy) / (dx*dx + dy*dy);}
\DoxyCodeLine{4506                      \textcolor{keywordflow}{if} (t >= 0.0f \&\& t <= 1.0f)}
\DoxyCodeLine{4507                         min\_dist = dist;}
\DoxyCodeLine{4508                   \}}
\DoxyCodeLine{4509                \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (verts[i].type == STBTT\_vcurve) \{}
\DoxyCodeLine{4510                   \textcolor{keywordtype}{float} x2 = verts[i-\/1].x *scale\_x, y2 = verts[i-\/1].y *scale\_y;}
\DoxyCodeLine{4511                   \textcolor{keywordtype}{float} x1 = verts[i  ].cx*scale\_x, y1 = verts[i  ].cy*scale\_y;}
\DoxyCodeLine{4512                   \textcolor{keywordtype}{float} box\_x0 = STBTT\_min(STBTT\_min(x0,x1),x2);}
\DoxyCodeLine{4513                   \textcolor{keywordtype}{float} box\_y0 = STBTT\_min(STBTT\_min(y0,y1),y2);}
\DoxyCodeLine{4514                   \textcolor{keywordtype}{float} box\_x1 = STBTT\_max(STBTT\_max(x0,x1),x2);}
\DoxyCodeLine{4515                   \textcolor{keywordtype}{float} box\_y1 = STBTT\_max(STBTT\_max(y0,y1),y2);}
\DoxyCodeLine{4516                   \textcolor{comment}{// coarse culling against bbox to avoid computing cubic unnecessarily}}
\DoxyCodeLine{4517                   \textcolor{keywordflow}{if} (sx > box\_x0-\/min\_dist \&\& sx < box\_x1+min\_dist \&\& sy > box\_y0-\/min\_dist \&\& sy < box\_y1+min\_dist) \{}
\DoxyCodeLine{4518                      \textcolor{keywordtype}{int} num=0;}
\DoxyCodeLine{4519                      \textcolor{keywordtype}{float} ax = x1-\/x0, ay = y1-\/y0;}
\DoxyCodeLine{4520                      \textcolor{keywordtype}{float} bx = x0 -\/ 2*x1 + x2, by = y0 -\/ 2*y1 + y2;}
\DoxyCodeLine{4521                      \textcolor{keywordtype}{float} mx = x0 -\/ sx, my = y0 -\/ sy;}
\DoxyCodeLine{4522                      \textcolor{keywordtype}{float} res[3],px,py,t,it;}
\DoxyCodeLine{4523                      \textcolor{keywordtype}{float} a\_inv = precompute[i];}
\DoxyCodeLine{4524                      \textcolor{keywordflow}{if} (a\_inv == 0.0) \{ \textcolor{comment}{// if a\_inv is 0, it's 2nd degree so use quadratic formula}}
\DoxyCodeLine{4525                         \textcolor{keywordtype}{float} a = 3*(ax*bx + ay*by);}
\DoxyCodeLine{4526                         \textcolor{keywordtype}{float} b = 2*(ax*ax + ay*ay) + (mx*bx+my*by);}
\DoxyCodeLine{4527                         \textcolor{keywordtype}{float} c = mx*ax+my*ay;}
\DoxyCodeLine{4528                         \textcolor{keywordflow}{if} (a == 0.0) \{ \textcolor{comment}{// if a is 0, it's linear}}
\DoxyCodeLine{4529                            \textcolor{keywordflow}{if} (b != 0.0) \{}
\DoxyCodeLine{4530                               res[num++] = -\/c/b;}
\DoxyCodeLine{4531                            \}}
\DoxyCodeLine{4532                         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4533                            \textcolor{keywordtype}{float} discriminant = b*b -\/ 4*a*c;}
\DoxyCodeLine{4534                            \textcolor{keywordflow}{if} (discriminant < 0)}
\DoxyCodeLine{4535                               num = 0;}
\DoxyCodeLine{4536                            \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4537                               \textcolor{keywordtype}{float} root = (float) STBTT\_sqrt(discriminant);}
\DoxyCodeLine{4538                               res[0] = (-\/b -\/ root)/(2*a);}
\DoxyCodeLine{4539                               res[1] = (-\/b + root)/(2*a);}
\DoxyCodeLine{4540                               num = 2; \textcolor{comment}{// don't bother distinguishing 1-\/solution case, as code below will still work}}
\DoxyCodeLine{4541                            \}}
\DoxyCodeLine{4542                         \}}
\DoxyCodeLine{4543                      \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4544                         \textcolor{keywordtype}{float} b = 3*(ax*bx + ay*by) * a\_inv; \textcolor{comment}{// could precompute this as it doesn't depend on sample point}}
\DoxyCodeLine{4545                         \textcolor{keywordtype}{float} c = (2*(ax*ax + ay*ay) + (mx*bx+my*by)) * a\_inv;}
\DoxyCodeLine{4546                         \textcolor{keywordtype}{float} d = (mx*ax+my*ay) * a\_inv;}
\DoxyCodeLine{4547                         num = stbtt\_\_solve\_cubic(b, c, d, res);}
\DoxyCodeLine{4548                      \}}
\DoxyCodeLine{4549                      \textcolor{keywordflow}{if} (num >= 1 \&\& res[0] >= 0.0f \&\& res[0] <= 1.0f) \{}
\DoxyCodeLine{4550                         t = res[0], it = 1.0f -\/ t;}
\DoxyCodeLine{4551                         px = it*it*x0 + 2*t*it*x1 + t*t*x2;}
\DoxyCodeLine{4552                         py = it*it*y0 + 2*t*it*y1 + t*t*y2;}
\DoxyCodeLine{4553                         dist2 = (px-\/sx)*(px-\/sx) + (py-\/sy)*(py-\/sy);}
\DoxyCodeLine{4554                         \textcolor{keywordflow}{if} (dist2 < min\_dist * min\_dist)}
\DoxyCodeLine{4555                            min\_dist = (float) STBTT\_sqrt(dist2);}
\DoxyCodeLine{4556                      \}}
\DoxyCodeLine{4557                      \textcolor{keywordflow}{if} (num >= 2 \&\& res[1] >= 0.0f \&\& res[1] <= 1.0f) \{}
\DoxyCodeLine{4558                         t = res[1], it = 1.0f -\/ t;}
\DoxyCodeLine{4559                         px = it*it*x0 + 2*t*it*x1 + t*t*x2;}
\DoxyCodeLine{4560                         py = it*it*y0 + 2*t*it*y1 + t*t*y2;}
\DoxyCodeLine{4561                         dist2 = (px-\/sx)*(px-\/sx) + (py-\/sy)*(py-\/sy);}
\DoxyCodeLine{4562                         \textcolor{keywordflow}{if} (dist2 < min\_dist * min\_dist)}
\DoxyCodeLine{4563                            min\_dist = (float) STBTT\_sqrt(dist2);}
\DoxyCodeLine{4564                      \}}
\DoxyCodeLine{4565                      \textcolor{keywordflow}{if} (num >= 3 \&\& res[2] >= 0.0f \&\& res[2] <= 1.0f) \{}
\DoxyCodeLine{4566                         t = res[2], it = 1.0f -\/ t;}
\DoxyCodeLine{4567                         px = it*it*x0 + 2*t*it*x1 + t*t*x2;}
\DoxyCodeLine{4568                         py = it*it*y0 + 2*t*it*y1 + t*t*y2;}
\DoxyCodeLine{4569                         dist2 = (px-\/sx)*(px-\/sx) + (py-\/sy)*(py-\/sy);}
\DoxyCodeLine{4570                         \textcolor{keywordflow}{if} (dist2 < min\_dist * min\_dist)}
\DoxyCodeLine{4571                            min\_dist = (float) STBTT\_sqrt(dist2);}
\DoxyCodeLine{4572                      \}}
\DoxyCodeLine{4573                   \}}
\DoxyCodeLine{4574                \}}
\DoxyCodeLine{4575             \}}
\DoxyCodeLine{4576             \textcolor{keywordflow}{if} (winding == 0)}
\DoxyCodeLine{4577                min\_dist = -\/min\_dist;  \textcolor{comment}{// if outside the shape, value is negative}}
\DoxyCodeLine{4578             val = onedge\_value + pixel\_dist\_scale * min\_dist;}
\DoxyCodeLine{4579             \textcolor{keywordflow}{if} (val < 0)}
\DoxyCodeLine{4580                val = 0;}
\DoxyCodeLine{4581             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (val > 255)}
\DoxyCodeLine{4582                val = 255;}
\DoxyCodeLine{4583             data[(y-\/iy0)*w+(x-\/ix0)] = (\textcolor{keywordtype}{unsigned} char) val;}
\DoxyCodeLine{4584          \}}
\DoxyCodeLine{4585       \}}
\DoxyCodeLine{4586       STBTT\_free(precompute, info-\/>userdata);}
\DoxyCodeLine{4587       STBTT\_free(verts, info-\/>userdata);}
\DoxyCodeLine{4588    \}}
\DoxyCodeLine{4589    \textcolor{keywordflow}{return} data;}
\DoxyCodeLine{4590 \}   }
\DoxyCodeLine{4591 }
\DoxyCodeLine{4592 STBTT\_DEF \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} * stbtt\_GetCodepointSDF(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keywordtype}{float} scale, \textcolor{keywordtype}{int} codepoint, \textcolor{keywordtype}{int} padding, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} onedge\_value, \textcolor{keywordtype}{float} pixel\_dist\_scale, \textcolor{keywordtype}{int} *width, \textcolor{keywordtype}{int} *height, \textcolor{keywordtype}{int} *xoff, \textcolor{keywordtype}{int} *yoff)}
\DoxyCodeLine{4593 \{}
\DoxyCodeLine{4594    \textcolor{keywordflow}{return} stbtt\_GetGlyphSDF(info, scale, stbtt\_FindGlyphIndex(info, codepoint), padding, onedge\_value, pixel\_dist\_scale, width, height, xoff, yoff);}
\DoxyCodeLine{4595 \}}
\DoxyCodeLine{4596 }
\DoxyCodeLine{4597 STBTT\_DEF \textcolor{keywordtype}{void} stbtt\_FreeSDF(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *bitmap, \textcolor{keywordtype}{void} *userdata)}
\DoxyCodeLine{4598 \{}
\DoxyCodeLine{4599    STBTT\_free(bitmap, userdata);}
\DoxyCodeLine{4600 \}}
\DoxyCodeLine{4601 }
\DoxyCodeLine{4603 \textcolor{comment}{//}}
\DoxyCodeLine{4604 \textcolor{comment}{// font name matching -\/-\/ recommended not to use this}}
\DoxyCodeLine{4605 \textcolor{comment}{//}}
\DoxyCodeLine{4606 }
\DoxyCodeLine{4607 \textcolor{comment}{// check if a utf8 string contains a prefix which is the utf16 string; if so return length of matching utf8 string}}
\DoxyCodeLine{4608 \textcolor{keyword}{static} stbtt\_int32 stbtt\_\_CompareUTF8toUTF16\_bigendian\_prefix(stbtt\_uint8 *s1, stbtt\_int32 len1, stbtt\_uint8 *s2, stbtt\_int32 len2) }
\DoxyCodeLine{4609 \{}
\DoxyCodeLine{4610    stbtt\_int32 i=0;}
\DoxyCodeLine{4611 }
\DoxyCodeLine{4612    \textcolor{comment}{// convert utf16 to utf8 and compare the results while converting}}
\DoxyCodeLine{4613    \textcolor{keywordflow}{while} (len2) \{}
\DoxyCodeLine{4614       stbtt\_uint16 ch = s2[0]*256 + s2[1];}
\DoxyCodeLine{4615       \textcolor{keywordflow}{if} (ch < 0x80) \{}
\DoxyCodeLine{4616          \textcolor{keywordflow}{if} (i >= len1) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4617          \textcolor{keywordflow}{if} (s1[i++] != ch) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4618       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ch < 0x800) \{}
\DoxyCodeLine{4619          \textcolor{keywordflow}{if} (i+1 >= len1) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4620          \textcolor{keywordflow}{if} (s1[i++] != 0xc0 + (ch >> 6)) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4621          \textcolor{keywordflow}{if} (s1[i++] != 0x80 + (ch \& 0x3f)) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4622       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ch >= 0xd800 \&\& ch < 0xdc00) \{}
\DoxyCodeLine{4623          stbtt\_uint32 c;}
\DoxyCodeLine{4624          stbtt\_uint16 ch2 = s2[2]*256 + s2[3];}
\DoxyCodeLine{4625          \textcolor{keywordflow}{if} (i+3 >= len1) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4626          c = ((ch -\/ 0xd800) << 10) + (ch2 -\/ 0xdc00) + 0x10000;}
\DoxyCodeLine{4627          \textcolor{keywordflow}{if} (s1[i++] != 0xf0 + (c >> 18)) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4628          \textcolor{keywordflow}{if} (s1[i++] != 0x80 + ((c >> 12) \& 0x3f)) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4629          \textcolor{keywordflow}{if} (s1[i++] != 0x80 + ((c >>  6) \& 0x3f)) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4630          \textcolor{keywordflow}{if} (s1[i++] != 0x80 + ((c      ) \& 0x3f)) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4631          s2 += 2; \textcolor{comment}{// plus another 2 below}}
\DoxyCodeLine{4632          len2 -\/= 2;}
\DoxyCodeLine{4633       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ch >= 0xdc00 \&\& ch < 0xe000) \{}
\DoxyCodeLine{4634          \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4635       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4636          \textcolor{keywordflow}{if} (i+2 >= len1) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4637          \textcolor{keywordflow}{if} (s1[i++] != 0xe0 + (ch >> 12)) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4638          \textcolor{keywordflow}{if} (s1[i++] != 0x80 + ((ch >> 6) \& 0x3f)) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4639          \textcolor{keywordflow}{if} (s1[i++] != 0x80 + ((ch     ) \& 0x3f)) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{4640       \}}
\DoxyCodeLine{4641       s2 += 2;}
\DoxyCodeLine{4642       len2 -\/= 2;}
\DoxyCodeLine{4643    \}}
\DoxyCodeLine{4644    \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{4645 \}}
\DoxyCodeLine{4646 }
\DoxyCodeLine{4647 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_CompareUTF8toUTF16\_bigendian\_internal(\textcolor{keywordtype}{char} *s1, \textcolor{keywordtype}{int} len1, \textcolor{keywordtype}{char} *s2, \textcolor{keywordtype}{int} len2) }
\DoxyCodeLine{4648 \{}
\DoxyCodeLine{4649    \textcolor{keywordflow}{return} len1 == stbtt\_\_CompareUTF8toUTF16\_bigendian\_prefix((stbtt\_uint8*) s1, len1, (stbtt\_uint8*) s2, len2);}
\DoxyCodeLine{4650 \}}
\DoxyCodeLine{4651 }
\DoxyCodeLine{4652 \textcolor{comment}{// returns results in whatever encoding you request... but note that 2-\/byte encodings}}
\DoxyCodeLine{4653 \textcolor{comment}{// will be BIG-\/ENDIAN... use stbtt\_CompareUTF8toUTF16\_bigendian() to compare}}
\DoxyCodeLine{4654 STBTT\_DEF \textcolor{keyword}{const} \textcolor{keywordtype}{char} *stbtt\_GetFontNameString(\textcolor{keyword}{const} \mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *font, \textcolor{keywordtype}{int} *length, \textcolor{keywordtype}{int} platformID, \textcolor{keywordtype}{int} encodingID, \textcolor{keywordtype}{int} languageID, \textcolor{keywordtype}{int} nameID)}
\DoxyCodeLine{4655 \{}
\DoxyCodeLine{4656    stbtt\_int32 i,count,stringOffset;}
\DoxyCodeLine{4657    stbtt\_uint8 *fc = font-\/>data;}
\DoxyCodeLine{4658    stbtt\_uint32 offset = font-\/>fontstart;}
\DoxyCodeLine{4659    stbtt\_uint32 nm = stbtt\_\_find\_table(fc, offset, \textcolor{stringliteral}{"{}name"{}});}
\DoxyCodeLine{4660    \textcolor{keywordflow}{if} (!nm) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{4661 }
\DoxyCodeLine{4662    count = ttUSHORT(fc+nm+2);}
\DoxyCodeLine{4663    stringOffset = nm + ttUSHORT(fc+nm+4);}
\DoxyCodeLine{4664    \textcolor{keywordflow}{for} (i=0; i < count; ++i) \{}
\DoxyCodeLine{4665       stbtt\_uint32 loc = nm + 6 + 12 * i;}
\DoxyCodeLine{4666       \textcolor{keywordflow}{if} (platformID == ttUSHORT(fc+loc+0) \&\& encodingID == ttUSHORT(fc+loc+2)}
\DoxyCodeLine{4667           \&\& languageID == ttUSHORT(fc+loc+4) \&\& nameID == ttUSHORT(fc+loc+6)) \{}
\DoxyCodeLine{4668          *length = ttUSHORT(fc+loc+8);}
\DoxyCodeLine{4669          \textcolor{keywordflow}{return} (\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) (fc+stringOffset+ttUSHORT(fc+loc+10));}
\DoxyCodeLine{4670       \}}
\DoxyCodeLine{4671    \}}
\DoxyCodeLine{4672    \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{4673 \}}
\DoxyCodeLine{4674 }
\DoxyCodeLine{4675 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_matchpair(stbtt\_uint8 *fc, stbtt\_uint32 nm, stbtt\_uint8 *name, stbtt\_int32 nlen, stbtt\_int32 target\_id, stbtt\_int32 next\_id)}
\DoxyCodeLine{4676 \{}
\DoxyCodeLine{4677    stbtt\_int32 i;}
\DoxyCodeLine{4678    stbtt\_int32 count = ttUSHORT(fc+nm+2);}
\DoxyCodeLine{4679    stbtt\_int32 stringOffset = nm + ttUSHORT(fc+nm+4);}
\DoxyCodeLine{4680 }
\DoxyCodeLine{4681    \textcolor{keywordflow}{for} (i=0; i < count; ++i) \{}
\DoxyCodeLine{4682       stbtt\_uint32 loc = nm + 6 + 12 * i;}
\DoxyCodeLine{4683       stbtt\_int32 \textcolor{keywordtype}{id} = ttUSHORT(fc+loc+6);}
\DoxyCodeLine{4684       \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id} == target\_id) \{}
\DoxyCodeLine{4685          \textcolor{comment}{// find the encoding}}
\DoxyCodeLine{4686          stbtt\_int32 platform = ttUSHORT(fc+loc+0), encoding = ttUSHORT(fc+loc+2), language = ttUSHORT(fc+loc+4);}
\DoxyCodeLine{4687 }
\DoxyCodeLine{4688          \textcolor{comment}{// is this a Unicode encoding?}}
\DoxyCodeLine{4689          \textcolor{keywordflow}{if} (platform == 0 || (platform == 3 \&\& encoding == 1) || (platform == 3 \&\& encoding == 10)) \{}
\DoxyCodeLine{4690             stbtt\_int32 slen = ttUSHORT(fc+loc+8);}
\DoxyCodeLine{4691             stbtt\_int32 off = ttUSHORT(fc+loc+10);}
\DoxyCodeLine{4692 }
\DoxyCodeLine{4693             \textcolor{comment}{// check if there's a prefix match}}
\DoxyCodeLine{4694             stbtt\_int32 matchlen = stbtt\_\_CompareUTF8toUTF16\_bigendian\_prefix(name, nlen, fc+stringOffset+off,slen);}
\DoxyCodeLine{4695             \textcolor{keywordflow}{if} (matchlen >= 0) \{}
\DoxyCodeLine{4696                \textcolor{comment}{// check for target\_id+1 immediately following, with same encoding \& language}}
\DoxyCodeLine{4697                \textcolor{keywordflow}{if} (i+1 < count \&\& ttUSHORT(fc+loc+12+6) == next\_id \&\& ttUSHORT(fc+loc+12) == platform \&\& ttUSHORT(fc+loc+12+2) == encoding \&\& ttUSHORT(fc+loc+12+4) == language) \{}
\DoxyCodeLine{4698                   slen = ttUSHORT(fc+loc+12+8);}
\DoxyCodeLine{4699                   off = ttUSHORT(fc+loc+12+10);}
\DoxyCodeLine{4700                   \textcolor{keywordflow}{if} (slen == 0) \{}
\DoxyCodeLine{4701                      \textcolor{keywordflow}{if} (matchlen == nlen)}
\DoxyCodeLine{4702                         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4703                   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (matchlen < nlen \&\& name[matchlen] == \textcolor{charliteral}{' '}) \{}
\DoxyCodeLine{4704                      ++matchlen;}
\DoxyCodeLine{4705                      \textcolor{keywordflow}{if} (stbtt\_CompareUTF8toUTF16\_bigendian\_internal((\textcolor{keywordtype}{char}*) (name+matchlen), nlen-\/matchlen, (\textcolor{keywordtype}{char}*)(fc+stringOffset+off),slen))}
\DoxyCodeLine{4706                         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4707                   \}}
\DoxyCodeLine{4708                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4709                   \textcolor{comment}{// if nothing immediately following}}
\DoxyCodeLine{4710                   \textcolor{keywordflow}{if} (matchlen == nlen)}
\DoxyCodeLine{4711                      \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4712                \}}
\DoxyCodeLine{4713             \}}
\DoxyCodeLine{4714          \}}
\DoxyCodeLine{4715 }
\DoxyCodeLine{4716          \textcolor{comment}{// @TODO handle other encodings}}
\DoxyCodeLine{4717       \}}
\DoxyCodeLine{4718    \}}
\DoxyCodeLine{4719    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4720 \}}
\DoxyCodeLine{4721 }
\DoxyCodeLine{4722 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_\_matches(stbtt\_uint8 *fc, stbtt\_uint32 offset, stbtt\_uint8 *name, stbtt\_int32 flags)}
\DoxyCodeLine{4723 \{}
\DoxyCodeLine{4724    stbtt\_int32 nlen = (stbtt\_int32) STBTT\_strlen((\textcolor{keywordtype}{char} *) name);}
\DoxyCodeLine{4725    stbtt\_uint32 nm,hd;}
\DoxyCodeLine{4726    \textcolor{keywordflow}{if} (!stbtt\_\_isfont(fc+offset)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4727 }
\DoxyCodeLine{4728    \textcolor{comment}{// check italics/bold/underline flags in macStyle...}}
\DoxyCodeLine{4729    \textcolor{keywordflow}{if} (flags) \{}
\DoxyCodeLine{4730       hd = stbtt\_\_find\_table(fc, offset, \textcolor{stringliteral}{"{}head"{}});}
\DoxyCodeLine{4731       \textcolor{keywordflow}{if} ((ttUSHORT(fc+hd+44) \& 7) != (flags \& 7)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4732    \}}
\DoxyCodeLine{4733 }
\DoxyCodeLine{4734    nm = stbtt\_\_find\_table(fc, offset, \textcolor{stringliteral}{"{}name"{}});}
\DoxyCodeLine{4735    \textcolor{keywordflow}{if} (!nm) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4736 }
\DoxyCodeLine{4737    \textcolor{keywordflow}{if} (flags) \{}
\DoxyCodeLine{4738       \textcolor{comment}{// if we checked the macStyle flags, then just check the family and ignore the subfamily}}
\DoxyCodeLine{4739       \textcolor{keywordflow}{if} (stbtt\_\_matchpair(fc, nm, name, nlen, 16, -\/1))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4740       \textcolor{keywordflow}{if} (stbtt\_\_matchpair(fc, nm, name, nlen,  1, -\/1))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4741       \textcolor{keywordflow}{if} (stbtt\_\_matchpair(fc, nm, name, nlen,  3, -\/1))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4742    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{4743       \textcolor{keywordflow}{if} (stbtt\_\_matchpair(fc, nm, name, nlen, 16, 17))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4744       \textcolor{keywordflow}{if} (stbtt\_\_matchpair(fc, nm, name, nlen,  1,  2))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4745       \textcolor{keywordflow}{if} (stbtt\_\_matchpair(fc, nm, name, nlen,  3, -\/1))  \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{4746    \}}
\DoxyCodeLine{4747 }
\DoxyCodeLine{4748    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{4749 \}}
\DoxyCodeLine{4750 }
\DoxyCodeLine{4751 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stbtt\_FindMatchingFont\_internal(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *font\_collection, \textcolor{keywordtype}{char} *name\_utf8, stbtt\_int32 flags)}
\DoxyCodeLine{4752 \{}
\DoxyCodeLine{4753    stbtt\_int32 i;}
\DoxyCodeLine{4754    \textcolor{keywordflow}{for} (i=0;;++i) \{}
\DoxyCodeLine{4755       stbtt\_int32 off = stbtt\_GetFontOffsetForIndex(font\_collection, i);}
\DoxyCodeLine{4756       \textcolor{keywordflow}{if} (off < 0) \textcolor{keywordflow}{return} off;}
\DoxyCodeLine{4757       \textcolor{keywordflow}{if} (stbtt\_\_matches((stbtt\_uint8 *) font\_collection, off, (stbtt\_uint8*) name\_utf8, flags))}
\DoxyCodeLine{4758          \textcolor{keywordflow}{return} off;}
\DoxyCodeLine{4759    \}}
\DoxyCodeLine{4760 \}}
\DoxyCodeLine{4761 }
\DoxyCodeLine{4762 \textcolor{preprocessor}{\#if defined(\_\_GNUC\_\_) || defined(\_\_clang\_\_)}}
\DoxyCodeLine{4763 \textcolor{preprocessor}{\#pragma GCC diagnostic push}}
\DoxyCodeLine{4764 \textcolor{preprocessor}{\#pragma GCC diagnostic ignored "{}-\/Wcast-\/qual"{}}}
\DoxyCodeLine{4765 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{4766 }
\DoxyCodeLine{4767 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_BakeFontBitmap(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} offset,}
\DoxyCodeLine{4768                                 \textcolor{keywordtype}{float} pixel\_height, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *pixels, \textcolor{keywordtype}{int} pw, \textcolor{keywordtype}{int} ph,}
\DoxyCodeLine{4769                                 \textcolor{keywordtype}{int} first\_char, \textcolor{keywordtype}{int} num\_chars, \mbox{\hyperlink{structstbtt__bakedchar}{stbtt\_bakedchar}} *chardata)}
\DoxyCodeLine{4770 \{}
\DoxyCodeLine{4771    \textcolor{keywordflow}{return} stbtt\_BakeFontBitmap\_internal((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) data, offset, pixel\_height, pixels, pw, ph, first\_char, num\_chars, chardata);}
\DoxyCodeLine{4772 \}}
\DoxyCodeLine{4773 }
\DoxyCodeLine{4774 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_GetFontOffsetForIndex(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} index)}
\DoxyCodeLine{4775 \{}
\DoxyCodeLine{4776    \textcolor{keywordflow}{return} stbtt\_GetFontOffsetForIndex\_internal((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) data, index);   }
\DoxyCodeLine{4777 \}}
\DoxyCodeLine{4778 }
\DoxyCodeLine{4779 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_GetNumberOfFonts(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data)}
\DoxyCodeLine{4780 \{}
\DoxyCodeLine{4781    \textcolor{keywordflow}{return} stbtt\_GetNumberOfFonts\_internal((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) data);}
\DoxyCodeLine{4782 \}}
\DoxyCodeLine{4783 }
\DoxyCodeLine{4784 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_InitFont(\mbox{\hyperlink{structstbtt__fontinfo}{stbtt\_fontinfo}} *info, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} offset)}
\DoxyCodeLine{4785 \{}
\DoxyCodeLine{4786    \textcolor{keywordflow}{return} stbtt\_InitFont\_internal(info, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) data, offset);}
\DoxyCodeLine{4787 \}}
\DoxyCodeLine{4788 }
\DoxyCodeLine{4789 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_FindMatchingFont(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *fontdata, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *name, \textcolor{keywordtype}{int} flags)}
\DoxyCodeLine{4790 \{}
\DoxyCodeLine{4791    \textcolor{keywordflow}{return} stbtt\_FindMatchingFont\_internal((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) fontdata, (\textcolor{keywordtype}{char} *) name, flags);}
\DoxyCodeLine{4792 \}}
\DoxyCodeLine{4793 }
\DoxyCodeLine{4794 STBTT\_DEF \textcolor{keywordtype}{int} stbtt\_CompareUTF8toUTF16\_bigendian(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *s1, \textcolor{keywordtype}{int} len1, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *s2, \textcolor{keywordtype}{int} len2)}
\DoxyCodeLine{4795 \{}
\DoxyCodeLine{4796    \textcolor{keywordflow}{return} stbtt\_CompareUTF8toUTF16\_bigendian\_internal((\textcolor{keywordtype}{char} *) s1, len1, (\textcolor{keywordtype}{char} *) s2, len2);}
\DoxyCodeLine{4797 \}}
\DoxyCodeLine{4798 }
\DoxyCodeLine{4799 \textcolor{preprocessor}{\#if defined(\_\_GNUC\_\_) || defined(\_\_clang\_\_)}}
\DoxyCodeLine{4800 \textcolor{preprocessor}{\#pragma GCC diagnostic pop}}
\DoxyCodeLine{4801 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{4802 }
\DoxyCodeLine{4803 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_TRUETYPE\_IMPLEMENTATION}}
\DoxyCodeLine{4804 }
\DoxyCodeLine{4805 }
\DoxyCodeLine{4806 \textcolor{comment}{// FULL VERSION HISTORY}}
\DoxyCodeLine{4807 \textcolor{comment}{//}}
\DoxyCodeLine{4808 \textcolor{comment}{//   1.19 (2018-\/02-\/11) OpenType GPOS kerning (horizontal only), STBTT\_fmod}}
\DoxyCodeLine{4809 \textcolor{comment}{//   1.18 (2018-\/01-\/29) add missing function}}
\DoxyCodeLine{4810 \textcolor{comment}{//   1.17 (2017-\/07-\/23) make more arguments const; doc fix}}
\DoxyCodeLine{4811 \textcolor{comment}{//   1.16 (2017-\/07-\/12) SDF support}}
\DoxyCodeLine{4812 \textcolor{comment}{//   1.15 (2017-\/03-\/03) make more arguments const}}
\DoxyCodeLine{4813 \textcolor{comment}{//   1.14 (2017-\/01-\/16) num-\/fonts-\/in-\/TTC function}}
\DoxyCodeLine{4814 \textcolor{comment}{//   1.13 (2017-\/01-\/02) support OpenType fonts, certain Apple fonts}}
\DoxyCodeLine{4815 \textcolor{comment}{//   1.12 (2016-\/10-\/25) suppress warnings about casting away const with -\/Wcast-\/qual}}
\DoxyCodeLine{4816 \textcolor{comment}{//   1.11 (2016-\/04-\/02) fix unused-\/variable warning}}
\DoxyCodeLine{4817 \textcolor{comment}{//   1.10 (2016-\/04-\/02) allow user-\/defined fabs() replacement}}
\DoxyCodeLine{4818 \textcolor{comment}{//                     fix memory leak if fontsize=0.0}}
\DoxyCodeLine{4819 \textcolor{comment}{//                     fix warning from duplicate typedef}}
\DoxyCodeLine{4820 \textcolor{comment}{//   1.09 (2016-\/01-\/16) warning fix; avoid crash on outofmem; use alloc userdata for PackFontRanges}}
\DoxyCodeLine{4821 \textcolor{comment}{//   1.08 (2015-\/09-\/13) document stbtt\_Rasterize(); fixes for vertical \& horizontal edges}}
\DoxyCodeLine{4822 \textcolor{comment}{//   1.07 (2015-\/08-\/01) allow PackFontRanges to accept arrays of sparse codepoints;}}
\DoxyCodeLine{4823 \textcolor{comment}{//                     allow PackFontRanges to pack and render in separate phases;}}
\DoxyCodeLine{4824 \textcolor{comment}{//                     fix stbtt\_GetFontOFfsetForIndex (never worked for non-\/0 input?);}}
\DoxyCodeLine{4825 \textcolor{comment}{//                     fixed an assert() bug in the new rasterizer}}
\DoxyCodeLine{4826 \textcolor{comment}{//                     replace assert() with STBTT\_assert() in new rasterizer}}
\DoxyCodeLine{4827 \textcolor{comment}{//   1.06 (2015-\/07-\/14) performance improvements (\string~35\% faster on x86 and x64 on test machine)}}
\DoxyCodeLine{4828 \textcolor{comment}{//                     also more precise AA rasterizer, except if shapes overlap}}
\DoxyCodeLine{4829 \textcolor{comment}{//                     remove need for STBTT\_sort}}
\DoxyCodeLine{4830 \textcolor{comment}{//   1.05 (2015-\/04-\/15) fix misplaced definitions for STBTT\_STATIC}}
\DoxyCodeLine{4831 \textcolor{comment}{//   1.04 (2015-\/04-\/15) typo in example}}
\DoxyCodeLine{4832 \textcolor{comment}{//   1.03 (2015-\/04-\/12) STBTT\_STATIC, fix memory leak in new packing, various fixes}}
\DoxyCodeLine{4833 \textcolor{comment}{//   1.02 (2014-\/12-\/10) fix various warnings \& compile issues w/ stb\_rect\_pack, C++}}
\DoxyCodeLine{4834 \textcolor{comment}{//   1.01 (2014-\/12-\/08) fix subpixel position when oversampling to exactly match}}
\DoxyCodeLine{4835 \textcolor{comment}{//                        non-\/oversampled; STBTT\_POINT\_SIZE for packed case only}}
\DoxyCodeLine{4836 \textcolor{comment}{//   1.00 (2014-\/12-\/06) add new PackBegin etc. API, w/ support for oversampling}}
\DoxyCodeLine{4837 \textcolor{comment}{//   0.99 (2014-\/09-\/18) fix multiple bugs with subpixel rendering (ryg)}}
\DoxyCodeLine{4838 \textcolor{comment}{//   0.9  (2014-\/08-\/07) support certain mac/iOS fonts without an MS platformID}}
\DoxyCodeLine{4839 \textcolor{comment}{//   0.8b (2014-\/07-\/07) fix a warning}}
\DoxyCodeLine{4840 \textcolor{comment}{//   0.8  (2014-\/05-\/25) fix a few more warnings}}
\DoxyCodeLine{4841 \textcolor{comment}{//   0.7  (2013-\/09-\/25) bugfix: subpixel glyph bug fixed in 0.5 had come back}}
\DoxyCodeLine{4842 \textcolor{comment}{//   0.6c (2012-\/07-\/24) improve documentation}}
\DoxyCodeLine{4843 \textcolor{comment}{//   0.6b (2012-\/07-\/20) fix a few more warnings}}
\DoxyCodeLine{4844 \textcolor{comment}{//   0.6  (2012-\/07-\/17) fix warnings; added stbtt\_ScaleForMappingEmToPixels,}}
\DoxyCodeLine{4845 \textcolor{comment}{//                        stbtt\_GetFontBoundingBox, stbtt\_IsGlyphEmpty}}
\DoxyCodeLine{4846 \textcolor{comment}{//   0.5  (2011-\/12-\/09) bugfixes:}}
\DoxyCodeLine{4847 \textcolor{comment}{//                        subpixel glyph renderer computed wrong bounding box}}
\DoxyCodeLine{4848 \textcolor{comment}{//                        first vertex of shape can be off-\/curve (FreeSans)}}
\DoxyCodeLine{4849 \textcolor{comment}{//   0.4b (2011-\/12-\/03) fixed an error in the font baking example}}
\DoxyCodeLine{4850 \textcolor{comment}{//   0.4  (2011-\/12-\/01) kerning, subpixel rendering (tor)}}
\DoxyCodeLine{4851 \textcolor{comment}{//                    bugfixes for:}}
\DoxyCodeLine{4852 \textcolor{comment}{//                        codepoint-\/to-\/glyph conversion using table fmt=12}}
\DoxyCodeLine{4853 \textcolor{comment}{//                        codepoint-\/to-\/glyph conversion using table fmt=4}}
\DoxyCodeLine{4854 \textcolor{comment}{//                        stbtt\_GetBakedQuad with non-\/square texture (Zer)}}
\DoxyCodeLine{4855 \textcolor{comment}{//                    updated Hello World! sample to use kerning and subpixel}}
\DoxyCodeLine{4856 \textcolor{comment}{//                    fixed some warnings}}
\DoxyCodeLine{4857 \textcolor{comment}{//   0.3  (2009-\/06-\/24) cmap fmt=12, compound shapes (MM)}}
\DoxyCodeLine{4858 \textcolor{comment}{//                    userdata, malloc-\/from-\/userdata, non-\/zero fill (stb)}}
\DoxyCodeLine{4859 \textcolor{comment}{//   0.2  (2009-\/03-\/11) Fix unsigned/signed char warnings}}
\DoxyCodeLine{4860 \textcolor{comment}{//   0.1  (2009-\/03-\/09) First public release}}
\DoxyCodeLine{4861 \textcolor{comment}{//}}
\DoxyCodeLine{4862 }
\DoxyCodeLine{4863 \textcolor{comment}{/*}}
\DoxyCodeLine{4864 \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{4865 \textcolor{comment}{This software is available under 2 licenses -\/-\/ choose whichever you prefer.}}
\DoxyCodeLine{4866 \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{4867 \textcolor{comment}{ALTERNATIVE A -\/ MIT License}}
\DoxyCodeLine{4868 \textcolor{comment}{Copyright (c) 2017 Sean Barrett}}
\DoxyCodeLine{4869 \textcolor{comment}{Permission is hereby granted, free of charge, to any person obtaining a copy of }}
\DoxyCodeLine{4870 \textcolor{comment}{this software and associated documentation files (the "{}Software"{}), to deal in }}
\DoxyCodeLine{4871 \textcolor{comment}{the Software without restriction, including without limitation the rights to }}
\DoxyCodeLine{4872 \textcolor{comment}{use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies }}
\DoxyCodeLine{4873 \textcolor{comment}{of the Software, and to permit persons to whom the Software is furnished to do }}
\DoxyCodeLine{4874 \textcolor{comment}{so, subject to the following conditions:}}
\DoxyCodeLine{4875 \textcolor{comment}{The above copyright notice and this permission notice shall be included in all }}
\DoxyCodeLine{4876 \textcolor{comment}{copies or substantial portions of the Software.}}
\DoxyCodeLine{4877 \textcolor{comment}{THE SOFTWARE IS PROVIDED "{}AS IS"{}, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR }}
\DoxyCodeLine{4878 \textcolor{comment}{IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, }}
\DoxyCodeLine{4879 \textcolor{comment}{FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE }}
\DoxyCodeLine{4880 \textcolor{comment}{AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER }}
\DoxyCodeLine{4881 \textcolor{comment}{LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, }}
\DoxyCodeLine{4882 \textcolor{comment}{OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE }}
\DoxyCodeLine{4883 \textcolor{comment}{SOFTWARE.}}
\DoxyCodeLine{4884 \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{4885 \textcolor{comment}{ALTERNATIVE B -\/ Public Domain (www.unlicense.org)}}
\DoxyCodeLine{4886 \textcolor{comment}{This is free and unencumbered software released into the public domain.}}
\DoxyCodeLine{4887 \textcolor{comment}{Anyone is free to copy, modify, publish, use, compile, sell, or distribute this }}
\DoxyCodeLine{4888 \textcolor{comment}{software, either in source code form or as a compiled binary, for any purpose, }}
\DoxyCodeLine{4889 \textcolor{comment}{commercial or non-\/commercial, and by any means.}}
\DoxyCodeLine{4890 \textcolor{comment}{In jurisdictions that recognize copyright laws, the author or authors of this }}
\DoxyCodeLine{4891 \textcolor{comment}{software dedicate any and all copyright interest in the software to the public }}
\DoxyCodeLine{4892 \textcolor{comment}{domain. We make this dedication for the benefit of the public at large and to }}
\DoxyCodeLine{4893 \textcolor{comment}{the detriment of our heirs and successors. We intend this dedication to be an }}
\DoxyCodeLine{4894 \textcolor{comment}{overt act of relinquishment in perpetuity of all present and future rights to }}
\DoxyCodeLine{4895 \textcolor{comment}{this software under copyright law.}}
\DoxyCodeLine{4896 \textcolor{comment}{THE SOFTWARE IS PROVIDED "{}AS IS"{}, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR }}
\DoxyCodeLine{4897 \textcolor{comment}{IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, }}
\DoxyCodeLine{4898 \textcolor{comment}{FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE }}
\DoxyCodeLine{4899 \textcolor{comment}{AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN }}
\DoxyCodeLine{4900 \textcolor{comment}{ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION }}
\DoxyCodeLine{4901 \textcolor{comment}{WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.}}
\DoxyCodeLine{4902 \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{4903 \textcolor{comment}{*/}}

\end{DoxyCode}
